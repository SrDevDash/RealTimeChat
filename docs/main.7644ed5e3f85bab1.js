"use strict";(self.webpackChunkRealTimeChat=self.webpackChunkRealTimeChat||[]).push([[179],{2011:(ut,Ae,N)=>{N.d(Ae,{Dh:()=>Ce,GT:()=>we,cc:()=>ke,on:()=>Oe,pX:()=>oe,xv:()=>ge});var g=N(4650),F=N(127);ut=N.hmd(ut);const R=["ngOnDestroy"],oe=(ie,le,Ze,Qe={})=>new Proxy(ie,{get:(Re,_e)=>Ze.runOutsideAngular(()=>{var he;if(ie[_e])return!(null===(he=Qe?.spy)||void 0===he)&&he.get&&Qe.spy.get(_e,ie[_e]),ie[_e];if(R.indexOf(_e)>-1)return()=>{};const Le=le.toPromise().then(ee=>{const ne=ee&&ee[_e];return"function"==typeof ne?ne.bind(ee):ne&&ne.then?ne.then(ce=>Ze.run(()=>ce)):Ze.run(()=>ne)});return new Proxy(()=>{},{get:(ee,ne)=>Le[ne],apply:(ee,ne,ce)=>Le.then(W=>{var K;const se=W&&W(...ce);return!(null===(K=Qe?.spy)||void 0===K)&&K.apply&&Qe.spy.apply(_e,ce,se),se})})})}),we=(ie,le)=>{le.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Qe=>{Object.defineProperty(ie.prototype,Qe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Qe))})})};class ye{constructor(le){return le}}const Ce=new g.OlP("angularfire2.app.options"),ge=new g.OlP("angularfire2.app.name");function Oe(ie,le,Ze){const Re="object"==typeof Ze&&Ze||{};Re.name=Re.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const he=F.Z.apps.filter(Le=>Le&&Le.name===Re.name)[0]||le.runOutsideAngular(()=>F.Z.initializeApp(ie,Re));try{JSON.stringify(ie)!==JSON.stringify(he.options)&&H("error",`${he.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(he)}const H=(ie,...le)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ie](...le)};function ke(ie,le,Ze,Qe,Re){const[,_e,he]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===ie)||[];if(_e)return function Pe(ie,le){try{return ie.toString()===le.toString()}catch{return ie===le}}(Re,he)||(ze("error",`${le} was already initialized on the ${Ze} Firebase App with different settings.${me?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Re,was:he})),_e;{const Le=Qe();return globalThis.\u0275AngularfireInstanceCache.push([ie,Le,Re]),Le}}const me=!!ut.hot,ze=(ie,...le)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ie](...le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8554:(ut,Ae,N)=>{N.d(Ae,{$:()=>pa,A:()=>j,B:()=>Pe,G:()=>po,H:()=>Ur,J:()=>Mi,L:()=>zt,M:()=>Nh,N:()=>Oh,P:()=>Rm,Q:()=>rc,R:()=>Pw,T:()=>ic,U:()=>ks,V:()=>Fs,W:()=>am,X:()=>Aw,Y:()=>ha,Z:()=>wt,_:()=>Sw,a:()=>as,a0:()=>xw,a1:()=>Pn,a2:()=>Du,a3:()=>cc,a4:()=>hm,a5:()=>Mw,a6:()=>xn,a7:()=>_i,a8:()=>ma,a9:()=>os,aA:()=>Sa,aB:()=>ti,aC:()=>Fn,aD:()=>Pc,aE:()=>ot,aI:()=>wo,aL:()=>_o,aa:()=>Rw,ab:()=>hc,ac:()=>pc,af:()=>gm,ag:()=>mm,ah:()=>Bh,ak:()=>ca,al:()=>Im,an:()=>Em,ao:()=>jh,ap:()=>Ut,aq:()=>ce,ar:()=>qe,as:()=>st,at:()=>Qe,au:()=>xo,av:()=>ni,aw:()=>Re,ax:()=>ee,ay:()=>K,az:()=>Ht,b:()=>Us,c:()=>zn,d:()=>tf,e:()=>ef,f:()=>Ln,g:()=>nf,h:()=>Gr,i:()=>Fu,j:()=>Li,k:()=>$c,l:()=>Oi,m:()=>Ii,o:()=>ge,r:()=>Pi,s:()=>vi,u:()=>Qh});var g=N(5861),F=N(2090),R=N(9681),oe=N(655),we=N(1877),ye=N(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function Z(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},me=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),le=new we.Yd("@firebase/auth");function Ze(v,...f){le.logLevel<=we.in.ERROR&&le.error(`Auth (${R.SDK_VERSION}): ${v}`,...f)}function Qe(v,...f){throw Le(v,...f)}function Re(v,...f){return Le(v,...f)}function _e(v,f,m){const I=Object.assign(Object.assign({},me()),{[f]:m});return new F.LL("auth","Firebase",I).create(f,{appName:v.name})}function he(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Qe(v,"argument-error"),_e(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(v,...f){if("string"!=typeof v){const m=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(m,...I)}return ze.create(v,...f)}function ee(v,f,...m){if(!v)throw Le(f,...m)}function ne(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ze(f),new Error(f)}function ce(v,f){v||ne(f)}const W=new Map;function K(v){ce(v instanceof Function,"Expected a class definition");let f=W.get(v);return f?(ce(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,W.set(v,f),f)}function Se(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function xe(){return"http:"===it()||"https:"===it()}function it(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ve{constructor(f,m){this.shortDelay=f,this.longDelay=m,ce(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xe()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jt(v,f){ce(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Kn{static initialize(f,m,I){this.fetchImpl=f,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},jt=new Ve(3e4,6e4);function Rt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function St(v,f,m,I){return nr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(v,f,m,I,A={}){return ho(v,A,(0,g.Z)(function*(){let x={},Q={};I&&("GET"===f?Q=I:x={body:JSON.stringify(I)});const fe=(0,F.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),Be=yield v._getAdditionalHeaders();return Be["Content-Type"]="application/json",v.languageCode&&(Be["X-Firebase-Locale"]=v.languageCode),Kn.fetch()(fi(v,v.config.apiHost,m,fe),Object.assign({method:f,headers:Be,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ho(v,f,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(v,f,m){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},Xt),f);try{const A=new Ar(v),x=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const Q=yield x.json();if("needConfirmation"in Q)throw rr(v,"account-exists-with-different-credential",Q);if(x.ok&&!("errorMessage"in Q))return Q;{const fe=x.ok?Q.errorMessage:Q.error.message,[Be,Ye]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw rr(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Be)throw rr(v,"email-already-in-use",Q);if("USER_DISABLED"===Be)throw rr(v,"user-disabled",Q);const Ct=I[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw _e(v,Ct,Ye);Qe(v,Ct)}}catch(A){if(A instanceof F.ZR)throw A;Qe(v,"network-request-failed")}})).apply(this,arguments)}function yn(v,f,m,I){return es.apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(v,f,m,I,A={}){const x=yield St(v,f,m,I,A);return"mfaPendingCredential"in x&&Qe(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function fi(v,f,m,I){const A=`${f}${m}?${I}`;return v.config.emulator?Jt(v.config,A):`${v.config.apiScheme}://${A}`}class Ar{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rr(v,f,m){const I={appName:v.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const A=Re(v,f,I);return A.customData._tokenResponse=m,A}function ns(){return(ns=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function We(v,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Tn(v,f){return en.apply(this,arguments)}function en(){return(en=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Vr(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function _n(){return(_n=(0,g.Z)(function*(v,f=!1){const m=(0,F.m9)(v),I=yield m.getIdToken(f),A=nt(I);ee(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const x="object"==typeof A.firebase?A.firebase:void 0,Q=x?.sign_in_provider;return{claims:A,token:I,authTime:Vr(tn(A.auth_time)),issuedAtTime:Vr(tn(A.iat)),expirationTime:Vr(tn(A.exp)),signInProvider:Q||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function tn(v){return 1e3*Number(v)}function nt(v){var f;const[m,I,A]=v.split(".");if(void 0===m||void 0===I||void 0===A)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,F.tV)(I);return x?JSON.parse(x):(Ze("Failed to decode base64 JWT payload"),null)}catch(x){return Ze("Caught error parsing JWT payload as JSON",null===(f=x)||void 0===f?void 0:f.toString()),null}}function bt(v,f){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(I){throw I instanceof F.ZR&&sr(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function sr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class or{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),I)}iteration(){var f=this;return(0,g.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(m=I)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class pt{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(v){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(v){var f;const m=v.auth,I=yield v.getIdToken(),A=yield bt(v,Tn(m,{idToken:I}));ee(A?.users.length,m,"internal-error");const x=A.users[0];v._notifyReloadListener(x);const Q=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?L(x.providerUserInfo):[],fe=G(v.providerData,Q),Ct=!!v.isAnonymous&&!(v.email&&x.passwordHash||fe?.length),un={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:fe,metadata:new pt(x.createdAt,x.lastLoginAt),isAnonymous:Ct};Object.assign(v,un)})).apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(v){const f=(0,F.m9)(v);yield ar(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function G(v,f){return[...v.filter(I=>!f.some(A=>A.providerId===I.providerId)),...f]}function L(v){return v.map(f=>{var{providerId:m}=f,I=(0,oe._T)(f,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function U(){return(U=(0,g.Z)(function*(v,f){const m=yield ho(v,{},(0,g.Z)(function*(){const I=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:x}=v.config,Q=fi(v,A,"/v1/token",`key=${x}`),fe=yield v._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Kn.fetch()(Q,{method:"POST",headers:fe,body:I})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(typeof f.idToken<"u","internal-error"),ee(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function rt(v){const f=nt(v);return ee(f,"internal-error"),ee(typeof f.exp<"u","internal-error"),ee(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var I=this;return(0,g.Z)(function*(){return ee(!I.accessToken||I.refreshToken,f,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var I=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:x,expiresIn:Q}=yield function O(v,f){return U.apply(this,arguments)}(f,m);I.updateTokensAndExpiration(A,x,Number(Q))})()}updateTokensAndExpiration(f,m,I){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,m){const{refreshToken:I,accessToken:A,expirationTime:x}=m,Q=new $;return I&&(ee("string"==typeof I,"internal-error",{appName:f}),Q.refreshToken=I),A&&(ee("string"==typeof A,"internal-error",{appName:f}),Q.accessToken=A),x&&(ee("number"==typeof x,"internal-error",{appName:f}),Q.expirationTime=x),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return ne("not implemented")}}function pe(v,f){ee("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Fe{constructor(f){var{uid:m,auth:I,stsTokenManager:A}=f,x=(0,oe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new pt(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,g.Z)(function*(){const I=yield bt(m,m.stsTokenManager.getToken(m.auth,f));return ee(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(f){return function dn(v){return _n.apply(this,arguments)}(this,f)}reload(){return function Yr(v){return kt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Fe(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var I=this;return(0,g.Z)(function*(){let A=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield ar(I)),yield I.auth._persistUserIfCurrent(I),A&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,g.Z)(function*(){const m=yield f.getIdToken();return yield bt(f,function ts(v,f){return ns.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var I,A,x,Q,fe,Be,Ye,Ct;const un=null!==(I=m.displayName)&&void 0!==I?I:void 0,ri=null!==(A=m.email)&&void 0!==A?A:void 0,Xs=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Gc=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,Na=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,ji=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,Hi=null!==(Ye=m.createdAt)&&void 0!==Ye?Ye:void 0,Oa=null!==(Ct=m.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:zc,emailVerified:df,isAnonymous:fs,providerData:Wc,stsTokenManager:hf}=m;ee(zc&&hf,f,"internal-error");const ff=$.fromJSON(this.name,hf);ee("string"==typeof zc,f,"internal-error"),pe(un,f.name),pe(ri,f.name),ee("boolean"==typeof df,f,"internal-error"),ee("boolean"==typeof fs,f,"internal-error"),pe(Xs,f.name),pe(Gc,f.name),pe(Na,f.name),pe(ji,f.name),pe(Hi,f.name),pe(Oa,f.name);const qc=new Fe({uid:zc,auth:f,email:ri,emailVerified:df,displayName:un,isAnonymous:fs,photoURL:Gc,phoneNumber:Xs,tenantId:Na,stsTokenManager:ff,createdAt:Hi,lastLoginAt:Oa});return Wc&&Array.isArray(Wc)&&(qc.providerData=Wc.map(Gu=>Object.assign({},Gu))),ji&&(qc._redirectEventId=ji),qc}static _fromIdTokenResponse(f,m,I=!1){return(0,g.Z)(function*(){const A=new $;A.updateFromServerResponse(m);const x=new Fe({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:I});return yield ar(x),x})()}}const zt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,I){var A=this;return(0,g.Z)(function*(){A.storage[m]=I})()}_get(m){var I=this;return(0,g.Z)(function*(){const A=I.storage[m];return void 0===A?null:A})()}_remove(m){var I=this;return(0,g.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return v.type="NONE",v})();function Ht(v,f,m){return`firebase:${v}:${f}:${m}`}class An{constructor(f,m,I){this.persistence=f,this.auth=m,this.userKey=I;const{config:A,name:x}=this.auth;this.fullUserKey=Ht(this.userKey,A.apiKey,x),this.fullPersistenceKey=Ht("persistence",A.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,g.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Fe._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,g.Z)(function*(){if(m.persistence===f)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,I="authUser"){return(0,g.Z)(function*(){if(!m.length)return new An(K(zt),f,I);const A=(yield Promise.all(m.map(function(){var Ye=(0,g.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let x=A[0]||K(zt);const Q=Ht(I,f.config.apiKey,f.name);let fe=null;for(const Ye of m)try{const Ct=yield Ye._get(Q);if(Ct){const un=Fe._fromJSON(f,Ct);Ye!==x&&(fe=un),x=Ye;break}}catch{}const Be=A.filter(Ye=>Ye._shouldAllowMigration);return x._shouldAllowMigration&&Be.length?(x=Be[0],fe&&(yield x._set(Q,fe.toJSON())),yield Promise.all(m.map(function(){var Ye=(0,g.Z)(function*(Ct){if(Ct!==x)try{yield Ct._remove(Q)}catch{}});return function(Ct){return Ye.apply(this,arguments)}}())),new An(x,f,I)):new An(x,f,I)})()}}function Y(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ue(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(P(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(dt(f))return"Blackberry";if(Ee(f))return"Webos";if(V(f))return"Safari";if((f.includes("chrome/")||ue(f))&&!f.includes("edge/"))return"Chrome";if(st(f))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function P(v=(0,F.z$)()){return/firefox\//i.test(v)}function V(v=(0,F.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ue(v=(0,F.z$)()){return/crios\//i.test(v)}function Ue(v=(0,F.z$)()){return/iemobile/i.test(v)}function st(v=(0,F.z$)()){return/android/i.test(v)}function dt(v=(0,F.z$)()){return/blackberry/i.test(v)}function Ee(v=(0,F.z$)()){return/webos/i.test(v)}function qe(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ut(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Zt(v=(0,F.z$)()){return qe(v)||st(v)||Ee(v)||dt(v)||/windows phone/i.test(v)||Ue(v)}function on(v,f=[]){let m;switch(v){case"Browser":m=Y((0,F.z$)());break;case"Worker":m=`${Y((0,F.z$)())}-${v}`;break;default:m=v}const I=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${I}`}class ia{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const I=x=>new Promise((Q,fe)=>{try{Q(f(x))}catch(Be){fe(Be)}});I.onAbort=m,this.queue.push(I);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,g.Z)(function*(){var I;if(m.auth.currentUser===f)return;const A=[];try{for(const x of m.queue)yield x(f),x.onAbort&&A.push(x.onAbort)}catch(x){A.reverse();for(const Q of A)try{Q()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=x)||void 0===I?void 0:I.message})}})()}}class fo{constructor(f,m,I){this.app=f,this.heartbeatServiceProvider=m,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new As(this),this.idTokenSubscription=new As(this),this.beforeStateQueue=new ia(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(f,m){var I=this;return m&&(this._popupRedirectResolver=K(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,x;if(!I._deleted&&(I.persistenceManager=yield An.create(I,f),!I._deleted)){if(null!==(A=I._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(m),I.lastNotifiedUid=(null===(x=I.currentUser)||void 0===x?void 0:x.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,g.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,g.Z)(function*(){var I;const A=yield m.assertedPersistence.getCurrentUser();let x=A,Q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,Be=x?._redirectEventId,Ye=yield m.tryRedirectSignIn(f);(!fe||fe===Be)&&Ye?.user&&(x=Ye.user,Q=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(x)}catch(fe){x=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var m=this;return(0,g.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,g.Z)(function*(){var I;try{yield ar(f)}catch(A){if("auth/network-request-failed"!==(null===(I=A)||void 0===I?void 0:I.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Bt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,g.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,g.Z)(function*(){const I=f?(0,F.m9)(f):null;return I&&ee(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(f,m=!1){var I=this;return(0,g.Z)(function*(){if(!I._deleted)return f&&ee(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),m||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,g.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,g.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(K(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,m,I){return this.registerStateListener(this.authStateSubscription,f,m,I)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,I){return this.registerStateListener(this.idTokenSubscription,f,m,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var I=this;return(0,g.Z)(function*(){const A=yield I.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const I=f&&K(f)||m._popupRedirectResolver;ee(I,m,"argument-error"),m.redirectPersistenceManager=yield An.create(m,[K(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,g.Z)(function*(){var I,A;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,g.Z)(function*(){if(f===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,I,A){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(Q,this,"internal-error"),Q.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,I,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=on(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,g.Z)(function*(){var m;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(I["X-Firebase-Client"]=A),I})()}}function ot(v){return(0,F.m9)(v)}class As{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function po(v,f,m){const I=ot(v);ee(I._canInitEmulator,I,"emulator-config-failed"),ee(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const A=!!m?.disableWarnings,x=mu(f),{host:Q,port:fe}=function Ss(v){const f=mu(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(I);if(A){const x=A[1];return{host:x,port:Sn(I.substr(x.length+1))}}{const[x,Q]=I.split(":");return{host:x,port:Sn(Q)}}}(f);I.config.emulator={url:`${x}//${Q}${null===fe?"":`:${fe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Q,port:fe,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function xs(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function mu(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Sn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Ur{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ne("not implemented")}_getIdTokenResponse(f){return ne("not implemented")}_linkToIdToken(f,m){return ne("not implemented")}_getReauthenticationResolver(f){return ne("not implemented")}}function Br(v,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:resetPassword",Rt(v,f))})).apply(this,arguments)}function ec(v,f){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function im(v,f){return yu.apply(this,arguments)}function yu(){return(yu=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:update",Rt(v,f))})).apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithPassword",Rt(v,f))})).apply(this,arguments)}function gi(v,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:sendOobCode",Rt(v,f))})).apply(this,arguments)}function Ns(v,f){return On.apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(v,f){return gi(v,f)})).apply(this,arguments)}function sm(v,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(v,f){return gi(v,f)})).apply(this,arguments)}function Sr(v,f){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(v,f){return gi(v,f)})).apply(this,arguments)}function _u(v,f){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(function*(v,f){return gi(v,f)})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithEmailLink",Rt(v,f))})).apply(this,arguments)}function tc(){return(tc=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithEmailLink",Rt(v,f))})).apply(this,arguments)}class aa extends Ur{constructor(f,m,I,A=null){super("password",I),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new aa(f,m,"password")}static _fromEmailAndCode(f,m,I=null){return new aa(f,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function sa(v,f){return oa.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function mi(v,f){return vu.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Qe(f,"internal-error")}})()}_linkToIdToken(f,m){var I=this;return(0,g.Z)(function*(){switch(I.signInMethod){case"password":return ec(f,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ww(v,f){return tc.apply(this,arguments)}(f,{idToken:m,email:I._email,oobCode:I._password});default:Qe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ps(v,f){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithIdp",Rt(v,f))})).apply(this,arguments)}class Mi extends Ur{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Mi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Qe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:A}=m,x=(0,oe._T)(m,["providerId","signInMethod"]);if(!I||!A)return null;const Q=new Mi(I,A);return Q.idToken=x.idToken||void 0,Q.accessToken=x.accessToken||void 0,Q.secret=x.secret,Q.nonce=x.nonce,Q.pendingToken=x.pendingToken||null,Q}_getIdTokenResponse(f){return Ps(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,Ps(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Ps(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,F.xO)(m)}return f}}function Ew(v,f){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:sendVerificationCode",Rt(v,f))})).apply(this,arguments)}function Sh(){return(Sh=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,f))})).apply(this,arguments)}function xh(){return(xh=(0,g.Z)(function*(v,f){const m=yield yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,f));if(m.temporaryProof)throw rr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const bw={USER_NOT_FOUND:"user-not-found"};function Mh(){return(Mh=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithPhoneNumber",Rt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),bw)})).apply(this,arguments)}class mo extends Ur{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new mo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new mo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Dw(v,f){return Sh.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Cw(v,f){return xh.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Tw(v,f){return Mh.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:I,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:I,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:I,phoneNumber:A,temporaryProof:x}=f;return I||m||A||x?new mo({verificationId:m,verificationCode:I,phoneNumber:A,temporaryProof:x}):null}}class wu{constructor(f){var m,I,A,x,Q,fe;const Be=(0,F.zd)((0,F.pd)(f)),Ye=null!==(m=Be.apiKey)&&void 0!==m?m:null,Ct=null!==(I=Be.oobCode)&&void 0!==I?I:null,un=function Rh(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Be.mode)&&void 0!==A?A:null);ee(Ye&&Ct&&un,"argument-error"),this.apiKey=Ye,this.operation=un,this.code=Ct,this.continueUrl=null!==(x=Be.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Q=Be.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(fe=Be.tenantId)&&void 0!==fe?fe:null}static parseLink(f){const m=function nc(v){const f=(0,F.zd)((0,F.pd)(v)).link,m=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,I=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(I?(0,F.zd)((0,F.pd)(I)).link:null)||I||m||f||v}(f);try{return new wu(m)}catch{return null}}}let Nh=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,I){return aa._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const A=wu.parseLink(I);return ee(A,"argument-error"),aa._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Zn{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class yo extends Zn{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ks extends yo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),Mi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),Mi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ks.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ks.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:A,pendingToken:x,nonce:Q,providerId:fe}=f;if(!I&&!A&&!m&&!x||!fe)return null;try{return new ks(fe)._credential({idToken:m,accessToken:I,nonce:Q,pendingToken:x})}catch{return null}}}let Oh=(()=>{class v extends yo{constructor(){super("facebook.com")}static credential(m){return Mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),rc=(()=>{class v extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:A}=m;if(!I&&!A)return null;try{return v.credential(I,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ic=(()=>{class v extends yo{constructor(){super("github.com")}static credential(m){return Mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class _o extends Ur{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Ps(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,Ps(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Ps(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:A,pendingToken:x}=m;return I&&A&&x&&I===A?new _o(I,x):null}static _create(f,m){return new _o(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends Zn{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Fs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Fs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=_o.fromJSON(f);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:I}=f;if(!m||!I)return null;try{return _o._create(I,m)}catch{return null}}}let am=(()=>{class v extends yo{constructor(){super("twitter.com")}static credential(m,I){return Mi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:A}=m;if(!I||!A)return null;try{return v.credential(I,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function xr(v,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signUp",Rt(v,f))})).apply(this,arguments)}class Qr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,I,A=!1){return(0,g.Z)(function*(){const x=yield Fe._fromIdTokenResponse(f,I,A),Q=la(I);return new Qr({user:x,providerId:Q,_tokenResponse:I,operationType:m})})()}static _forOperation(f,m,I){return(0,g.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const A=la(I);return new Qr({user:f,providerId:A,_tokenResponse:I,operationType:m})})()}}function la(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Aw(v){return um.apply(this,arguments)}function um(){return(um=(0,g.Z)(function*(v){var f;const m=ot(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Qr({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield xr(m,{returnSecureToken:!0}),A=yield Qr._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class vn extends F.ZR{constructor(f,m,I,A){var x;super(m.code,m.message),this.operationType=I,this.user=A,Object.setPrototypeOf(this,vn.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,m,I,A){return new vn(f,m,I,A)}}function kh(v,f,m,I){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?vn._fromErrorAndOperation(v,x,f,I):x})}function lm(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function ca(v,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(v,f){const m=(0,F.m9)(v);yield rs(!0,m,f);const{providerUserInfo:I}=yield We(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=lm(I||[]);return m.providerData=m.providerData.filter(x=>A.has(x.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Fh(v,f){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(v,f,m=!1){const I=yield bt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return Qr._forOperation(v,"link",I)})).apply(this,arguments)}function rs(v,f,m){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(function*(v,f,m){yield ar(f);const A=!1===v?"provider-already-linked":"no-such-provider";ee(lm(f.providerData).has(m)===v,f.auth,A)})).apply(this,arguments)}function Lh(v,f){return is.apply(this,arguments)}function is(){return(is=(0,g.Z)(function*(v,f,m=!1){var I;const{auth:A}=v,x="reauthenticate";try{const Q=yield bt(v,kh(A,x,f,v),m);ee(Q.idToken,A,"internal-error");const fe=nt(Q.idToken);ee(fe,A,"internal-error");const{sub:Be}=fe;return ee(v.uid===Be,A,"user-mismatch"),Qr._forOperation(v,x,Q)}catch(Q){throw"auth/user-not-found"===(null===(I=Q)||void 0===I?void 0:I.code)&&Qe(A,"user-mismatch"),Q}})).apply(this,arguments)}function cm(v,f){return yi.apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(v,f,m=!1){const I="signIn",A=yield kh(v,I,f),x=yield Qr._fromIdTokenResponse(v,I,A);return m||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function ha(v,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(v,f){return cm(ot(v),f)})).apply(this,arguments)}function wt(v,f){return sc.apply(this,arguments)}function sc(){return(sc=(0,g.Z)(function*(v,f){const m=(0,F.m9)(v);return yield rs(!1,m,f.providerId),Fh(m,f)})).apply(this,arguments)}function Sw(v,f){return oc.apply(this,arguments)}function oc(){return(oc=(0,g.Z)(function*(v,f){return Lh((0,F.m9)(v),f)})).apply(this,arguments)}function dm(v,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,g.Z)(function*(v,f){return yn(v,"POST","/v1/accounts:signInWithCustomToken",Rt(v,f))})).apply(this,arguments)}function pa(v,f){return uc.apply(this,arguments)}function uc(){return(uc=(0,g.Z)(function*(v,f){const m=ot(v),I=yield dm(m,{token:f,returnSecureToken:!0}),A=yield Qr._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Iu{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?ve._fromServerResponse(f,m):Qe(f,"internal-error")}}class ve extends Iu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new ve(m)}}function Ft(v,f,m){var I;ee((null===(I=m.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),ee(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function xw(v,f,m){return lc.apply(this,arguments)}function lc(){return(lc=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v),A={requestType:"PASSWORD_RESET",email:f};m&&Ft(I,A,m),yield sm(I,A)})).apply(this,arguments)}function Pn(v,f,m){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(v,f,m){yield Br((0,F.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Du(v,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(v,f){yield im((0,F.m9)(v),{oobCode:f})})).apply(this,arguments)}function cc(v,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,g.Z)(function*(v,f){const m=(0,F.m9)(v),I=yield Br(m,{oobCode:f}),A=I.requestType;switch(ee(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(I.mfaInfo,m,"internal-error");default:ee(I.email,m,"internal-error")}let x=null;return I.mfaInfo&&(x=Iu._fromServerResponse(ot(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:x},operation:A}})).apply(this,arguments)}function hm(v,f){return dc.apply(this,arguments)}function dc(){return(dc=(0,g.Z)(function*(v,f){const{data:m}=yield cc((0,F.m9)(v),f);return m.email})).apply(this,arguments)}function Mw(v,f,m){return ss.apply(this,arguments)}function ss(){return(ss=(0,g.Z)(function*(v,f,m){const I=ot(v),A=yield xr(I,{returnSecureToken:!0,email:f,password:m}),x=yield Qr._fromIdTokenResponse(I,"signIn",A);return yield I._updateCurrentUser(x.user),x})).apply(this,arguments)}function xn(v,f,m){return ha((0,F.m9)(v),Nh.credential(f,m))}function _i(v,f,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};ee(m.handleCodeInApp,I,"argument-error"),m&&Ft(I,A,m),yield Sr(I,A)})).apply(this,arguments)}function ma(v,f){return"EMAIL_SIGNIN"===wu.parseLink(f)?.operation}function os(v,f,m){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v),A=Nh.credentialWithLink(f,m||Se());return ee(A._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),ha(I,A)})).apply(this,arguments)}function fm(v,f){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:createAuthUri",Rt(v,f))})).apply(this,arguments)}function Rw(v,f){return bu.apply(this,arguments)}function bu(){return(bu=(0,g.Z)(function*(v,f){const I={identifier:f,continueUri:xe()?Se():"http://localhost"},{signinMethods:A}=yield fm((0,F.m9)(v),I);return A||[]})).apply(this,arguments)}function hc(v,f){return fc.apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(v,f){const m=(0,F.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ft(m.auth,A,f);const{email:x}=yield Ns(m.auth,A);x!==v.email&&(yield v.reload())})).apply(this,arguments)}function pc(v,f,m){return gc.apply(this,arguments)}function gc(){return(gc=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&Ft(I.auth,x,m);const{email:Q}=yield _u(I.auth,x);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function pm(v,f){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,g.Z)(function*(v,f){return St(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gm(v,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,g.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const I=(0,F.m9)(v),x={idToken:yield I.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Q=yield bt(I,pm(I.auth,x));I.displayName=Q.displayName||null,I.photoURL=Q.photoUrl||null;const fe=I.providerData.find(({providerId:Be})=>"password"===Be);fe&&(fe.displayName=I.displayName,fe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Q)})).apply(this,arguments)}function mm(v,f){return vo((0,F.m9)(v),f,null)}function Bh(v,f){return vo((0,F.m9)(v),null,f)}function vo(v,f,m){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(function*(v,f,m){const{auth:I}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const Q=yield bt(v,ec(I,x));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class hn{constructor(f,m,I={}){this.isNewUser=f,this.providerId=m,this.profile=I}}class Ri extends hn{constructor(f,m,I,A){super(f,m,I),this.username=A}}class fn extends hn{constructor(f,m){super(f,"facebook.com",m)}}class _m extends Ri{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class vm extends hn{constructor(f,m){super(f,"google.com",m)}}class wm extends Ri{constructor(f,m,I){super(f,"twitter.com",m,I)}}function Im(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ym(v){var f,m;if(!v)return null;const{providerId:I}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Q=null===(m=null===(f=nt(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new hn(x,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!I)return null;switch(I){case"facebook.com":return new fn(x,A);case"github.com":return new _m(x,A);case"google.com":return new vm(x,A);case"twitter.com":return new wm(x,A,v.screenName||null);case"custom":case"anonymous":return new hn(x,null);default:return new hn(x,I,A)}}(m)}class Hr{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new Hr("enroll",f)}static _fromMfaPendingCredential(f){return new Hr("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,I;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Hr._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return Hr._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ic{constructor(f,m,I){this.session=f,this.hints=m,this.signInResolver=I}static _fromError(f,m){const I=ot(f),A=m.customData._serverResponse,x=(A.mfaInfo||[]).map(fe=>Iu._fromServerResponse(I,fe));ee(A.mfaPendingCredential,I,"internal-error");const Q=Hr._fromMfaPendingCredential(A.mfaPendingCredential);return new Ic(Q,x,function(){var fe=(0,g.Z)(function*(Be){const Ye=yield Be._process(I,Q);delete A.mfaInfo,delete A.mfaPendingCredential;const Ct=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(m.operationType){case"signIn":const un=yield Qr._fromIdTokenResponse(I,m.operationType,Ct);return yield I._updateCurrentUser(un.user),un;case"reauthenticate":return ee(m.user,I,"internal-error"),Qr._forOperation(m.user,m.operationType,Ct);default:Qe(I,"internal-error")}});return function(Be){return fe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,g.Z)(function*(){return m.signInResolver(f)})()}}function Em(v,f){var m;const I=(0,F.m9)(v),A=f;return ee(f.customData.operationType,I,"argument-error"),ee(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Ic._fromError(I,A)}function ya(v,f){return St(v,"POST","/v2/accounts/mfaEnrollment:start",Rt(v,f))}class Mu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>Iu._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new Mu(f)}getSession(){var f=this;return(0,g.Z)(function*(){return Hr._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var I=this;return(0,g.Z)(function*(){const A=f,x=yield I.getSession(),Q=yield bt(I.user,A._process(I.user.auth,x,m));return yield I.user._updateTokensIfNecessary(Q),I.user.reload()})()}unenroll(f){var m=this;return(0,g.Z)(function*(){var I;const A="string"==typeof f?f:f.uid,x=yield m.user.getIdToken(),Q=yield bt(m.user,function xu(v,f){return St(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(v,f))}(m.user.auth,{idToken:x,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:fe})=>fe!==A),yield m.user._updateTokensIfNecessary(Q);try{yield m.user.reload()}catch(fe){if("auth/user-token-expired"!==(null===(I=fe)||void 0===I?void 0:I.code))throw fe}})()}}const Dm=new WeakMap;function jh(v){const f=(0,F.m9)(v);return Dm.has(f)||Dm.set(f,Mu._fromUser(f)),Dm.get(f)}const Ni="__sak";class Dc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ni,"1"),this.storage.removeItem(Ni),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Us=(()=>{class v extends Dc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cc(){const v=(0,F.z$)();return V(v)||qe(v)}()&&function pi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Zt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const A=this.storage.getItem(I),x=this.localCache[I];A!==x&&m(I,x,A)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((fe,Be,Ye)=>{this.notifyListeners(fe,Ye)});const A=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(A);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!I)return}const x=()=>{const fe=this.storage.getItem(A);!I&&this.localCache[A]===fe||this.notifyListeners(A,fe)},Q=this.storage.getItem(A);!function xt(){return(0,F.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,I){this.localCache[m]=I;const A=this.listeners[m];if(A)for(const x of Array.from(A))x(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var A=()=>super._set,x=this;return(0,g.Z)(function*(){yield A().call(x,m,I),x.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,A=this;return(0,g.Z)(function*(){const x=yield I().call(A,m);return A.localCache[m]=JSON.stringify(x),x})()}_remove(m){var I=()=>super._remove,A=this;return(0,g.Z)(function*(){yield I().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),as=(()=>{class v extends Dc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return v.type="SESSION",v})();let Ru=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(x=>x.isListeningto(m));if(I)return I;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,g.Z)(function*(){const A=m,{eventId:x,eventType:Q,data:fe}=A.data,Be=I.handlersMap[Q];if(!Be?.size)return;A.ports[0].postMessage({status:"ack",eventId:x,eventType:Q});const Ye=Array.from(Be).map(function(){var un=(0,g.Z)(function*(ri){return ri(A.origin,fe)});return function(ri){return un.apply(this,arguments)}}()),Ct=yield function bc(v){return Promise.all(v.map(function(){var f=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return f.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:x,eventType:Q,response:Ct})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function wo(v="",f=10){let m="";for(let I=0;I<f;I++)m+=Math.floor(10*Math.random());return v+m}class Tm{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,I=50){var A=this;return(0,g.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Q,fe;return new Promise((Be,Ye)=>{const Ct=wo("",20);x.port1.start();const un=setTimeout(()=>{Ye(new Error("unsupported_event"))},I);fe={messageChannel:x,onMessage(ri){const Xs=ri;if(Xs.data.eventId===Ct)switch(Xs.data.status){case"ack":clearTimeout(un),Q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Be(Xs.data.response);break;default:clearTimeout(un),clearTimeout(Q),Ye(new Error("invalid_response"))}}},A.handlers.add(fe),x.port1.addEventListener("message",fe.onMessage),A.target.postMessage({eventType:f,eventId:Ct,data:m},[x.port2])}).finally(()=>{fe&&A.removeMessageHandler(fe)})})()}}function Mn(){return window}function Xr(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function Bs(){return(Bs=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const va="firebaseLocalStorageDb",Ia="firebaseLocalStorage",Ou="fbase_key";class Io{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Pu(v,f){return v.transaction([Ia],f?"readwrite":"readonly").objectStore(Ia)}function Wh(){const v=indexedDB.open(va,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(Ia,{keyPath:Ou})}catch(A){m(A)}}),v.addEventListener("success",(0,g.Z)(function*(){const I=v.result;I.objectStoreNames.contains(Ia)?f(I):(I.close(),yield function zh(){const v=indexedDB.deleteDatabase(va);return new Io(v).toPromise()}(),f(yield Wh()))}))})}function Ea(v,f,m){return us.apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(v,f,m){const I=Pu(v,!0).put({[Ou]:f,value:m});return new Io(I).toPromise()})).apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(v,f){const m=Pu(v,!1).get(f),I=yield new Io(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function qh(v,f){const m=Pu(v,!0).delete(f);return new Io(m).toPromise()}const Fu=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield Wh()),m.db})()}_withRetries(m){var I=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const x=yield I._openDb();return yield m(x)}catch(x){if(A++>3)throw x;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return Xr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=Ru._getInstance(function Nu(){return Xr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var I=(0,g.Z)(function*(A,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(A,x){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,g.Z)(function*(A,x){return["keyChanged"]});return function(A,x){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var I,A;if(m.activeServiceWorker=yield function Am(){return Bs.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Tm(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);!x||(null===(I=x[0])||void 0===I?void 0:I.fulfilled)&&(null===(A=x[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,g.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Tc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Wh();return yield Ea(m,Ni,"1"),yield qh(m,Ni),!0}catch{}return!1})()}_withPendingWrite(m){var I=this;return(0,g.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(x=>Ea(x,m,I)),A.localCache[m]=I,A.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,g.Z)(function*(){const A=yield I._withRetries(x=>function Sm(v,f){return ku.apply(this,arguments)}(x,m));return I.localCache[m]=A,A})()}_remove(m){var I=this;return(0,g.Z)(function*(){return I._withPendingWrite((0,g.Z)(function*(){return yield I._withRetries(A=>qh(A,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const I=yield m._withRetries(Q=>{const fe=Pu(Q,!1).getAll();return new Io(fe).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const A=[],x=new Set;for(const{fbase_key:Q,value:fe}of I)x.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(fe)&&(m.notifyListeners(Q,fe),A.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!x.has(Q)&&(m.notifyListeners(Q,null),A.push(Q));return A})()}notifyListeners(m,I){this.localCache[m]=I;const A=this.listeners[m];if(A)for(const x of Array.from(A))x(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function xm(v,f){return St(v,"POST","/v2/accounts/mfaSignIn:start",Rt(v,f))}function $s(){return($s=(0,g.Z)(function*(v){return(yield St(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eo(v){return new Promise((f,m)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=f,I.onerror=A=>{const x=Re("internal-error");x.customData=A,m(x)},I.type="text/javascript",I.charset="UTF-8",function Ca(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(I)})}function Ac(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Yh=1e12;class Nw{constructor(f){this.auth=f,this.counter=Yh,this._widgets=new Map}render(f,m){const I=this.counter;return this._widgets.set(I,new nn(f,this.auth.name,m||{})),this.counter++,I}reset(f){var m;const I=f||Yh;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Yh))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,g.Z)(function*(){var I;return null===(I=m._widgets.get(f||Yh))||void 0===I||I.execute(),""})()}}class nn{constructor(f,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;ee(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ow(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mm=Ac("rcb"),$C=new Ve(3e4,6e4);class HC{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Mn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return ee(function GC(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Mn().grecaptcha):new Promise((I,A)=>{const x=Mn().setTimeout(()=>{A(Re(f,"network-request-failed"))},$C.get());Mn()[Mm]=()=>{Mn().clearTimeout(x),delete Mn()[Mm];const fe=Mn().grecaptcha;if(!fe)return void A(Re(f,"internal-error"));const Be=fe.render;fe.render=(Ye,Ct)=>{const un=Be(Ye,Ct);return this.counter++,un},this.hostLanguage=m,I(fe)},Eo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Mm,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),A(Re(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Mn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zC{load(f){return(0,g.Z)(function*(){return new Nw(f)})()}clearedOneInstance(){}}const Ta="recaptcha",WC={theme:"light",type:"image"};class Pw{constructor(f,m=Object.assign({},WC),I){this.parameters=m,this.type=Ta,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(I),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;ee(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zC:new HC,this.validateStartingState()}verify(){var f=this;return(0,g.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(m)||new Promise(x=>{const Q=fe=>{!fe||(f.tokenChangeListeners.delete(Q),x(fe))};f.tokenChangeListeners.add(Q),f.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof f)f(m);else if("string"==typeof f){const I=Mn()[f];"function"==typeof I&&I(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,g.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,g.Z)(function*(){ee(xe()&&!Xr(),f.auth,"internal-error"),yield function kn(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Vu(v){return $s.apply(this,arguments)}(f.auth);ee(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yt{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=mo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function vi(v,f,m){return et.apply(this,arguments)}function et(){return(et=(0,g.Z)(function*(v,f,m){const I=ot(v),A=yield Gn(I,f,(0,F.m9)(m));return new Yt(A,x=>ha(I,x))})).apply(this,arguments)}function Oi(v,f,m){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v);yield rs(!1,I,"phone");const A=yield Gn(I.auth,f,(0,F.m9)(m));return new Yt(A,x=>wt(I,x))})).apply(this,arguments)}function Pi(v,f,m){return js.apply(this,arguments)}function js(){return(js=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v),A=yield Gn(I.auth,f,(0,F.m9)(m));return new Yt(A,x=>Sw(I,x))})).apply(this,arguments)}function Gn(v,f,m){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(v,f,m){var I;const A=yield m.verify();try{let x;if(ee("string"==typeof A,v,"argument-error"),ee(m.type===Ta,v,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const Q=x.session;if("phoneNumber"in x)return ee("enroll"===Q.type,v,"internal-error"),(yield ya(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ee("signin"===Q.type,v,"internal-error");const fe=(null===(I=x.multiFactorHint)||void 0===I?void 0:I.uid)||x.multiFactorUid;return ee(fe,v,"missing-multi-factor-info"),(yield xm(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Ew(v,{phoneNumber:x.phoneNumber,recaptchaToken:A});return Q}}finally{m._reset()}})).apply(this,arguments)}function Qh(v,f){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(v,f){yield Fh((0,F.m9)(v),f)})).apply(this,arguments)}let Rm=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=ot(m)}verifyPhoneNumber(m,I){return Gn(this.auth,m,(0,F.m9)(I))}static credential(m,I){return mo._fromVerification(m,I)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:A}=m;return I&&A?mo._fromTokenResponse(I,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Gs(v,f){return f?K(f):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Jh extends Ur{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ps(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Ps(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Ps(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function zs(v){return cm(v.auth,new Jh(v),v.bypassAuthState)}function tt(v){const{auth:f,user:m}=v;return ee(m,f,"internal-error"),Lh(m,new Jh(v),v.bypassAuthState)}function xc(v){return cs.apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(v){const{auth:f,user:m}=v;return ee(m,f,"internal-error"),Fh(m,new Jh(v),v.bypassAuthState)})).apply(this,arguments)}class Xh{constructor(f,m,I,A,x=!1){this.auth=f,this.resolver=I,this.user=A,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,g.Z)(function*(I,A){f.pendingPromise={resolve:I,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(I,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,g.Z)(function*(){const{urlResponse:I,sessionId:A,postBody:x,tenantId:Q,error:fe,type:Be}=f;if(fe)return void m.reject(fe);const Ye={auth:m.auth,requestUri:I,sessionId:A,tenantId:Q||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(Ye))}catch(Ct){m.reject(Ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zs;case"linkViaPopup":case"linkViaRedirect":return xc;case"reauthViaPopup":case"reauthViaRedirect":return tt;default:Qe(this.auth,"internal-error")}}resolve(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mc=new Ve(2e3,1e4);function zn(v,f,m){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(v,f,m){const I=ot(v);he(v,f,Zn);const A=Gs(I,m);return new Aa(I,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function ef(v,f,m){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v);he(I.auth,f,Zn);const A=Gs(I.auth,m);return new Aa(I.auth,"reauthViaPopup",f,A,I).executeNotNull()})).apply(this,arguments)}function tf(v,f,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v);he(I.auth,f,Zn);const A=Gs(I.auth,m);return new Aa(I.auth,"linkViaPopup",f,A,I).executeNotNull()})).apply(this,arguments)}let Aa=(()=>{class v extends Xh{constructor(m,I,A,x,Q){super(m,I,x,Q),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const I=yield m.execute();return ee(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,g.Z)(function*(){ce(1===m.filter.length,"Popup operations only handle one event");const I=wo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,A;this.pollId=null!==(A=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Mc.get())};m()}}return v.currentPopupAction=null,v})();const qs=new Map;class Co extends Xh{constructor(f,m,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,g.Z)(function*(){let I=qs.get(m.auth._key());if(!I){try{const x=(yield function Oc(v,f){return ki.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;I=()=>Promise.resolve(x)}catch(A){I=()=>Promise.reject(A)}qs.set(m.auth._key(),I)}return m.bypassAuthState||qs.set(m.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,I=this;return(0,g.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(I,f);if("unknown"!==f.type){if(f.eventId){const A=yield I.auth._redirectUserForId(f.eventId);if(A)return I.user=A,m().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function ki(){return(ki=(0,g.Z)(function*(v,f){const m=hs(f),I=ds(v);if(!(yield I._isAvailable()))return!1;const A="true"===(yield I._get(m));return yield I._remove(m),A})).apply(this,arguments)}function Ks(v,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(v,f){return ds(v)._set(hs(f),"true")})).apply(this,arguments)}function Pc(){qs.clear()}function Fn(v,f){qs.set(v._key(),f)}function ds(v){return K(v._redirectPersistence)}function hs(v){return Ht("pendingRedirect",v.config.apiKey,v.name)}function Ln(v,f,m){return function an(v,f,m){return Zs.apply(this,arguments)}(v,f,m)}function Zs(){return(Zs=(0,g.Z)(function*(v,f,m){const I=ot(v);he(v,f,Zn);const A=Gs(I,m);return yield Ks(A,I),A._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function Gr(v,f,m){return function Wn(v,f,m){return wi.apply(this,arguments)}(v,f,m)}function wi(){return(wi=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v);he(I.auth,f,Zn);const A=Gs(I.auth,m);yield Ks(A,I.auth);const x=yield bo(I);return A._openRedirect(I.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function nf(v,f,m){return function Nm(v,f,m){return ei.apply(this,arguments)}(v,f,m)}function ei(){return(ei=(0,g.Z)(function*(v,f,m){const I=(0,F.m9)(v);he(I.auth,f,Zn);const A=Gs(I.auth,m);yield rs(!1,I,f.providerId),yield Ks(A,I.auth);const x=yield bo(I);return A._openRedirect(I.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function Li(v,f){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(v,f){return yield ot(v)._initializationPromise,ti(v,f,!1)})).apply(this,arguments)}function ti(v,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(v,f,m=!1){const I=ot(v),A=Gs(I,f),Q=yield new Co(I,A,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield I._persistUserIfCurrent(Q.user),yield I._setRedirectUser(null,f)),Q})).apply(this,arguments)}function bo(v){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(v){const f=wo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Sa{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(m=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Mt(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uu(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var I;if(f.error&&!Uu(f)){const A=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError(Re(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const I=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kc(f))}saveEventToCache(f){this.cachedEventUids.add(kc(f)),this.lastProcessedEventTime=Date.now()}}function kc(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Uu({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function ni(v){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(v,f={}){return St(v,"GET","/v1/projects",f)})).apply(this,arguments)}const So=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kw=/^https?/;function zr(){return(zr=(0,g.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield ni(v);for(const m of f)try{if(Om(m))return}catch{}Qe(v,"unauthorized-domain")})).apply(this,arguments)}function Om(v){const f=Se(),{protocol:m,hostname:I}=new URL(f);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===I?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===I}if(!kw.test(m))return!1;if(So.test(v))return I===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(I)}const sf=new Ve(3e4,6e4);function Fc(){const v=Mn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let gn=null;function Vi(v){return gn=gn||function Fw(v){return new Promise((f,m)=>{var I,A,x;function Q(){Fc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Fc(),m(Re(v,"network-request-failed"))},timeout:sf.get()})}if(null!==(A=null===(I=Mn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(x=Mn().gapi)||void 0===x||!x.load){const fe=Ac("iframefcb");return Mn()[fe]=()=>{gapi.load?Q():m(Re(v,"network-request-failed"))},Eo(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Be=>m(Be))}Q()}}).catch(f=>{throw gn=null,f})}(v),gn}const Lc=new Ve(5e3,15e3),Vc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uc(v){const f=v.config;ee(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?Jt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:f.apiKey,appName:v.name,v:R.SDK_VERSION},A=Pm.get(v.config.apiHost);A&&(I.eid=A);const x=v._getFrameworks();return x.length&&(I.fw=x.join(",")),`${m}?${(0,F.xO)(I).slice(1)}`}function Bu(){return Bu=(0,g.Z)(function*(v){const f=yield Vi(v),m=Mn().gapi;return ee(m,v,"internal-error"),f.open({where:document.body,url:Uc(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vc,dontclear:!0},I=>new Promise(function(){var A=(0,g.Z)(function*(x,Q){yield I.restyle({setHideOnLeave:!1});const fe=Re(v,"network-request-failed"),Be=Mn().setTimeout(()=>{Q(fe)},Lc.get());function Ye(){Mn().clearTimeout(Be),x(I)}I.ping(Ye).then(Ye,()=>{Q(fe)})});return function(x,Q){return A.apply(this,arguments)}}()))}),Bu.apply(this,arguments)}const xa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ma{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xo(v,f,m,I,A,x){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:I,v:R.SDK_VERSION,eventId:A};if(f instanceof Zn){f.setDefaultLanguage(v.languageCode),Q.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Be,Ye]of Object.entries(x||{}))Q[Be]=Ye}if(f instanceof yo){const Be=f.getScopes().filter(Ye=>""!==Ye);Be.length>0&&(Q.scopes=Be.join(","))}v.tenantId&&(Q.tid=v.tenantId);const fe=Q;for(const Be of Object.keys(fe))void 0===fe[Be]&&delete fe[Be];return`${function cf({config:v}){return v.emulator?Jt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(fe).slice(1)}`}const Mo="webStorageSupport",$c=class Ra{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=as,this._completeRedirectFn=ti,this._overrideRedirectResult=Fn}_openPopup(f,m,I,A){var x=this;return(0,g.Z)(function*(){var Q;ce(null===(Q=x.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const fe=xo(f,m,I,Se(),A);return function ju(v,f,m,I=500,A=600){const x=Math.max((window.screen.availHeight-A)/2,0).toString(),Q=Math.max((window.screen.availWidth-I)/2,0).toString();let fe="";const Be=Object.assign(Object.assign({},xa),{width:I.toString(),height:A.toString(),top:x,left:Q}),Ye=(0,F.z$)().toLowerCase();m&&(fe=ue(Ye)?"_blank":m),P(Ye)&&(f=f||"http://localhost",Be.scrollbars="yes");const Ct=Object.entries(Be).reduce((ri,[Xs,Gc])=>`${ri}${Xs}=${Gc},`,"");if(function sn(v=(0,F.z$)()){var f;return qe(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ye)&&"_self"!==fe)return function Bi(v,f){const m=document.createElement("a");m.href=v,m.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(f||"",fe),new Ma(null);const un=window.open(f||"",fe,Ct);ee(un,v,"popup-blocked");try{un.focus()}catch{}return new Ma(un)}(f,fe,wo())})()}_openRedirect(f,m,I,A){var x=this;return(0,g.Z)(function*(){return yield x._originValidation(f),function Gh(v){Mn().location.href=v}(xo(f,m,I,Se(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:x}=this.eventManagers[m];return A?Promise.resolve(A):(ce(x,"If manager is not set, promise should be"),x)}const I=this.initAndGetManager(f);return this.eventManagers[m]={promise:I},I.catch(()=>{delete this.eventManagers[m]}),I}initAndGetManager(f){var m=this;return(0,g.Z)(function*(){const I=yield function uf(v){return Bu.apply(this,arguments)}(f),A=new Sa(f);return I.register("authEvent",x=>(ee(x?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=I,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Mo,{type:Mo},A=>{var x;const Q=null===(x=A?.[0])||void 0===x?void 0:x[Mo];void 0!==Q&&m(!!Q),Qe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function rf(v){return zr.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Zt()||V()||qe()}};class jc extends class Hu{constructor(f){this.factorId=f}_process(f,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,I);case"signin":return this._finalizeSignIn(f,m.credential);default:return ne("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new jc(f)}_finalizeEnroll(f,m,I){return function Ec(v,f){return St(v,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(v,f))}(f,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Lu(v,f){return St(v,"POST","/v2/accounts/mfaSignIn:finalize",Rt(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ii=(()=>{class v{constructor(){}static assertion(m){return jc._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var $i="@firebase/auth";class km{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(I=>{var A;f((null===(A=I)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Uw(v){(0,R._registerComponent)(new ye.wA("auth",(f,{options:m})=>{const I=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:x,authDomain:Q}=I.options;return((fe,Be)=>{ee(x&&!x.includes(":"),"invalid-api-key",{appName:fe.name}),ee(!Q?.includes(":"),"argument-error",{appName:fe.name});const Ye={apiKey:x,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:on(v)},Ct=new fo(fe,Be,Ye);return function X(v,f){const m=f?.persistence||[],I=(Array.isArray(m)?m:[m]).map(K);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(I,f?.popupRedirectResolver)}(Ct,m),Ct})(I,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,I)=>{f.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ye.wA("auth-internal",f=>{const m=ot(f.getProvider("auth").getImmediate());return new km(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)($i,"0.20.6",function Vw(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)($i,"0.20.6","esm2017")}("Browser")},2090:(ut,Ae,N)=>{N.d(Ae,{$s:()=>ar,BH:()=>ke,G6:()=>ee,L:()=>ge,LL:()=>Se,Mn:()=>he,Sg:()=>Pe,UG:()=>ie,US:()=>ye,ZB:()=>j,ZR:()=>X,b$:()=>Qe,d:()=>Re,eu:()=>ce,hl:()=>ne,jU:()=>le,m9:()=>kt,ne:()=>ns,pd:()=>rr,r3:()=>Rt,ru:()=>Ze,tV:()=>Oe,uI:()=>ze,vZ:()=>hi,w1:()=>_e,xO:()=>fi,xb:()=>nr,z$:()=>me,zI:()=>W,zd:()=>Ar});const oe=function(G){const L=[];let O=0;for(let U=0;U<G.length;U++){let $=G.charCodeAt(U);$<128?L[O++]=$:$<2048?(L[O++]=$>>6|192,L[O++]=63&$|128):55296==(64512&$)&&U+1<G.length&&56320==(64512&G.charCodeAt(U+1))?($=65536+((1023&$)<<10)+(1023&G.charCodeAt(++U)),L[O++]=$>>18|240,L[O++]=$>>12&63|128,L[O++]=$>>6&63|128,L[O++]=63&$|128):(L[O++]=$>>12|224,L[O++]=$>>6&63|128,L[O++]=63&$|128)}return L},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,L){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let $=0;$<G.length;$+=3){const pe=G[$],Fe=$+1<G.length,lt=Fe?G[$+1]:0,zt=$+2<G.length,Ht=zt?G[$+2]:0;let P=(15&lt)<<2|Ht>>6,V=63&Ht;zt||(V=64,Fe||(P=64)),U.push(O[pe>>2],O[(3&pe)<<4|lt>>4],O[P],O[V])}return U.join("")},encodeString(G,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(G):this.encodeByteArray(oe(G),L)},decodeString(G,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(G):function(G){const L=[];let O=0,U=0;for(;O<G.length;){const $=G[O++];if($<128)L[U++]=String.fromCharCode($);else if($>191&&$<224){const pe=G[O++];L[U++]=String.fromCharCode((31&$)<<6|63&pe)}else if($>239&&$<365){const zt=((7&$)<<18|(63&G[O++])<<12|(63&G[O++])<<6|63&G[O++])-65536;L[U++]=String.fromCharCode(55296+(zt>>10)),L[U++]=String.fromCharCode(56320+(1023&zt))}else{const pe=G[O++],Fe=G[O++];L[U++]=String.fromCharCode((15&$)<<12|(63&pe)<<6|63&Fe)}}return L.join("")}(this.decodeStringToByteArray(G,L))},decodeStringToByteArray(G,L){this.init_();const O=L?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let $=0;$<G.length;){const pe=O[G.charAt($++)],lt=$<G.length?O[G.charAt($)]:0;++$;const Ht=$<G.length?O[G.charAt($)]:64;++$;const Y=$<G.length?O[G.charAt($)]:64;if(++$,null==pe||null==lt||null==Ht||null==Y)throw Error();U.push(pe<<2|lt>>4),64!==Ht&&(U.push(lt<<4&240|Ht>>2),64!==Y&&U.push(Ht<<6&192|Y))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ge=function(G){return function(G){const L=oe(G);return ye.encodeByteArray(L,!0)}(G).replace(/\./g,"")},Oe=function(G){try{return ye.decodeString(G,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(G,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return L}for(const O in L)!L.hasOwnProperty(O)||!Z(O)||(G[O]=j(G[O],L[O]));return G}function Z(G){return"__proto__"!==G}class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,O)=>{this.resolve=L,this.reject=O})}wrapCallback(L){return(O,U)=>{O?this.reject(O):this.resolve(U),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(O):L(O,U))}}}function Pe(G,L){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=L||"demo-project",$=G.iat||0,pe=G.sub||G.user_id;if(!pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:$,exp:$+3600,auth_time:$,sub:pe,user_id:pe,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Fe)),""].join(".")}function me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function ie(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return"object"==typeof self&&self.self===self}function Ze(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return me().indexOf("Electron/")>=0}function _e(){const G=me();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function he(){return me().indexOf("MSAppHost/")>=0}function ee(){return!ie()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ne(){return"object"==typeof indexedDB}function ce(){return new Promise((G,L)=>{try{let O=!0;const U="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(U);$.onsuccess=()=>{$.result.close(),O||self.indexedDB.deleteDatabase(U),G(!0)},$.onupgradeneeded=()=>{O=!1},$.onerror=()=>{var pe;L((null===(pe=$.error)||void 0===pe?void 0:pe.message)||"")}}catch(O){L(O)}})}function W(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class X extends Error{constructor(L,O,U){super(O),this.code=L,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,X.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Se.prototype.create)}}class Se{constructor(L,O,U){this.service=L,this.serviceName=O,this.errors=U}create(L,...O){const U=O[0]||{},$=`${this.service}/${L}`,pe=this.errors[L],Fe=pe?function xe(G,L){return G.replace(it,(O,U)=>{const $=L[U];return null!=$?String($):`<${U}?>`})}(pe,U):"Error";return new X($,`${this.serviceName}: ${Fe} (${$}).`,U)}}const it=/\{\$([^}]+)}/g;function Rt(G,L){return Object.prototype.hasOwnProperty.call(G,L)}function nr(G){for(const L in G)if(Object.prototype.hasOwnProperty.call(G,L))return!1;return!0}function hi(G,L){if(G===L)return!0;const O=Object.keys(G),U=Object.keys(L);for(const $ of O){if(!U.includes($))return!1;const pe=G[$],Fe=L[$];if(yn(pe)&&yn(Fe)){if(!hi(pe,Fe))return!1}else if(pe!==Fe)return!1}for(const $ of U)if(!O.includes($))return!1;return!0}function yn(G){return null!==G&&"object"==typeof G}function fi(G){const L=[];for(const[O,U]of Object.entries(G))Array.isArray(U)?U.forEach($=>{L.push(encodeURIComponent(O)+"="+encodeURIComponent($))}):L.push(encodeURIComponent(O)+"="+encodeURIComponent(U));return L.length?"&"+L.join("&"):""}function Ar(G){const L={};return G.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[$,pe]=U.split("=");L[decodeURIComponent($)]=decodeURIComponent(pe)}}),L}function rr(G){const L=G.indexOf("?");if(!L)return"";const O=G.indexOf("#",L);return G.substring(L,O>0?O:void 0)}function ns(G,L){const O=new We(G,L);return O.subscribe.bind(O)}class We{constructor(L,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{L(this)}).catch(U=>{this.error(U)})}next(L){this.forEachObserver(O=>{O.next(L)})}error(L){this.forEachObserver(O=>{O.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,O,U){let $;if(void 0===L&&void 0===O&&void 0===U)throw new Error("Missing Observer.");$=function Tn(G,L){if("object"!=typeof G||null===G)return!1;for(const O of L)if(O in G&&"function"==typeof G[O])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:O,complete:U},void 0===$.next&&($.next=en),void 0===$.error&&($.error=en),void 0===$.complete&&($.complete=en);const pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch{}}),this.observers.push($),pe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,L)}sendOne(L,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{O(this.observers[L])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}function ar(G,L=1e3,O=2){const U=L*Math.pow(O,G),$=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+$)}function kt(G){return G&&G._delegate?G._delegate:G}},323:(ut,Ae,N)=>{var g=N(4650);let F=null;function R(){return F}const Ce=new g.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Oe(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const H=new g.OlP("Location Initialized");let j=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ke(){return new j((0,g.LFG)(Ce))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ze)},providedIn:"root"}),n})();const le=new g.OlP("appBaseHref");let Ze=(()=>{class n extends ie{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+ze(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+ze(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ge),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qe=(()=>{class n extends ie{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+ze(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+ze(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ge),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=me(Le(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function he(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Le(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Pe,n.stripTrailingSlash=me,n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function _e(){return new Re((0,g.LFG)(ie))}()},providedIn:"root"}),n})();function Le(n){return n.replace(/\/index.html$/,"")}class oa{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new oa(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),Rs(p,o)}});for(let o=0,u=r.length;o<u;o++){const p=r.get(o).context;p.index=o,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Rs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Rs(n,e){n.context.$implicit=e.item}let om=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function la(n){return"server"===n}let kh=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new lm((0,g.LFG)(Ce),window)}),n})();class lm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function pr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ca(this.window.history)||ca(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ca(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vo extends class Bh extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function we(n){F||(F=n)}(new vo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ym(){return Ls=Ls||document.querySelector("base"),Ls?Ls.getAttribute("href"):null}();return null==t?null:function Ri(n){hn=hn||document.createElement("a"),hn.setAttribute("href",n);const e=hn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ec(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let hn,Ls=null;const fn=new g.OlP("TRANSITION_ID"),vm=[{provide:g.ip1,useFactory:function _m(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=R(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[fn,Ce,g.zs3],multi:!0}];let Im=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const yc=new g.OlP("EventManagerPlugins");let _c=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(yc),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Au{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=R().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Su=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Vs=(()=>{class n extends Su{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vc))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function vc(n){R().remove(n)}const wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$h=/%COMP%/g;function xu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?xu(n,o,t):(o=o.replace($h,n),t.push(o))}return t}function Mu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jh=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ni(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Hh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Cm(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=xu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(_c),g.LFG(Vs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ni{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(_a(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_a(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=wc[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=wc[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Mu(r)):this.eventManager.addEventListener(e,t,Mu(r))}}function _a(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Hh extends Ni{constructor(e,t,r,o){super(e),this.component=r;const u=xu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ya(n){return"_ngcontent-%COMP%".replace($h,n)}(o+"-"+r.id),this.hostAttr=function Ec(n){return"_nghost-%COMP%".replace($h,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Cm extends Ni{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=xu(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Us=(()=>{class n extends Au{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const bm=["alt","control","meta","shift"],as={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ru=(()=>{class n extends Au{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),bm.forEach(D=>{const b=r.indexOf(D);b>-1&&(r.splice(b,1),c+=D+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let o=as[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),bm.forEach(c=>{c!==o&&(0,bc[c])(t)&&(u+=c+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ce))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const va=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Am(){vo.makeCurrent()},multi:!0},{provide:Ce,useFactory:function Tc(){return(0,g.RDi)(document),document},deps:[]}]),wa=new g.OlP(""),Ia=[{provide:g.rWj,useClass:class wm{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};o.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Ou=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Bs(){return new g.qLn},deps:[]},{provide:yc,useClass:Us,multi:!0,deps:[Ce,g.R0b,g.Lbi]},{provide:yc,useClass:Ru,multi:!0,deps:[Ce]},{provide:jh,useClass:jh,deps:[_c,Vs,g.AFp]},{provide:g.FYo,useExisting:jh},{provide:Su,useExisting:Vs},{provide:Vs,useClass:Vs,deps:[Ce]},{provide:_c,useClass:_c,deps:[yc,g.R0b]},{provide:class da{},useClass:Im,deps:[]},[]];let Io=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:fn,useExisting:g.AFp},vm]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wa,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Ou,...Ia],imports:[om,g.hGG]}),n})(),us=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ce))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ea(){return new us((0,g.LFG)(Ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Yt=N(8996),vi=N(7669);function et(...n){const e=(0,vi.yG)(n);return(0,Yt.D)(n,e)}var Oi=N(7579);class rn extends Oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const js=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Gn=N(9751);const{isArray:Hs}=Array,{getPrototypeOf:Qh,prototype:Sc,keys:Rm}=Object;function Gs(n){if(1===n.length){const e=n[0];if(Hs(e))return{args:e,keys:null};if(function Jh(n){return n&&"object"==typeof n&&Qh(n)===Sc}(e)){const t=Rm(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zs=N(4671),tt=N(4004);const{isArray:xc}=Array;function Xh(n){return(0,tt.U)(e=>function cs(n,e){return xc(e)?n(...e):n(e)}(n,e))}function Mc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var zn=N(5403),Rc=N(9672);function ef(...n){const e=(0,vi.yG)(n),t=(0,vi.jO)(n),{args:r,keys:o}=Gs(n);if(0===r.length)return(0,Yt.D)([],e);const u=new Gn.y(function Nc(n,e,t=zs.y){return r=>{tf(e,()=>{const{length:o}=n,u=new Array(o);let c=o,p=o;for(let _=0;_<o;_++)tf(e,()=>{const D=(0,Yt.D)(n[_],e);let b=!1;D.subscribe((0,zn.x)(r,T=>{u[_]=T,b||(b=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,o?c=>Mc(o,c):zs.y));return t?u.pipe(Xh(t)):u}function tf(n,e,t){n?(0,Rc.f)(t,n,e):e()}var Ws=N(8189);function Do(...n){return function Aa(){return(0,Ws.J)(1)}()((0,Yt.D)(n,(0,vi.yG)(n)))}var qs=N(8421);function Co(n){return new Gn.y(e=>{(0,qs.Xf)(n()).subscribe(e)})}var Oc=N(9635),ki=N(576);function Ks(n,e){const t=(0,ki.m)(n)?n:()=>n,r=o=>o.error(t());return new Gn.y(e?o=>e.schedule(r,0,o):r)}var Fi=N(515),Pc=N(727),Fn=N(4482);function ds(){return(0,Fn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hs extends Gn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Fn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pc.w0.EMPTY)}return e}refCount(){return ds()(this)}}function Ln(n,e){return(0,Fn.e)((t,r)=>{let o=null,u=0,c=!1;const p=()=>c&&!o&&r.complete();t.subscribe((0,zn.x)(r,_=>{o?.unsubscribe();let D=0;const b=u++;(0,qs.Xf)(n(_,b)).subscribe(o=(0,zn.x)(r,T=>r.next(e?e(_,T,b,D++):T),()=>{o=null,p()}))},()=>{c=!0,p()}))})}function an(n){return n<=0?()=>Fi.E:(0,Fn.e)((e,t)=>{let r=0;e.subscribe((0,zn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Zs(...n){const e=(0,vi.yG)(n);return(0,Fn.e)((t,r)=>{(e?Do(n,t,e):Do(n,t)).subscribe(r)})}function Gr(n,e){return(0,Fn.e)((t,r)=>{let o=0;t.subscribe((0,zn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Wn=N(5577);function wi(n){return(0,Fn.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function nf(n=Nm){return(0,Fn.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Nm(){return new js}function ei(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gr((o,u)=>n(o,u,r)):zs.y,an(1),t?wi(e):nf(()=>new js))}function Li(n,e){return(0,ki.m)(e)?(0,Wn.z)(n,e,1):(0,Wn.z)(n,1)}function pn(n,e,t){const r=(0,ki.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Fn.e)((o,u)=>{var c;null===(c=r.subscribe)||void 0===c||c.call(r);let p=!0;o.subscribe((0,zn.x)(u,_=>{var D;null===(D=r.next)||void 0===D||D.call(r,_),u.next(_)},()=>{var _;p=!1,null===(_=r.complete)||void 0===_||_.call(r),u.complete()},_=>{var D;p=!1,null===(D=r.error)||void 0===D||D.call(r,_),u.error(_)},()=>{var _,D;p&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):zs.y}function ti(n){return(0,Fn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,c=>{u=(0,qs.Xf)(n(c,ti(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Ys(n,e,t,r,o){return(u,c)=>{let p=t,_=e,D=0;u.subscribe((0,zn.x)(c,b=>{const T=D++;_=p?n(_,b,T):(p=!0,b),r&&c.next(_)},o&&(()=>{p&&c.next(_),c.complete()})))}}function bo(n,e){return(0,Fn.e)(Ys(n,e,arguments.length>=2,!0))}function To(n){return n<=0?()=>Fi.E:(0,Fn.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Ao(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gr((o,u)=>n(o,u,r)):zs.y,To(1),t?wi(e):nf(()=>new js))}function Uu(n){return(0,Fn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary",ni=Symbol("RouteTitle");class Qs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function So(n){return new Qs(n)}function kw(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))o[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function zr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Om(n[o],e[o]))return!1;return!0}function Om(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function sf(n){return Array.prototype.concat.apply([],n)}function Fc(n){return n.length>0?n[n.length-1]:null}function gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vi(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Yt.D)(Promise.resolve(n)):et(n)}const Lw={exact:function uf(n,e,t){if(!Bi(n.segments,e.segments)||!Ui(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!uf(n.children[r],e.children[r],t))return!1;return!0},subset:xa},Vc={exact:function Uc(n,e){return zr(n,e)},subset:function Bu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Om(n[t],e[t]))},ignored:()=>!0};function Pm(n,e,t){return Lw[t.paths](n.root,e.root,t.matrixParams)&&Vc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xa(n,e,t){return $u(n,e,e.segments,t)}function $u(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Bi(o,t)||e.hasChildren()||!Ui(o,t,r))}if(n.segments.length===t.length){if(!Bi(n.segments,t)||!Ui(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!xa(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Bi(n.segments,o)&&Ui(n.segments,o,r)&&n.children[Mt])&&$u(n.children[Mt],e,u,r)}}function Ui(n,e,t){return e.every((r,o)=>Vc[t](n[o].parameters,r.parameters))}class Js{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=So(this.queryParams)),this._queryParamMap}toString(){return cf.serialize(this)}}class Nt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,gn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mo(this)}}class Ma{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=So(this.parameters)),this._parameterMap}toString(){return km(this)}}function Bi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new xo},providedIn:"root"}),n})();class xo{parse(e){const t=new x(e);return new Js(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ra(e.root,!0)}`,r=function Uw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Hu(t)}=${Hu(o)}`).join("&"):`${Hu(t)}=${Hu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jc(n){return encodeURI(n)}(e.fragment)}`:""}`}}const cf=new xo;function Mo(n){return n.segments.map(e=>km(e)).join("/")}function Ra(n,e){if(!n.hasChildren())return Mo(n);if(e){const t=n.children[Mt]?Ra(n.children[Mt],!1):"",r=[];return gn(n.children,(o,u)=>{u!==Mt&&r.push(`${u}:${Ra(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function lf(n,e){let t=[];return gn(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),gn(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[Ra(n.children[Mt],!1)]:[`${o}:${Ra(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${Mo(n)}/${t[0]}`:`${Mo(n)}/(${t.join("//")})`}}function $c(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hu(n){return $c(n).replace(/%3B/gi,";")}function Ii(n){return $c(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $i(n){return decodeURIComponent(n)}function Hc(n){return $i(n.replace(/\+/g,"%20"))}function km(n){return`${Ii(n.path)}${function Vw(n){return Object.keys(n).map(e=>`;${Ii(e)}=${Ii(n[e])}`).join("")}(n.parameters)}`}const qC=/^[^\/()?;=#]+/;function v(n){const e=n.match(qC);return e?e[0]:""}const f=/^[^=?&#]+/,I=/^[^&#]+/;class x{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new Nt(e,t)),r}parseSegment(){const e=v(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new Ma($i(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=v(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=v(this.remaining);o&&(r=o,this.capture(r))}e[$i(t)]=$i(r)}parseQueryParam(e){const t=function m(n){const e=n.match(f);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function A(n){const e=n.match(I);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Hc(t),u=Hc(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=v(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Mt]:new Nt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function Q(n){return n.segments.length>0?new Nt([],{[Mt]:n}):n}function fe(n){const e={};for(const r of Object.keys(n.children)){const u=fe(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Be(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new Nt(n.segments.concat(e.segments),e.children)}return n}(new Nt(n.segments,e))}function Ye(n){return n instanceof Js}function Gc(n,e,t,r,o){if(0===t.length)return Hi(e.root,e.root,e.root,r,o);const u=function df(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zc(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return gn(u.outlets,(_,D)=>{p[D]="string"==typeof _?_.split("/"):_}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new zc(t,e,r)}(t);return u.toRoot()?Hi(e.root,e.root,new Nt([],{}),r,o):function c(_){const D=function hf(n,e,t,r){if(n.isAbsolute)return new fs(e.root,!0,0);if(-1===r)return new fs(t,t===e.root,0);return function ff(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new fs(r,!1,o-u)}(t,r+(Na(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),b=D.processChildren?Ro(D.segmentGroup,D.index,u.commands):Gu(D.segmentGroup,D.index,u.commands);return Hi(e.root,D.segmentGroup,b,r,o)}(n.snapshot?._lastPathIndex)}function Na(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ji(n){return"object"==typeof n&&null!=n&&n.outlets}function Hi(n,e,t,r,o){let c,u={};r&&gn(r,(_,D)=>{u[D]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),c=n===e?t:Oa(n,e,t);const p=Q(fe(c));return new Js(p,u,o)}function Oa(n,e,t){const r={};return gn(n.children,(o,u)=>{r[u]=o===e?t:Oa(o,e,t)}),new Nt(n.segments,r)}class zc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Na(r[0]))throw new g.vHH(4003,!1);const o=r.find(ji);if(o&&o!==Fc(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fs{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gu(n,e,t){if(n||(n=new Nt([],{})),0===n.segments.length&&n.hasChildren())return Ro(n,e,t);const r=function KC(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],p=t[r];if(ji(p))break;const _=`${p}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!Bw(_,D,c))return u;r+=2}else{if(!Bw(_,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Nt(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new Nt(n.segments.slice(r.pathIndex),n.children),Ro(u,0,o)}return r.match&&0===o.length?new Nt(n.segments,{}):r.match&&!n.hasChildren()?Kc(n,e,t):r.match?Ro(n,0,o):Kc(n,e,t)}function Ro(n,e,t){if(0===t.length)return new Nt(n.segments,{});{const r=function qc(n){return ji(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return gn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Gu(n.children[c],e,u))}),gn(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Nt(n.segments,o)}}function Kc(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(ji(u)){const _=ZC(u.outlets);return new Nt(r,_)}if(0===o&&Na(t[0])){r.push(new Ma(n.segments[e].path,Rn(t[0]))),o++;continue}const c=ji(u)?u.outlets[Mt]:`${u}`,p=o<t.length-1?t[o+1]:null;c&&p&&Na(p)?(r.push(new Ma(c,Rn(p))),o+=2):(r.push(new Ma(c,{})),o++)}return new Nt(r,{})}function ZC(n){const e={};return gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Kc(new Nt([],{}),0,t))}),e}function Rn(n){const e={};return gn(n,(t,r)=>e[r]=`${t}`),e}function Bw(n,e,t){return n==t.path&&zr(e,t.parameters)}class eo{constructor(e,t){this.id=e,this.url=t}}class Zc extends eo{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class No extends eo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pf extends eo{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $w extends eo{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class YC extends eo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QC extends eo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JC extends eo{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class OM extends eo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PM extends eo{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yc{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fm{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ww(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ww(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Vm(e,this._root).map(t=>t.value)}}function Ww(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ww(n,t);if(r)return r}return null}function Vm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vm(n,t);if(r.length)return r.unshift(e),r}return[]}class Gi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Pa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Um extends gf{constructor(e,t){super(e),this.snapshot=t,to(this,e)}toString(){return this.snapshot.toString()}}function Oo(n,e){const t=function eb(n,e){const c=new zu([],{},{},"",{},Mt,e,null,n.root,-1,{});return new Jc("",new Gi(c,[]))}(n,e),r=new rn([new Ma("",{})]),o=new rn({}),u=new rn({}),c=new rn({}),p=new rn(""),_=new ps(r,o,c,p,u,Mt,e,t.root);return _.snapshot=t.root,new Um(new Gi(_,[]),t)}class ps{constructor(e,t,r,o,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,tt.U)(D=>D[ni]))??et(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(e=>So(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(e=>So(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function tb(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zu{constructor(e,t,r,o,u,c,p,_,D,b,T,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.[ni],this.routeConfig=_,this._urlSegment=D,this._lastPathIndex=b,this._correctedLastPathIndex=k??b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=So(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=So(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jc extends gf{constructor(e,t){super(t),this.url=e,to(this,t)}toString(){return Bm(this._root)}}function to(n,e){e.value._routerState=n,e.children.forEach(t=>to(n,t))}function Bm(n){const e=n.children.length>0?` { ${n.children.map(Bm).join(", ")} } `:"";return`${n.value}${e}`}function Xc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zr(e.params,t.params)||n.params.next(t.params),function rf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function $m(n,e){const t=zr(n.params,e.params)&&function ju(n,e){return Bi(n,e)&&n.every((t,r)=>zr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$m(n.parent,e.parent))}function Wu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function qu(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Wu(n,r,o);return Wu(n,r)})}(n,e,t);return new Gi(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Wu(n,p)),c}}const r=function rb(n){return new ps(new rn(n.url),new rn(n.params),new rn(n.queryParams),new rn(n.fragment),new rn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Wu(n,u));return new Gi(r,o)}}const jm="ngNavigationCancelingError";function qw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ye(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Kw(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Kw(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[jm]=!0,r.cancellationCode=e,t&&(r.url=t),r}function mf(n){return Zw(n)&&Ye(n.url)}function Zw(n){return n&&n[jm]}class Yw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ed,this.attachRef=null}}let ed=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Yw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const td=!1;let Qw=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,td);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,td);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,td);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,td);this._activatedRoute=t;const o=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new ib(t,p,o.injector);if(r&&function nd(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(c);this.activated=o.createComponent(D,o.length,_)}else this.activated=o.createComponent(c,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ed),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ib{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ps?this.route:e===ed?this.childContexts:this.parent.get(e,t)}}let Hm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Qw],encapsulation:2}),n})();function ka(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _f(n){const e=n.children&&n.children.map(_f),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=Hm),t}function Wr(n){return n.outlet||Mt}function Xw(n,e){const t=n.filter(r=>Wr(r)===e);return t.push(...n.filter(r=>Wr(r)!==e)),t}function rd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class FM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Pa(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),gn(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Pa(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Pa(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Pa(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new XC(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Hw(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Xc(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Xc(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=rd(o.snapshot),_=p?.get(g._Vd)??null;c.attachRef=null,c.route=o,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(o,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class ub{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ku{constructor(e,t){this.component=e,this.route=t}}function LM(n,e,t){const r=n._root;return vf(r,e?e._root:null,t,[r.value])}function id(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function vf(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Pa(e);return n.children.forEach(c=>{(function UM(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function lb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bi(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$m(n,e)||!zr(n.queryParams,e.queryParams);default:return!$m(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new ub(r)):(u.data=c.data,u._resolvedData=c._resolvedData),vf(n,e,u.component?p?p.children:null:t,r,o),_&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new Ku(p.outlet.component,c))}else c&&Zu(e,p,o),o.canActivateChecks.push(new ub(r)),vf(n,null,u.component?p?p.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),gn(u,(c,p)=>Zu(c,t.getContext(p),o)),o}function Zu(n,e,t){const r=Pa(n),o=n.value;gn(r,(u,c)=>{Zu(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ku(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Fa(n){return"function"==typeof n}function Km(n){return n instanceof js||"EmptyError"===n?.name}const If=Symbol("INITIAL_VALUE");function La(){return Ln(n=>ef(n.map(e=>e.pipe(an(1),Zs(If)))).pipe((0,tt.U)(e=>{for(const t of e)if(!0!==t){if(t===If)return If;if(!1===t||t instanceof Js)return t}return!0}),Gr(e=>e!==If),an(1)))}function s0(n){return(0,Oc.z)(pn(e=>{if(Ye(e))throw qw(0,e)}),(0,tt.U)(e=>!0===e))}const ur={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ef(n,e,t,r,o){const u=Df(n,e,t);return u.matched?function vb(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?et(o.map(c=>{const p=id(c,n);return Vi(function qm(n){return n&&Fa(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(La(),s0()):et(!0)}(r=ka(e,r),e,t).pipe((0,tt.U)(c=>!0===c?u:{...ur})):et(u)}function Df(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ur}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||kw)(t,n,e);if(!o)return{...ur};const u={};gn(o.posParams,(p,_)=>{u[_]=p.path});const c=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:c,positionalParamSegments:o.posParams??{}}}function Yu(n,e,t,r,o="corrected"){if(t.length>0&&function Ym(n,e,t){return t.some(r=>Cf(n,e,r)&&Wr(r)!==Mt)}(n,t,r)){const c=new Nt(e,function sd(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Wr(u)!==Mt){const c=new Nt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[Wr(u)]=c}return o}(n,e,r,new Nt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function wb(n,e,t){return t.some(r=>Cf(n,e,r))}(n,t,r)){const c=new Nt(n.segments,function gr(n,e,t,r,o,u){const c={};for(const p of r)if(Cf(n,t,p)&&!o[Wr(p)]){const _=new Nt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Wr(p)]=_}return{...o,...c}}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Nt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Cf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qm(n,e,t,r){return!!(Wr(n)===r||r!==Mt&&Cf(e,t,n))&&("**"===n.path||Df(e,n,t).matched)}function o0(n,e,t){return 0===e.length&&!n.children[t]}const od=!1;class bf{constructor(e){this.segmentGroup=e||null}}class Jm{constructor(e){this.urlTree=e}}function ad(n){return Ks(new bf(n))}function a0(n){return Ks(new Jm(n))}class Qu{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Yu(this.urlTree.root,[],[],this.config).segmentGroup,t=new Nt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Mt).pipe((0,tt.U)(u=>this.createUrlTree(fe(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ti(u=>{if(u instanceof Jm)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof bf?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Mt).pipe((0,tt.U)(o=>this.createUrlTree(fe(o),e.queryParams,e.fragment))).pipe(ti(o=>{throw o instanceof bf?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,od)}createUrlTree(e,t,r){const o=Q(e);return new Js(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,tt.U)(u=>new Nt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Yt.D)(o).pipe(Li(u=>{const c=r.children[u],p=Xw(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,tt.U)(_=>({segment:_,outlet:u})))}),bo((u,c)=>(u[c.outlet]=c.segment,u),{}),Ao())}expandSegment(e,t,r,o,u,c){return(0,Yt.D)(r).pipe(Li(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,c).pipe(ti(D=>{if(D instanceof bf)return et(null);throw D}))),ei(p=>!!p),ti((p,_)=>{if(Km(p))return o0(t,o,u)?et(new Nt([],{})):ad(t);throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,c,p){return Qm(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):ad(t):ad(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?a0(u):this.lineralizeSegments(r,u).pipe((0,Wn.z)(c=>{const p=new Nt(c,{});return this.expandSegment(e,p,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:p,consumedSegments:_,remainingSegments:D,positionalParamSegments:b}=Df(t,o,u);if(!p)return ad(t);const T=this.applyRedirectCommands(_,o.redirectTo,b);return o.redirectTo.startsWith("/")?a0(T):this.lineralizeSegments(o,T).pipe((0,Wn.z)(k=>this.expandSegment(e,t,r,k.concat(D),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=ka(r,e),r.loadChildren?(r._loadedRoutes?et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,tt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Nt(o,{})))):et(new Nt(o,{}))):Ef(t,r,o,e).pipe(Ln(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Wn.z)(b=>{const T=b.injector??e,k=b.routes,{segmentGroup:z,slicedSegments:te}=Yu(t,p,_,k),De=new Nt(z.segments,z.children);if(0===te.length&&De.hasChildren())return this.expandChildren(T,k,De).pipe((0,tt.U)(Et=>new Nt(p,Et)));if(0===k.length&&0===te.length)return et(new Nt(p,{}));const Me=Wr(r)===u;return this.expandSegment(T,De,k,te,Me?Mt:u,!0).pipe((0,tt.U)(_t=>new Nt(p.concat(_t.segments),_t.children)))})):ad(t)))}getChildConfig(e,t,r){return t.children?et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?et({routes:t._loadedRoutes,injector:t._loadedInjector}):function r0(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?et(!0):et(o.map(c=>{const p=id(c,n);return Vi(function t0(n){return n&&Fa(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(La(),s0())}(e,t,r).pipe((0,Wn.z)(o=>o?this.configLoader.loadChildren(e,t).pipe(pn(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Eb(n){return Ks(Kw(od,3))}())):et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return et(r);if(o.numberOfChildren>1||!o.children[Mt])return Ks(new g.vHH(4e3,od));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Js(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return gn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return gn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,o)}),new Nt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,od);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Cb{}class u0{constructor(e,t,r,o,u,c,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=Yu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe((0,tt.U)(t=>{if(null===t)return null;const r=new zu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Gi(r,t),u=new Jc(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Qc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Yt.D)(Object.keys(r.children)).pipe(Li(o=>{const u=r.children[o],c=Xw(t,o);return this.processSegmentGroup(e,c,u,o)}),bo((o,u)=>o&&u?(o.push(...u),o):null),function Sa(n,e=!1){return(0,Fn.e)((t,r)=>{let o=0;t.subscribe((0,zn.x)(r,u=>{const c=n(u,o++);(c||e)&&r.next(u),!c&&r.complete()}))})}(o=>null!==o),wi(null),Ao(),(0,tt.U)(o=>{if(null===o)return null;const u=Af(o);return function jM(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Yt.D)(t).pipe(Li(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,o,u)),ei(c=>!!c),ti(c=>{if(Km(c))return o0(r,o,u)?et([]):et(null);throw c}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Qm(t,r,o,u))return et(null);let c;if("**"===t.path){const p=o.length>0?Fc(o).parameters:{},_=l0(r)+o.length;c=et({snapshot:new zu(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c0(t),Wr(t),t.component??t._loadedComponent??null,t,ey(r),_,d0(t),_),consumedSegments:[],remainingSegments:[]})}else c=Ef(r,t,o,e).pipe((0,tt.U)(({matched:p,consumedSegments:_,remainingSegments:D,parameters:b})=>{if(!p)return null;const T=l0(r)+_.length;return{snapshot:new zu(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,c0(t),Wr(t),t.component??t._loadedComponent??null,t,ey(r),T,d0(t),T),consumedSegments:_,remainingSegments:D}}));return c.pipe(Ln(p=>{if(null===p)return et(null);const{snapshot:_,consumedSegments:D,remainingSegments:b}=p;e=t._injector??e;const T=t._loadedInjector??e,k=function gs(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:te}=Yu(r,D,b,k.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===te.length&&z.hasChildren())return this.processChildren(T,k,z).pipe((0,tt.U)(Me=>null===Me?null:[new Gi(_,Me)]));if(0===k.length&&0===te.length)return et([new Gi(_,[])]);const De=Wr(t)===u;return this.processSegment(T,k,z,te,De?Mt:u).pipe((0,tt.U)(Me=>null===Me?null:[new Gi(_,Me)]))}))}}function Xm(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Af(n){const e=[],t=new Set;for(const r of n){if(!Xm(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Af(r.children);e.push(new Gi(r.value,o))}return e.filter(r=>!t.has(r))}function ey(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function l0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function c0(n){return n.data||{}}function d0(n){return n.resolve||{}}function iy(n){return"string"==typeof n.title||null===n.title}function sy(n){return Ln(e=>{const t=n(e);return t?(0,Yt.D)(t).pipe((0,tt.U)(()=>e)):et(e)})}let Sf=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[ni]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(f0)},providedIn:"root"}),n})(),f0=(()=>{class n extends Sf{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(us))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tb{}class Sb extends class Ab{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ud=new g.OlP("",{providedIn:"root",factory:()=>({})}),Mf=new g.OlP("ROUTES");let ld=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Vi(t.loadComponent()).pipe(pn(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Uu(()=>{this.componentLoaders.delete(t)})),o=new hs(r,()=>new Oi.x).pipe(ds());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,tt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D,b=!1;Array.isArray(p)?D=p:(_=p.create(t).injector,D=sf(_.get(Mf,[],g.XFs.Self|g.XFs.Optional)));return{routes:D.map(_f),injector:_}}),Uu(()=>{this.childrenLoaders.delete(r)})),c=new hs(u,()=>new Oi.x).pipe(ds());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Vi(t()).pipe((0,Wn.z)(r=>r instanceof g.YKP||Array.isArray(r)?et(r):(0,Yt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Mb{}class Rb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function p0(n){throw n}function Va(n,e,t){return e.parse("/")}const g0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ob(){const n=(0,g.f3M)(Bc),e=(0,g.f3M)(ed),t=(0,g.f3M)(Re),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Mf,{optional:!0})??[],c=(0,g.f3M)(ud,{optional:!0})??{},p=(0,g.f3M)(f0),_=(0,g.f3M)(Sf,{optional:!0}),D=(0,g.f3M)(Mb,{optional:!0}),b=(0,g.f3M)(Tb,{optional:!0}),T=new Nn(null,n,e,t,r,o,sf(u));return D&&(T.urlHandlingStrategy=D),b&&(T.routeReuseStrategy=b),T.titleStrategy=_??p,function Nb(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,T),T}let Nn=(()=>{class n{constructor(t,r,o,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oi.x,this.errorHandler=p0,this.malformedUriErrorHandler=Va,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>et(void 0),this.urlHandlingStrategy=new Rb,this.routeReuseStrategy=new Sb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(ld),this.configLoader.onLoadEndListener=k=>this.triggerEvent(new Fm(k)),this.configLoader.onLoadStartListener=k=>this.triggerEvent(new Yc(k)),this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const T=c.get(g.R0b);this.isNgZoneEnabled=T instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function af(){return new Js(new Nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Oo(this.currentUrlTree,this.rootComponentType),this.transitions=new rn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gr(o=>0!==o.id),(0,tt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ln(o=>{let u=!1,c=!1;return et(o).pipe(pn(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ln(p=>{const _=this.browserUrlTree.toString(),D=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return oy(p.source)&&(this.browserUrlTree=p.extractedUrl),et(p).pipe(Ln(T=>{const k=this.transitions.getValue();return r.next(new Zc(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),k!==this.transitions.getValue()?Fi.E:Promise.resolve(T)}),function no(n,e,t,r){return Ln(o=>function Db(n,e,t,r,o){return new Qu(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,tt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),pn(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},o.urlAfterRedirects=T.urlAfterRedirects}),function ty(n,e,t,r,o,u){return(0,Wn.z)(c=>function $M(n,e,t,r,o,u,c="emptyOnly",p="legacy"){return new u0(n,e,t,r,o,c,p,u).recognize().pipe(Ln(_=>null===_?function BM(n){return new Gn.y(e=>e.error(n))}(new Cb):et(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,o,u).pipe((0,tt.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),pn(T=>{if(o.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(z,T)}this.browserUrlTree=T.urlAfterRedirects}const k=new YC(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(k)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:z,source:te,restoredState:De,extras:Me}=p,gt=new Zc(k,this.serializeUrl(z),te,De);r.next(gt);const _t=Oo(z,this.rootComponentType).snapshot;return et(o={...p,targetSnapshot:_t,urlAfterRedirects:z,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Fi.E}),pn(p=>{const _=new QC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,tt.U)(p=>o={...p,guards:LM(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function hb(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?et({...t,guardsResult:!0}):function fb(n,e,t,r){return(0,Yt.D)(n).pipe((0,Wn.z)(o=>function _b(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(p=>{const _=rd(e)??o,D=id(p,_);return Vi(function cb(n){return n&&Fa(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(ei())})).pipe(La()):et(!0)}(o.component,o.route,t,e,r)),ei(o=>!0!==o,!0))}(c,r,o,n).pipe((0,Wn.z)(p=>p&&function e0(n){return"boolean"==typeof n}(p)?function pb(n,e,t,r){return(0,Yt.D)(e).pipe(Li(o=>Do(function Zm(n,e){return null!==n&&e&&e(new jw(n)),et(!0)}(o.route.parent,r),function gb(n,e){return null!==n&&e&&e(new Gw(n)),et(!0)}(o.route,r),function yb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function VM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Co(()=>et(c.guards.map(_=>{const D=rd(c.node)??t,b=id(_,D);return Vi(function Wm(n){return n&&Fa(n.canActivateChild)}(b)?b.canActivateChild(r,n):D.runInContext(()=>b(r,n))).pipe(ei())})).pipe(La())));return et(u).pipe(La())}(n,o.path,t),function mb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const o=r.map(u=>Co(()=>{const c=rd(e)??t,p=id(u,c);return Vi(function n0(n){return n&&Fa(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(ei())}));return et(o).pipe(La())}(n,o.route,t))),ei(o=>!0!==o,!0))}(r,u,n,e):et(p)),(0,tt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),pn(p=>{if(o.guardsResult=p.guardsResult,Ye(p.guardsResult))throw qw(0,p.guardsResult);const _=new JC(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Gr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),sy(p=>{if(p.guards.canActivateChecks.length)return et(p).pipe(pn(_=>{const D=new OM(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(D)}),Ln(_=>{let D=!1;return et(_).pipe(function ny(n,e){return(0,Wn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return et(t);let u=0;return(0,Yt.D)(o).pipe(Li(c=>function h0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!iy(o)&&(u[ni]=o.title),function HM(n,e,t,r){const o=function Xu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return et({});const u={};return(0,Yt.D)(o).pipe((0,Wn.z)(c=>function ry(n,e,t,r){const o=rd(e)??r,u=id(n,o);return Vi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(ei(),pn(p=>{u[c]=p}))),To(1),function kc(n){return(0,tt.U)(()=>n)}(u),ti(c=>Km(c)?Fi.E:Ks(c)))}(u,n,e,r).pipe((0,tt.U)(c=>(n._resolvedData=c,n.data=Qc(n,t).resolve,o&&iy(o)&&(n.data[ni]=o.title),null)))}(c.route,r,n,e)),pn(()=>u++),To(1),(0,Wn.z)(c=>u===o.length?et(t):Fi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),pn({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),pn(_=>{const D=new PM(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(D)}))}),sy(p=>{const _=D=>{const b=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(D.routeConfig).pipe(pn(T=>{D.component=T}),(0,tt.U)(()=>{})));for(const T of D.children)b.push(..._(T));return b};return ef(_(p.targetSnapshot.root)).pipe(wi(),an(1))}),sy(()=>this.afterPreactivation()),(0,tt.U)(p=>{const _=function nb(n,e,t){const r=Wu(n,e._root,t?t._root:void 0);return new Um(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return o={...p,targetRouterState:_}}),pn(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,tt.U)(r=>(new FM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),pn({next(){u=!0},complete(){u=!0}}),Uu(()=>{u||c||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ti(p=>{if(c=!0,Zw(p)){mf(p)||(this.navigated=!0,this.restoreHistory(o,!0));const _=new pf(o.id,this.serializeUrl(o.extractedUrl),p.message,p.cancellationCode);if(r.next(_),mf(p)){const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),b={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oy(o.source)};this.scheduleNavigation(D,"imperative",null,b,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const _=new $w(o.id,this.serializeUrl(o.extractedUrl),p,o.targetSnapshot??void 0);r.next(_);try{o.resolve(this.errorHandler(p))}catch(D){o.reject(D)}}return Fi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(_f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,D=o||this.routerState.root,b=_?this.currentUrlTree.fragment:c;let T=null;switch(p){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),Gc(D,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ye(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Pb(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...g0}:!1===r?{...m0}:r,Ye(t))return Pm(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Pm(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new No(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){if(this.disposed)return Promise.resolve(!1);let p,_,D;c?(p=c.resolve,_=c.reject,D=c.promise):D=new Promise((k,z)=>{p=k,_=z});const b=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),T=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:b,targetPageId:T,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(k=>Promise.reject(k))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new pf(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Ob()},providedIn:"root"}),n})();function oy(n){return"imperative"!==n}let dd=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Oi.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Nn),g.Y36(ps),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class hd{}let ly=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Gr(t=>t instanceof No),Li(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,Yt.D)(o).pipe((0,Ws.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):et(null);const u=o.pipe((0,Wn.z)(c=>null===c?et(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Yt.D)([u,c]).pipe((0,Ws.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Nn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(hd),g.LFG(ld))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Nf=new g.OlP("");let Of=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof No&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Lm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Lm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function el(n,e){return{\u0275kind:n,\u0275providers:e}}function dy(n){return[{provide:Mf,multi:!0,useValue:n}]}function Pf(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Nn),o=n.get(hy);1===n.get(_0)&&r.initialNavigation(),n.get(I0,null,g.XFs.Optional)?.setUpPreloading(),n.get(Nf,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const hy=new g.OlP("",{factory:()=>new Oi.x}),_0=new g.OlP("",{providedIn:"root",factory:()=>1});const I0=new g.OlP("");function Vb(n){return el(0,[{provide:I0,useExisting:ly},{provide:hd,useExisting:n}])}const E0=new g.OlP("ROUTER_FORROOT_GUARD"),Bb=[Re,{provide:Bc,useClass:xo},{provide:Nn,useFactory:Ob},ed,{provide:ps,useFactory:function cy(n){return n.routerState.root},deps:[Nn]},ld];function $b(){return new g.PXZ("Router",Nn)}let D0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Bb,[],dy(t),{provide:E0,useFactory:Gb,deps:[[Nn,new g.FiY,new g.tp0]]},{provide:ud,useValue:r||{}},r?.useHash?{provide:ie,useClass:Qe}:{provide:ie,useClass:Ze},{provide:Nf,useFactory:()=>{const n=(0,g.f3M)(Nn),e=(0,g.f3M)(kh),t=(0,g.f3M)(ud);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Of(n,e,t)}},r?.preloadingStrategy?Vb(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:$b},r?.initialNavigation?Tt(r):[],[{provide:fy,useFactory:Pf},{provide:g.tb,multi:!0,useExisting:fy}]]}}static forChild(t){return{ngModule:n,providers:[dy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(E0,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Hm]}),n})();function Gb(n){return"guarded"}function Tt(n){return["disabled"===n.initialNavigation?el(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Nn);return()=>{e.setUpLocationChangeListener()}}},{provide:_0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?el(2,[{provide:_0,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(H,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Nn),p=e.get(hy);(function o(u){e.get(Nn).events.pipe(Gr(p=>p instanceof No||p instanceof pf||p instanceof $w),(0,tt.U)(p=>p instanceof No||p instanceof pf&&(0===p.code||1===p.code)&&null),Gr(p=>null!==p),an(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||p.closed?et(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const fy=new g.OlP("");let T0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),ko=(()=>{class n extends T0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const ys=new g.OlP("NgValueAccessor"),qb={provide:ys,useExisting:(0,g.Gpc)(()=>tl),multi:!0},x0=new g.OlP("CompositionEventMode");let tl=(()=>{class n extends T0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WM(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(x0,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([qb]),g.qOj]}),n})();function Fo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Ff(n){return null!=n&&"number"==typeof n.length}const Yn=new g.OlP("NgValidators"),Lo=new g.OlP("NgAsyncValidators"),qM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kb{static min(e){return function Zb(n){return e=>{if(Fo(e.value)||Fo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function M0(n){return e=>{if(Fo(e.value)||Fo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function py(n){return Fo(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Yb(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function R0(n){return Fo(n.value)||qM.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Ba(n){return e=>Fo(e.value)||!Ff(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function N0(n){return e=>Ff(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function gy(n){if(!n)return $a;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fo(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return L0(e)}static composeAsync(e){return V0(e)}}function $a(n){return null}function O0(n){return null!=n}function my(n){return(0,g.QGY)(n)?(0,Yt.D)(n):n}function P0(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function k0(n,e){return e.map(t=>t(n))}function F0(n){return n.map(e=>function Qb(n){return!n.validate}(e)?e:t=>e.validate(t))}function L0(n){if(!n)return null;const e=n.filter(O0);return 0==e.length?null:function(t){return P0(k0(t,e))}}function Lf(n){return null!=n?L0(F0(n)):null}function V0(n){if(!n)return null;const e=n.filter(O0);return 0==e.length?null:function(t){return function Wb(...n){const e=(0,vi.jO)(n),{args:t,keys:r}=Gs(n),o=new Gn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,D=c;for(let b=0;b<c;b++){let T=!1;(0,qs.Xf)(t[b]).subscribe((0,zn.x)(u,k=>{T||(T=!0,D--),p[b]=k},()=>_--,void 0,()=>{(!_||!T)&&(D||u.next(r?Mc(r,p):p),u.complete())}))}});return e?o.pipe(Xh(e)):o}(k0(t,e).map(my)).pipe((0,tt.U)(P0))}}function Vf(n){return null!=n?V0(F0(n)):null}function yy(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Uf(n){return n._rawValidators}function Jb(n){return n._rawAsyncValidators}function fd(n){return n?Array.isArray(n)?n:[n]:[]}function Bf(n,e){return Array.isArray(n)?n.includes(e):n===e}function Xb(n,e){const t=fd(e);return fd(n).forEach(o=>{Bf(t,o)||t.push(o)}),t}function ja(n,e){return fd(e).filter(t=>!Bf(n,t))}class _y{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Lf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Vf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class mr extends _y{get formDirective(){return null}get path(){return null}}class zi extends _y{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ei{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pd=(()=>{class n extends Ei{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(zi,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),Wi=(()=>{class n extends Ei{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(mr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const yd="VALID",Ey="INVALID",Ha="PENDING",nl="DISABLED";function Dy(n){return(Cy(n)?n.validators:n)||null}function $f(n){return Array.isArray(n)?Lf(n):n||null}function q0(n,e){return(Cy(e)?e.asyncValidators:n)||null}function iT(n){return Array.isArray(n)?Vf(n):n||null}function Cy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function sT(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")}function oT(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})}class by{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$f(this._rawValidators),this._composedAsyncValidatorFn=iT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yd}get invalid(){return this.status===Ey}get pending(){return this.status==Ha}get disabled(){return this.status===nl}get enabled(){return this.status!==nl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$f(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=iT(e)}addValidators(e){this.setValidators(Xb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ja(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ja(e,this._rawAsyncValidators))}hasValidator(e){return Bf(this._rawValidators,e)}hasAsyncValidator(e){return Bf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ha,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yd||this.status===Ha)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nl:yd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ha,this._hasOwnPendingAsyncValidator=!0;const t=my(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?nl:this.errors?Ey:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ha)?Ha:this._anyControlsHaveStatus(Ey)?Ey:yd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class jf extends by{constructor(e,t,r){super(Dy(t),q0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){oT(this,0,e),Object.keys(e).forEach(r=>{sT(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class aT extends jf{}function _d(n,e){wd(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Vo(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Y0(n,e)})}(n,e),function uT(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Z0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Y0(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function K0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Hf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function il(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wd(n,e){const t=Uf(n);null!==e.validator?n.setValidators(yy(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jb(n);null!==e.asyncValidator?n.setAsyncValidators(yy(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();il(e._rawValidators,o),il(e._rawAsyncValidators,o)}function Hf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Uf(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Jb(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(c=>c!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return il(e._rawValidators,r),il(e._rawAsyncValidators,r),t}function Y0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function X0(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Kf=class extends by{constructor(e=null,t,r){super(Dy(t),q0(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=X0(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){X0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Yf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),oI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Qf=new g.OlP("NgModelWithFormControlWarning"),My={provide:mr,useExisting:(0,g.Gpc)(()=>Id)};let Id=(()=>{class n extends mr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Hf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return _d(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){vd(t.control||null,t,!1),function J0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function sl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(vd(r||null,t),(n=>n instanceof Kf)(o)&&(_d(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ty(n,e){wd(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function lT(n,e){return Hf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wd(this.form,this),this._oldForm&&Hf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Yn,10),g.Y36(Lo,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([My]),g.qOj,g.TTD]}),n})();const vT={provide:zi,useExisting:(0,g.Gpc)(()=>ol)};let ol=(()=>{class n extends zi{constructor(t,r,o,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Ay(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===tl?t=u:function zf(n){return Object.getPrototypeOf(n.constructor)===ko}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Uo(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function rl(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(mr,13),g.Y36(Yn,10),g.Y36(Lo,10),g.Y36(ys,10),g.Y36(Qf,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([vT]),g.qOj,g.TTD]}),n})(),AT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[oI]}),n})(),np=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Qf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[AT]}),n})();class mI extends by{constructor(e,t,r){super(Dy(t),q0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){oT(this,0,e),e.forEach((r,o)=>{sT(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function _I(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let vI=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return _I(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new jf(o,u)}record(t,r=null){const o=this._reduceControls(t);return new aT(o,r)}control(t,r,o){let u={};return this.useNonNullable?(_I(r)?u=r:(u.validators=r,u.asyncValidators=o),new Kf(t,{...u,nonNullable:!0})):new Kf(t,r,o)}array(t,r,o){const u=t.map(c=>this._createControl(c));return new mI(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Kf||t instanceof by?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:np}),n})();class rp extends Pc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const _s={setInterval(n,e,...t){const{delegate:r}=_s;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=_s;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var uR=N(8737);class ul extends rp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return _s.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;_s.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(u){r=!0,o=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,uR.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Ly={now:()=>(Ly.delegate||Date).now(),delegate:void 0};class Td{constructor(e,t=Td.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Td.now=Ly.now;class ip extends Td{constructor(e,t=Td.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const wI=new ip(ul);var Ot=N(9681);(0,Ot.registerVersion)("firebase","9.9.4","app");var q=N(5861),He=N(2090),ii=N(4859),_r=N(1877),Ki=N(8766);const Ka="@firebase/installations",$o="0.5.12",Ya=`w:${$o}`,Qa="FIS_v2",vs=new He.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Vy(n){return n instanceof He.ZR&&n.code.includes("request-failed")}function sp({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Uy(n){return{token:n.token,requestStatus:2,expiresIn:xT(n.expiresIn),creationTime:Date.now()}}function op(n,e){return ap.apply(this,arguments)}function ap(){return(ap=(0,q.Z)(function*(n,e){const r=(yield e.json()).error;return vs.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function CI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function bI(n,{refreshToken:e}){const t=CI(n);return t.append("Authorization",function $y(n){return`${Qa} ${n}`}(e)),t}function up(n){return By.apply(this,arguments)}function By(){return(By=(0,q.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function xT(n){return Number(n.replace("s","000"))}function jy(n,e){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=sp(n),o=CI(n),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const p={method:"POST",headers:o,body:JSON.stringify({fid:t,authVersion:Qa,appId:n.appId,sdkVersion:Ya})},_=yield up(()=>fetch(r,p));if(_.ok){const D=yield _.json();return{fid:D.fid||t,registrationStatus:2,refreshToken:D.refreshToken,authToken:Uy(D.authToken)}}throw yield op("Create Installation",_)})).apply(this,arguments)}function Ad(n){return new Promise(e=>{setTimeout(e,n)})}const Gy=/^[cdef][\w-]{21}$/;function Wy(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function qy(n){return function lp(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Gy.test(t)?t:""}catch{return""}}function Ja(n){return`${n.appName}!${n.appId}`}const dl=new Map;function cp(n,e){const t=Ja(n);dp(t,e),function SI(n,e){const t=function Ky(){return!Xa&&"BroadcastChannel"in self&&(Xa=new BroadcastChannel("[Firebase] FID Change"),Xa.onmessage=n=>{dp(n.data.key,n.data.fid)}),Xa}();t&&t.postMessage({key:n,fid:e}),function Zy(){0===dl.size&&Xa&&(Xa.close(),Xa=null)}()}(t,e)}function dp(n,e){const t=dl.get(n);if(t)for(const r of t)r(e)}let Xa=null;const eu="firebase-installations-store";let Yy=null;function Qy(){return Yy||(Yy=(0,Ki.X3)("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(eu)}})),Yy}function Sd(n,e){return hl.apply(this,arguments)}function hl(){return(hl=(0,q.Z)(function*(n,e){const t=Ja(n),o=(yield Qy()).transaction(eu,"readwrite"),u=o.objectStore(eu),c=yield u.get(t);return yield u.put(e,t),yield o.done,(!c||c.fid!==e.fid)&&cp(n,e.fid),e})).apply(this,arguments)}function hp(n){return fp.apply(this,arguments)}function fp(){return(fp=(0,q.Z)(function*(n){const e=Ja(n),r=(yield Qy()).transaction(eu,"readwrite");yield r.objectStore(eu).delete(e),yield r.done})).apply(this,arguments)}function fl(n,e){return pp.apply(this,arguments)}function pp(){return(pp=(0,q.Z)(function*(n,e){const t=Ja(n),o=(yield Qy()).transaction(eu,"readwrite"),u=o.objectStore(eu),c=yield u.get(t),p=e(c);return void 0===p?yield u.delete(t):yield u.put(p,t),yield o.done,p&&(!c||c.fid!==p.fid)&&cp(n,p.fid),p})).apply(this,arguments)}function gp(n){return mp.apply(this,arguments)}function mp(){return(mp=(0,q.Z)(function*(n){let e;const t=yield fl(n.appConfig,r=>{const o=MI(r),u=RI(n,o);return e=u.registrationPromise,u.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function MI(n){return Vn(n||{fid:Wy(),registrationStatus:0})}function RI(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(vs.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function lR(n,e){return Jy.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:RT(n)}:{installationEntry:e}}function Jy(){return(Jy=(0,q.Z)(function*(n,e){try{const t=yield jy(n,e);return Sd(n.appConfig,t)}catch(t){throw Vy(t)&&409===t.customData.serverCode?yield hp(n.appConfig):yield Sd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function RT(n){return yp.apply(this,arguments)}function yp(){return(yp=(0,q.Z)(function*(n){let e=yield NI(n.appConfig);for(;1===e.registrationStatus;)yield Ad(100),e=yield NI(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield gp(n);return r||t}return e})).apply(this,arguments)}function NI(n){return fl(n,e=>{if(!e)throw vs.create("installation-not-found");return Vn(e)})}function Vn(n){return function OI(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function NT(n,e){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,q.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=PI(n,t),o=bI(n,t),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const p={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:Ya,appId:n.appId}})},_=yield up(()=>fetch(r,p));if(_.ok)return Uy(yield _.json());throw yield op("Generate Auth Token",_)})).apply(this,arguments)}function PI(n,{fid:e}){return`${sp(n)}/${e}/authTokens:generate`}function e_(n){return _p.apply(this,arguments)}function _p(){return(_p=(0,q.Z)(function*(n,e=!1){let t;const r=yield fl(n.appConfig,u=>{if(!LI(u))throw vs.create("not-registered");const c=u.authToken;if(!e&&VI(c))return u;if(1===c.requestStatus)return t=kI(n,e),u;{if(!navigator.onLine)throw vs.create("app-offline");const p=UI(u);return t=OT(n,p),p}});return t?yield t:r.authToken})).apply(this,arguments)}function kI(n,e){return jo.apply(this,arguments)}function jo(){return(jo=(0,q.Z)(function*(n,e){let t=yield FI(n.appConfig);for(;1===t.authToken.requestStatus;)yield Ad(100),t=yield FI(n.appConfig);const r=t.authToken;return 0===r.requestStatus?e_(n,e):r})).apply(this,arguments)}function FI(n){return fl(n,e=>{if(!LI(e))throw vs.create("not-registered");return function t_(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function OT(n,e){return vp.apply(this,arguments)}function vp(){return(vp=(0,q.Z)(function*(n,e){try{const t=yield NT(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Sd(n.appConfig,r),t}catch(t){if(!Vy(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Sd(n.appConfig,r)}else yield hp(n.appConfig);throw t}})).apply(this,arguments)}function LI(n){return void 0!==n&&2===n.registrationStatus}function VI(n){return 2===n.requestStatus&&!function cR(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function UI(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function n_(){return(n_=(0,q.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield gp(e);return r?r.catch(console.error):e_(e).catch(console.error),t.fid})).apply(this,arguments)}function Ci(){return(Ci=(0,q.Z)(function*(n,e=!1){const t=n;return yield Zi(t),(yield e_(t,e)).token})).apply(this,arguments)}function Zi(n){return si.apply(this,arguments)}function si(){return(si=(0,q.Z)(function*(n){const{registrationPromise:e}=yield gp(n);e&&(yield e)})).apply(this,arguments)}function i_(n){return vs.create("missing-app-config-values",{valueName:n})}const s_="installations",jI=n=>{const e=n.getProvider("app").getImmediate(),t=function xd(n){if(!n||!n.options)throw i_("App Configuration");if(!n.name)throw i_("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw i_(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Ot._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},HI=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Ot._getProvider)(e,s_).getImmediate();return{getId:()=>function ws(n){return n_.apply(this,arguments)}(t),getToken:o=>function PT(n){return Ci.apply(this,arguments)}(t,o)}};(function Ip(){(0,Ot._registerComponent)(new ii.wA(s_,jI,"PUBLIC")),(0,Ot._registerComponent)(new ii.wA("installations-internal",HI,"PRIVATE"))})(),(0,Ot.registerVersion)(Ka,$o),(0,Ot.registerVersion)(Ka,$o,"esm2017");const o_="@firebase/remote-config",Mr=new He.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jT{constructor(e,t,r,o){this.client=e,this.storage=t,this.storageCache=r,this.logger=o}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,o=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${o}.`),o}fetch(e){var t=this;return(0,q.Z)(function*(){const[r,o]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(o&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return o;e.eTag=o&&o.eTag;const u=yield t.client.fetch(e),c=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&c.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(c),u})()}}function HT(n=navigator){return n.languages&&n.languages[0]||n.language}class GT{constructor(e,t,r,o,u,c){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=o,this.apiKey=u,this.appId=c}fetch(e){var t=this;return(0,q.Z)(function*(){var r,o,u;const[c,p]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),D=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,b={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},T={sdk_version:t.sdkVersion,app_instance_id:c,app_instance_id_token:p,app_id:t.appId,language_code:HT()},k={method:"POST",headers:b,body:JSON.stringify(T)},z=fetch(D,k),te=new Promise((ft,mt)=>{e.signal.addEventListener(()=>{const Vt=new Error("The operation was aborted.");Vt.name="AbortError",mt(Vt)})});let De;try{yield Promise.race([z,te]),De=yield z}catch(ft){let mt="fetch-client-network";throw"AbortError"===(null===(r=ft)||void 0===r?void 0:r.name)&&(mt="fetch-timeout"),Mr.create(mt,{originalErrorMessage:null===(o=ft)||void 0===o?void 0:o.message})}let Me=De.status;const gt=De.headers.get("ETag")||void 0;let _t,Et;if(200===De.status){let ft;try{ft=yield De.json()}catch(mt){throw Mr.create("fetch-client-parse",{originalErrorMessage:null===(u=mt)||void 0===u?void 0:u.message})}_t=ft.entries,Et=ft.state}if("INSTANCE_STATE_UNSPECIFIED"===Et?Me=500:"NO_CHANGE"===Et?Me=304:("NO_TEMPLATE"===Et||"EMPTY_CONFIG"===Et)&&(_t={}),304!==Me&&200!==Me)throw Mr.create("fetch-status",{httpStatus:Me});return{status:Me,eTag:gt,config:_t}})()}}class qT{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,q.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var o=this;return(0,q.Z)(function*(){yield function zT(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(Mr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield o.client.fetch(e);return yield o.storage.deleteThrottleMetadata(),u}catch(u){if(!function WT(n){if(!(n instanceof He.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const c={throttleEndTimeMillis:Date.now()+(0,He.$s)(r),backoffCount:r+1};return yield o.storage.setThrottleMetadata(c),o.attemptFetch(e,c)}})()}}class QI{constructor(e,t,r,o,u){this.app=e,this._client=t,this._storageCache=r,this._storage=o,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Md(n,e){var t;const r=n.target.error||void 0;return Mr.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const Ho="app_namespace_store";class tE{constructor(e,t,r,o=function eE(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=o=>{e(Md(o,"storage-open"))},r.onsuccess=o=>{n(o.target.result)},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Ho,{keyPath:"compositeKey"})}}catch(r){e(Mr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=o}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{var c;const _=r.transaction([Ho],"readonly").objectStore(Ho),D=t.createCompositeKey(e);try{const b=_.get(D);b.onerror=T=>{u(Md(T,"storage-get"))},b.onsuccess=T=>{const k=T.target.result;o(k?k.value:void 0)}}catch(b){u(Mr.create("storage-get",{originalErrorMessage:null===(c=b)||void 0===c?void 0:c.message}))}})})()}set(e,t){var r=this;return(0,q.Z)(function*(){const o=yield r.openDbPromise;return new Promise((u,c)=>{var p;const D=o.transaction([Ho],"readwrite").objectStore(Ho),b=r.createCompositeKey(e);try{const T=D.put({compositeKey:b,value:t});T.onerror=k=>{c(Md(k,"storage-set"))},T.onsuccess=()=>{u()}}catch(T){c(Mr.create("storage-set",{originalErrorMessage:null===(p=T)||void 0===p?void 0:p.message}))}})})()}delete(e){var t=this;return(0,q.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{var c;const _=r.transaction([Ho],"readwrite").objectStore(Ho),D=t.createCompositeKey(e);try{const b=_.delete(D);b.onerror=T=>{u(Md(T,"storage-delete"))},b.onsuccess=()=>{o()}}catch(b){u(Mr.create("storage-delete",{originalErrorMessage:null===(c=b)||void 0===c?void 0:c.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class nE{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,q.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),o=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const c=yield r;c&&(e.lastSuccessfulFetchTimestampMillis=c);const p=yield o;p&&(e.activeConfig=p)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function KT(){return Go.apply(this,arguments)}function Go(){return(Go=(0,q.Z)(function*(){if(!(0,He.hl)())return!1;try{return yield(0,He.eu)()}catch{return!1}})).apply(this,arguments)}!function rE(){(0,Ot._registerComponent)(new ii.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mr.create("registration-window");if(!(0,He.hl)())throw Mr.create("indexed-db-unavailable");const{projectId:u,apiKey:c,appId:p}=r.options;if(!u)throw Mr.create("registration-project-id");if(!c)throw Mr.create("registration-api-key");if(!p)throw Mr.create("registration-app-id");const _=new tE(p,r.name,t=t||"firebase"),D=new nE(_),b=new _r.Yd(o_);b.logLevel=_r.in.ERROR;const T=new GT(o,Ot.SDK_VERSION,t,u,c,p),k=new qT(T,_),z=new jT(k,_,D,b),te=new QI(r,z,D,_,b);return function UT(n){const e=(0,He.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(te),te},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)(o_,"0.3.11"),(0,Ot.registerVersion)(o_,"0.3.11","esm2017")}();const _R="/firebase-messaging-sw.js",f_="/firebase-cloud-messaging-push-scope",ZT="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",p_="google.c.a.c_id",vR="google.c.a.c_l",ht="google.c.a.ts",YT="google.c.a.e";var gl=(()=>{return(n=gl||(gl={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",gl;var n})();function qr(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function QT(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),o=new Uint8Array(r.length);for(let u=0;u<r.length;++u)o[u]=r.charCodeAt(u);return o}const ml="fcm_token_details_db",In="fcm_token_object_Store";function IR(n){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,q.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(ml))return null;let e=null;return(yield(0,Ki.X3)(ml,5,{upgrade:(r=(0,q.Z)(function*(o,u,c,p){var _;if(u<2||!o.objectStoreNames.contains(In))return;const D=p.objectStore(In),b=yield D.index("fcmSenderId").get(n);if(yield D.clear(),b)if(2===u){const T=b;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(_=T.createTime)&&void 0!==_?_:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:qr(T.vapidKey)}}}else if(3===u){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:qr(T.auth),p256dh:qr(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:qr(T.vapidKey)}}}else if(4===u){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:qr(T.auth),p256dh:qr(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:qr(T.vapidKey)}}}}),function(u,c,p,_){return r.apply(this,arguments)})})).close(),yield(0,Ki.Lj)(ml),yield(0,Ki.Lj)("fcm_vapid_details_db"),yield(0,Ki.Lj)("undefined"),sE(e)?e:null;var r}),Tp.apply(this,arguments)}function sE(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const zo="firebase-messaging-store";let Ap=null;function Sp(){return Ap||(Ap=(0,Ki.X3)("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(zo)}})),Ap}function aE(n){return g_.apply(this,arguments)}function g_(){return(g_=(0,q.Z)(function*(n){const e=__(n),r=yield(yield Sp()).transaction(zo).objectStore(zo).get(e);if(r)return r;{const o=yield IR(n.appConfig.senderId);if(o)return yield m_(n,o),o}})).apply(this,arguments)}function m_(n,e){return tu.apply(this,arguments)}function tu(){return(tu=(0,q.Z)(function*(n,e){const t=__(n),o=(yield Sp()).transaction(zo,"readwrite");return yield o.objectStore(zo).put(e,t),yield o.done,e})).apply(this,arguments)}function XT(n){return y_.apply(this,arguments)}function y_(){return(y_=(0,q.Z)(function*(n){const e=__(n),r=(yield Sp()).transaction(zo,"readwrite");yield r.objectStore(zo).delete(e),yield r.done})).apply(this,arguments)}function __({appConfig:n}){return n.appId}const Qn=new He.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uE(n,e){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,q.Z)(function*(n,e){var t;const r=yield I_(n),o=E_(e),u={method:"POST",headers:r,body:JSON.stringify(o)};let c;try{c=yield(yield fetch(w_(n.appConfig),u)).json()}catch(p){throw Qn.create("token-subscribe-failed",{errorInfo:null===(t=p)||void 0===t?void 0:t.toString()})}if(c.error)throw Qn.create("token-subscribe-failed",{errorInfo:c.error.message});if(!c.token)throw Qn.create("token-subscribe-no-token");return c.token})).apply(this,arguments)}function eA(n,e){return nu.apply(this,arguments)}function nu(){return(nu=(0,q.Z)(function*(n,e){var t;const r=yield I_(n),o=E_(e.subscriptionOptions),u={method:"PATCH",headers:r,body:JSON.stringify(o)};let c;try{c=yield(yield fetch(`${w_(n.appConfig)}/${e.token}`,u)).json()}catch(p){throw Qn.create("token-update-failed",{errorInfo:null===(t=p)||void 0===t?void 0:t.toString()})}if(c.error)throw Qn.create("token-update-failed",{errorInfo:c.error.message});if(!c.token)throw Qn.create("token-update-no-token");return c.token})).apply(this,arguments)}function yl(n,e){return v_.apply(this,arguments)}function v_(){return(v_=(0,q.Z)(function*(n,e){var t;const o={method:"DELETE",headers:yield I_(n)};try{const c=yield(yield fetch(`${w_(n.appConfig)}/${e}`,o)).json();if(c.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:c.error.message})}catch(u){throw Qn.create("token-unsubscribe-failed",{errorInfo:null===(t=u)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function w_({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function I_(n){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,q.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function E_({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const o={web:{endpoint:t,auth:e,p256dh:n}};return r!==ZT&&(o.web.applicationPubKey=r),o}const lE=6048e5;function tA(n){return Np.apply(this,arguments)}function Np(){return(Np=(0,q.Z)(function*(n){const e=yield fE(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:qr(e.getKey("auth")),p256dh:qr(e.getKey("p256dh"))},r=yield aE(n.firebaseDependencies);if(r){if(rA(r.subscriptionOptions,t))return Date.now()>=r.createTime+lE?ER(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield yl(n.firebaseDependencies,r.token)}catch(o){console.warn(o)}return nA(n.firebaseDependencies,t)}return nA(n.firebaseDependencies,t)})).apply(this,arguments)}function cE(n){return D_.apply(this,arguments)}function D_(){return(D_=(0,q.Z)(function*(n){const e=yield aE(n.firebaseDependencies);e&&(yield yl(n.firebaseDependencies,e.token),yield XT(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function ER(n,e){return dE.apply(this,arguments)}function dE(){return(dE=(0,q.Z)(function*(n,e){try{const t=yield eA(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield m_(n.firebaseDependencies,r),t}catch(t){throw yield cE(n),t}})).apply(this,arguments)}function nA(n,e){return hE.apply(this,arguments)}function hE(){return(hE=(0,q.Z)(function*(n,e){const r={token:yield uE(n,e),createTime:Date.now(),subscriptionOptions:e};return yield m_(n,r),r.token})).apply(this,arguments)}function fE(n,e){return _l.apply(this,arguments)}function _l(){return(_l=(0,q.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:QT(e)})})).apply(this,arguments)}function rA(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function pE(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function gE(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const o=e.notification.image;o&&(n.notification.image=o)}(e,n),function Rd(n,e){!e.data||(n.data=e.data)}(e,n),function iA(n,e){var t,r,o,u,c;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const p=null!==(o=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(u=e.notification)||void 0===u?void 0:u.click_action;p&&(n.fcmOptions.link=p);const _=null===(c=e.fcmOptions)||void 0===c?void 0:c.analytics_label;_&&(n.fcmOptions.analyticsLabel=_)}(e,n),e}function sA(n){return"object"==typeof n&&!!n&&p_ in n}function mE(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function C_(n){return Qn.create("missing-app-config-values",{valueName:n})}mE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mE("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yE{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=function oA(n){if(!n||!n.options)throw C_("App Configuration Object");if(!n.name)throw C_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw C_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:o,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function _E(n){return b_.apply(this,arguments)}function b_(){return(b_=(0,q.Z)(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(_R,{scope:f_}),n.swRegistration.update().catch(()=>{})}catch(t){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function vl(n,e){return T_.apply(this,arguments)}function T_(){return(T_=(0,q.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield _E(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function vE(n,e){return A_.apply(this,arguments)}function A_(){return(A_=(0,q.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=ZT)})).apply(this,arguments)}function x_(){return(x_=(0,q.Z)(function*(n,e){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield vE(n,e?.vapidKey),yield vl(n,e?.serviceWorkerRegistration),tA(n)})).apply(this,arguments)}function wE(n,e,t){return M_.apply(this,arguments)}function M_(){return(M_=(0,q.Z)(function*(n,e,t){const r=R_(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[p_],message_name:t[vR],message_time:t[ht],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function R_(n){switch(n){case gl.NOTIFICATION_CLICKED:return"notification_open";case gl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Op(){return(Op=(0,q.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===gl.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(pE(t)):n.onMessageHandler.next(pE(t)));const r=t.data;sA(r)&&"1"===r[YT]&&(yield wE(n,t.messageType,r))})).apply(this,arguments)}const N_="@firebase/messaging",uA=n=>{const e=new yE(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function aA(n,e){return Op.apply(this,arguments)}(e,t)),e},lA=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function S_(n,e){return x_.apply(this,arguments)}(e,r)}};function EE(){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,q.Z)(function*(){try{yield(0,He.eu)()}catch{return!1}return typeof window<"u"&&(0,He.hl)()&&(0,He.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function O_(){(0,Ot._registerComponent)(new ii.wA("messaging",uA,"PUBLIC")),(0,Ot._registerComponent)(new ii.wA("messaging-internal",lA,"PRIVATE")),(0,Ot.registerVersion)(N_,"0.9.16"),(0,Ot.registerVersion)(N_,"0.9.16","esm2017")}();const Nd="analytics",DE="firebase_id",CE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bE="https://www.googletagmanager.com/gtag/js",lr=new _r.Yd("@firebase/analytics");function TE(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function F_(n,e){const t=document.createElement("script");t.src=`${bE}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function AE(n,e,t,r,o,u){return Od.apply(this,arguments)}function Od(){return(Od=(0,q.Z)(function*(n,e,t,r,o,u){const c=r[o];try{if(c)yield e[c];else{const _=(yield TE(t)).find(D=>D.measurementId===o);_&&(yield e[_.appId])}}catch(p){lr.error(p)}n("config",o,u)})).apply(this,arguments)}function pA(n,e,t,r,o){return V_.apply(this,arguments)}function V_(){return(V_=(0,q.Z)(function*(n,e,t,r,o){try{let u=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const p=yield TE(t);for(const _ of c){const D=p.find(T=>T.measurementId===_),b=D&&e[D.appId];if(!b){u=[];break}u.push(b)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,o||{})}catch(u){lr.error(u)}})).apply(this,arguments)}function SE(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(bE))return e;return null}const Kr=new He.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),kp=new class xE{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function yA(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function B_(n){return $_.apply(this,arguments)}function $_(){return($_=(0,q.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:yA(r)},u=CE.replace("{app-id}",t),c=yield fetch(u,o);if(200!==c.status&&304!==c.status){let p="";try{const _=yield c.json();null!==(e=_.error)&&void 0!==e&&e.message&&(p=_.error.message)}catch{}throw Kr.create("config-fetch-failed",{httpStatus:c.status,responseMessage:p})}return c.json()})).apply(this,arguments)}function ME(n){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,q.Z)(function*(n,e=kp,t){const{appId:r,apiKey:o,measurementId:u}=n.options;if(!r)throw Kr.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:r};throw Kr.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new _A;return setTimeout((0,q.Z)(function*(){p.abort()}),void 0!==t?t:6e4),j_({appId:r,apiKey:o,measurementId:u},c,p,e)})).apply(this,arguments)}function j_(n,e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,q.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=kp){var u,c;const{appId:p,measurementId:_}=n;try{yield RE(r,e)}catch(D){if(_)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_} provided in the "measurementId" field in the local Firebase config. [${null===(u=D)||void 0===u?void 0:u.message}]`),{appId:p,measurementId:_};throw D}try{const D=yield B_(n);return o.deleteThrottleMetadata(p),D}catch(D){const b=D;if(!NE(b)){if(o.deleteThrottleMetadata(p),_)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_} provided in the "measurementId" field in the local Firebase config. [${b?.message}]`),{appId:p,measurementId:_};throw D}const T=503===Number(null===(c=b?.customData)||void 0===c?void 0:c.httpStatus)?(0,He.$s)(t,o.intervalMillis,30):(0,He.$s)(t,o.intervalMillis),k={throttleEndTimeMillis:Date.now()+T,backoffCount:t+1};return o.setThrottleMetadata(p,k),lr.debug(`Calling attemptFetch again in ${T} millis`),j_(n,k,r,o)}})).apply(this,arguments)}function RE(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(Kr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function NE(n){if(!(n instanceof He.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class _A{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let H_,q_;function G_(){return(G_=(0,q.Z)(function*(n,e,t,r,o){if(o&&o.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}})).apply(this,arguments)}function LE(n){q_=n}function VE(n){H_=n}function IA(){return K_.apply(this,arguments)}function K_(){return(K_=(0,q.Z)(function*(){var n;if(!(0,He.hl)())return lr.warn(Kr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,He.eu)()}catch(e){return lr.warn(Kr.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function Z_(){return(Z_=(0,q.Z)(function*(n,e,t,r,o,u,c){var p;const _=ME(n);_.then(z=>{t[z.measurementId]=z.appId,n.options.measurementId&&z.measurementId!==n.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${z.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(z=>lr.error(z)),e.push(_);const D=IA().then(z=>{if(z)return r.getId()}),[b,T]=yield Promise.all([_,D]);SE()||F_(u,b.measurementId),q_&&(o("consent","default",q_),LE(void 0)),o("js",new Date);const k=null!==(p=c?.config)&&void 0!==p?p:{};return k.origin="firebase",k.update=!0,null!=T&&(k[DE]=T),o("config",b.measurementId,k),H_&&(o("set",H_),VE(void 0)),b.measurementId})).apply(this,arguments)}class DA{constructor(e){this.app=e}_delete(){return delete so[this.app.options.appId],Promise.resolve()}}let so={},UE=[];const BE={};let Q_,Is,Wo="dataLayer",Lp=!1;function TA(n,e,t){!function bA(){const n=[];if((0,He.ru)()&&n.push("This is a browser extension environment."),(0,He.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Kr.create("invalid-analytics-context",{errorInfo:e});lr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Kr.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Kr.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=so[r])throw Kr.create("already-exists",{id:r});if(!Lp){!function L_(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Wo);const{wrappedGtag:u,gtagCore:c}=function gA(n,e,t,r,o){let u=function(...c){window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(u=window[o]),window[o]=function U_(n,e,t,r){function u(){return(u=(0,q.Z)(function*(c,p,_){try{"event"===c?yield pA(n,e,t,p,_):"config"===c?yield AE(n,e,t,r,p,_):"consent"===c?n("consent","update",_):n("set",p)}catch(D){lr.error(D)}})).apply(this,arguments)}return function o(c,p,_){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[o]}}(so,UE,BE,Wo,"gtag");Is=u,Q_=c,Lp=!0}return so[r]=function EA(n,e,t,r,o,u,c){return Z_.apply(this,arguments)}(n,UE,BE,e,Q_,Wo,t),new DA(n)}function SA(){return J_.apply(this,arguments)}function J_(){return(J_=(0,q.Z)(function*(){if((0,He.ru)()||!(0,He.zI)()||!(0,He.hl)())return!1;try{return yield(0,He.eu)()}catch{return!1}})).apply(this,arguments)}const Up="@firebase/analytics";!function xA(){(0,Ot._registerComponent)(new ii.wA(Nd,(e,{options:t})=>TA(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Ot._registerComponent)(new ii.wA("analytics-internal",function n(e){try{const t=e.getProvider(Nd).getImmediate();return{logEvent:(r,o,u)=>function Es(n,e,t,r){n=(0,He.m9)(n),function vA(n,e,t,r,o){return G_.apply(this,arguments)}(Is,so[n.app.options.appId],e,t,r).catch(o=>lr.error(o))}(t,r,o,u)}}catch(t){throw Kr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Ot.registerVersion)(Up,"0.8.0"),(0,Ot.registerVersion)(Up,"0.8.0","esm2017")}();const Bp=new class RA extends ip{}(class MA extends ul{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}});var kd=N(9468),El=N(5363);const $p=new g.GfV("7.4.1"),jp="__angularfire_symbol__analyticsIsSupportedValue",Fd="__angularfire_symbol__analyticsIsSupported",Hp="__angularfire_symbol__remoteConfigIsSupportedValue",ev="__angularfire_symbol__remoteConfigIsSupported",tv="__angularfire_symbol__messagingIsSupportedValue",jE="__angularfire_symbol__messagingIsSupported";globalThis[Fd]||(globalThis[Fd]=SA().then(n=>globalThis[jp]=n).catch(()=>globalThis[jp]=!1)),globalThis[jE]||(globalThis[jE]=EE().then(n=>globalThis[tv]=n).catch(()=>globalThis[tv]=!1)),globalThis[ev]||(globalThis[ev]=KT().then(n=>globalThis[Hp]=n).catch(()=>globalThis[Hp]=!1));const nv=(n,e)=>{const t=e?[e]:(0,Ot.getApps)(),r=[];return t.forEach(o=>{o.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r};function Dl(){}class zE{constructor(e,t=Bp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const o=this.zone;return this.delegate.schedule(function(c){o.runGuarded(()=>{e.apply(this,[c])})},t,r)}}class OA{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dl,{},Dl,Dl)),t.pipe(pn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ud=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new zE(Zone.current)),this.insideAngular=t.run(()=>new zE(Zone.current,wI)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oo(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function WE(n){return oo().ngZone.runOutsideAngular(()=>n())}function ru(n){return oo().ngZone.run(()=>n())}function oi(n){return oo(),function qE(n){return function(t){return(t=t.lift(new OA(n.ngZone))).pipe((0,kd.R)(n.outsideAngular),(0,El.Q)(n.insideAngular))}}(oo())(n)}const KE=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ru(()=>n.apply(void 0,r))},ZE=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=ru(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dl,{},Dl,Dl)))),r[u]=KE(r[u],t));const o=WE(()=>n.apply(this,r));if(!e){if(o instanceof Gn.y){const u=oo();return o.pipe((0,kd.R)(u.outsideAngular),(0,El.Q)(u.insideAngular))}return ru(()=>o)}return o instanceof Gn.y?o.pipe(oi):o instanceof Promise?ru(()=>new Promise((u,c)=>o.then(p=>ru(()=>u(p)),p=>ru(()=>c(p))))):"function"==typeof o&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),o.apply(this,arguments)}:ru(()=>o)};function Gp(){return(0,Fn.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Rr(n,e){return n===e}var Je,vr=N(2011),LA=(N(5881),N(3942)),PR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={},zp=zp||{},yt=PR||self;function Wp(){}function Bd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var rv="closure_uid_"+(1e9*Math.random()>>>0),VA=0;function UA(n,e,t){return n.call.apply(n.bind,arguments)}function iv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Jn(n,e,t){return(Jn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UA:iv).apply(null,arguments)}function jd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Un(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[o].apply(r,c)}}function Ds(){this.s=this.s,this.o=this.o}var QE={};Ds.prototype.s=!1,Ds.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function YE(n){return Object.prototype.hasOwnProperty.call(n,rv)&&n[rv]||(n[rv]=++VA)}(this);delete QE[n]}},Ds.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},sv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function XE(n){return Array.prototype.concat.apply([],arguments)}function qp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bl(n){return/^[\s\xa0]*$/.test(n)}var Or,BA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Nr(n,e){return-1!=n.indexOf(e)}function eD(n,e){return n<e?-1:n>e?1:0}e:{var tD=yt.navigator;if(tD){var nD=tD.userAgent;if(nD){Or=nD;break e}}Or=""}function Kp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ov(n){const e={};for(const t in n)e[t]=n[t];return e}var rD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function av(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<rD.length;u++)t=rD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Zp(n){return Zp[" "](n),n}Zp[" "]=Wp;var Qp,n,jA=Nr(Or,"Opera"),iu=Nr(Or,"Trident")||Nr(Or,"MSIE"),iD=Nr(Or,"Edge"),Yp=iD||iu,uv=Nr(Or,"Gecko")&&!(Nr(Or.toLowerCase(),"webkit")&&!Nr(Or,"Edge"))&&!(Nr(Or,"Trident")||Nr(Or,"MSIE"))&&!Nr(Or,"Edge"),sD=Nr(Or.toLowerCase(),"webkit")&&!Nr(Or,"Edge");function lv(){var n=yt.document;return n?n.documentMode:void 0}e:{var cv="",oD=(n=Or,uv?/rv:([^\);]+)(\)|;)/.exec(n):iD?/Edge\/([\d\.]+)/.exec(n):iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sD?/WebKit\/(\S+)/.exec(n):jA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(oD&&(cv=oD?oD[1]:""),iu){var Jp=lv();if(null!=Jp&&Jp>parseFloat(cv)){Qp=String(Jp);break e}}Qp=cv}var FR={};var VR=yt.document&&iu&&(lv()||parseInt(Qp,10))||void 0,UR=function(){if(!yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{yt.addEventListener("test",Wp,e),yt.removeEventListener("test",Wp,e)}catch{}return n}();function Pr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xp(n,e){if(Pr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(uv){e:{try{Zp(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xp.Z.h.call(this)}}Pr.prototype.h=function(){this.defaultPrevented=!0},Un(Xp,Pr);var eg={2:"touch",3:"pen",4:"mouse"};Xp.prototype.h=function(){Xp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var tg="closure_listenable_"+(1e6*Math.random()|0),uD=0;function ng(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++uD,this.ca=this.fa=!1}function Hd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Gd(n){this.src=n,this.g={},this.h=0}function lD(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=JE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Hd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zd(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Gd.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=zd(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ng(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var rg="closure_lm_"+(1e6*Math.random()|0),dv={};function hv(n,e,t,r,o){if(r&&r.once)return cD(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)hv(n,e[u],t,r,o);return null}return t=fv(t),n&&n[tg]?n.N(e,t,$d(r)?!!r.capture:!!r,o):GA(n,e,t,!1,r,o)}function GA(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=$d(o)?!!o.capture:!!o,p=fD(n);if(p||(n[rg]=p=new Gd(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function BR(){var e=$R;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)UR||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(hD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cD(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)cD(n,e[u],t,r,o);return null}return t=fv(t),n&&n[tg]?n.O(e,t,$d(r)?!!r.capture:!!r,o):GA(n,e,t,!0,r,o)}function dD(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)dD(n,e[u],t,r,o);else r=$d(r)?!!r.capture:!!r,t=fv(t),n&&n[tg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zd(u=n.g[e],t,r,o))&&(Hd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=fD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zd(e,t,r,o)),(t=-1<n?e[n]:null)&&Tl(t))}function Tl(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[tg])lD(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fD(e))?(lD(t,n),0==t.h&&(t.src=null,e[rg]=null)):Hd(n)}}}function hD(n){return n in dv?dv[n]:dv[n]="on"+n}function $R(n,e){if(n.ca)n=!0;else{e=new Xp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Tl(n),n=t.call(r,e)}return n}function fD(n){return(n=n[rg])instanceof Gd?n:null}var pD="__closure_events_fn_"+(1e9*Math.random()>>>0);function fv(n){return"function"==typeof n?n:(n[pD]||(n[pD]=function(e){return n.handleEvent(e)}),n[pD])}function Xn(){Ds.call(this),this.i=new Gd(this),this.P=this,this.I=null}function cr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Pr(e,n);else if(e instanceof Pr)e.target=e.target||n;else{var o=e;av(e=new Pr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=pv(c,r,!0,e)&&o}if(o=pv(c=e.g=n,r,!0,e)&&o,o=pv(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=pv(c=e.g=t[u],r,!1,e)&&o}function pv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&lD(n.i,c),o=!1!==p.call(_,r)&&o}}return o&&!r.defaultPrevented}Un(Xn,Ds),Xn.prototype[tg]=!0,Xn.prototype.removeEventListener=function(n,e,t,r){dD(this,n,e,t,r)},Xn.prototype.M=function(){if(Xn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hd(t[r]);delete n.g[e],n.h--}}this.I=null},Xn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var gv=yt.JSON.stringify;function gD(){var n=ig;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mv,zA=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Yi,n=>n.reset());class Yi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function WA(n){yt.setTimeout(()=>{throw n},0)}function Wd(n,e){mv||function bi(){var n=yt.Promise.resolve(void 0);mv=function(){n.then(qA)}}(),yv||(mv(),yv=!0),ig.add(n,e)}var yv=!1,ig=new class mD{constructor(){this.h=this.g=null}add(e,t){const r=zA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qA(){for(var n;n=gD();){try{n.h.call(n.g)}catch(t){WA(t)}var e=zA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yv=!1}function sg(n,e){Xn.call(this),this.h=n||1,this.g=e||yt,this.j=Jn(this.kb,this),this.l=Date.now()}function qd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function og(n,e,t){if("function"==typeof n)t&&(n=Jn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jn(n.handleEvent,n)}return 2147483647<Number(e)?-1:yt.setTimeout(n,e||0)}function _v(n){n.g=og(()=>{n.g=null,n.i&&(n.i=!1,_v(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Un(sg,Xn),(Je=sg.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cr(this,"tick"),this.da&&(qd(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){sg.Z.M.call(this),qd(this),delete this.g};class KA extends Ds{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_v(this)}M(){super.M(),this.g&&(yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Al(n){Ds.call(this),this.h=n,this.g={}}Un(Al,Ds);var vv=[];function yD(n,e,t,r){Array.isArray(t)||(t&&(vv[0]=t.toString()),t=vv);for(var o=0;o<t.length;o++){var u=hv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function wv(n){Kp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tl(e)},n),n.g={}}function ag(){this.g=!0}function su(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ao(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return gv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Al.prototype.M=function(){Al.Z.M.call(this),wv(this)},Al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ag.prototype.Aa=function(){this.g=!1},ag.prototype.info=function(){};var ou={},ZA=null;function ug(){return ZA=ZA||new Xn}function _D(n){Pr.call(this,ou.Ma,n)}function Kd(n){const e=ug();cr(e,new _D(e,n))}function vD(n,e){Pr.call(this,ou.STAT_EVENT,n),this.stat=e}function wr(n){const e=ug();cr(e,new vD(e,n))}function YA(n,e){Pr.call(this,ou.Na,n),this.size=e}function Sl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return yt.setTimeout(function(){n()},e)}ou.Ma="serverreachability",Un(_D,Pr),ou.STAT_EVENT="statevent",Un(vD,Pr),ou.Na="timingevent",Un(YA,Pr);var lg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Dv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wD(){}function Cv(){}wD.prototype.h=null;var fg,xl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dg(){Pr.call(this,"d")}function hg(){Pr.call(this,"c")}function au(){}function Zo(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Al(this),this.P=QA,this.W=new sg(n=Yp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bv}function bv(){this.i=null,this.g="",this.h=!1}Un(dg,Pr),Un(hg,Pr),Un(au,wD),au.prototype.g=function(){return new XMLHttpRequest},au.prototype.i=function(){return{}},fg=new au;var QA=45e3,pg={},Zd={};function Tv(n,e,t){n.K=1,n.v=lu(Cs(e)),n.s=t,n.U=!0,ID(n,null)}function ID(n,e){n.F=Date.now(),Yd(n),n.A=Cs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Av(t.h,"t",r),n.C=0,t=n.l.H,n.h=new bv,n.g=JR(n.l,t?e:null,!n.s),0<n.O&&(n.L=new KA(Jn(n.Ia,n,n.g),n.O)),yD(n.V,n.g,"readystatechange",n.gb),e=n.H?ov(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Kd(1),function Iv(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var D=p[_].split("=");if(1<D.length){var b=D[0];D=D[1];var T=b.split("_");c=2<=T.length&&"type"==T[1]?c+(b+"=")+D+"&":c+(b+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function JA(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function XA(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ED(n,t),o==Zd){4==e&&(n.o=4,wr(14),r=!1),su(n.j,n.m,null,"[Incomplete Response]");break}if(o==pg){n.o=4,wr(15),su(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}su(n.j,n.m,o,null),CD(n,o)}JA(n)&&o!=Zd&&o!=pg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xd(e),e.L=!0,wr(11))):(su(n.j,n.m,t,"[Invalid Chunked Response]"),Ml(n),mg(n))}function ED(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zd:(t=Number(e.substring(t,r)),isNaN(t)?pg:(r+=1)+t>e.length?Zd:(e=e.substr(r,t),n.C=r+t,e))}function Yd(n){n.Y=Date.now()+n.P,DD(n,n.P)}function DD(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sl(Jn(n.eb,n),e)}function gg(n){n.B&&(yt.clearTimeout(n.B),n.B=null)}function mg(n){0==n.l.G||n.I||Ag(n.l,n)}function Ml(n){gg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qd(n.W),wv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function CD(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kD(t.i,n)))if(t.I=n.N,!n.J&&kD(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Fl(t),ct(t)}Jd(t),wr(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sl(Jn(t.ab,t),6e3));if(1>=iS(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else eh(t,11)}else if((n.J||t.g==n)&&Fl(t),!bl(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const b=D[3];null!=b&&(t.ma=b,t.h.info("VER="+t.ma));const T=D[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const k=D[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const te=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.i;!u.g&&(Nr(te,"spdy")||Nr(te,"quic")||Nr(te,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Sv(u,u.h),u.h=null))}if(r.D){const De=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(r.sa=De,ln(r.F,r.D,De))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=QR(r,r.H?r.la:null,r.W),c.J){FD(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(gg(p),Yd(p)),r.g=c}else bg(r);0<t.l.length&&Lt(t)}else"stop"!=D[0]&&"close"!=D[0]||eh(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?eh(t,7):Ke(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}Kd(4)}catch{}}function bD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Bd(n)||"string"==typeof n)sv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Bd(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function jR(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Bd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Rl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Rl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Nl(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];uu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)uu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function uu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=Zo.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==M(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const b=M(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>b)&&(3!=b||Yp||this.g&&(this.h.h||this.g.ga()||B(this.g)))){this.I||4!=b||7==e||Kd(8==e||0>=T?3:2),gg(this);var t=this.g.ba();this.N=t;t:if(JA(this)){var r=B(this.g);n="";var o=r.length,u=4==M(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ml(this),mg(this);var c="";break t}this.h.i=new yt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Ko(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,b,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bl(p)){var D=p;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,wr(12),Ml(this),mg(this);break e}su(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,CD(this,t)}this.U?(XA(this,b,c),Yp&&this.i&&3==b&&(yD(this.V,this.W,"tick",this.fb),this.W.start())):(su(this.j,this.m,c,null),CD(this,c)),4==b&&Ml(this),this.i&&!this.I&&(4==b?Ag(this.l,this):(this.i=!1,Yd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),Ml(this),mg(this)}}}catch{}},Je.fb=function(){if(this.g){var n=M(this.g),e=this.g.ga();this.C<e.length&&(gg(this),XA(this,n,e),this.i&&4!=n&&Yd(this))}},Je.cancel=function(){this.I=!0,Ml(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ev(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Kd(3),wr(17)),Ml(this),this.o=2,mg(this)):DD(this,this.Y-n)},(Je=Rl.prototype).R=function(){Nl(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return Nl(this),this.g.concat()},Je.get=function(n,e){return uu(this.h,n)?this.h[n]:e},Je.set=function(n,e){uu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var TD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ai(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ai){this.g=void 0!==e?e:n.g,Ol(this,n.j),this.s=n.s,Pl(this,n.i),yg(this,n.m),this.l=n.l,e=n.h;var t=new kl;t.i=e.i,e.g&&(t.g=new Rl(e.g),t.h=e.h),_g(this,t),this.o=n.o}else n&&(t=String(n).match(TD))?(this.g=!!e,Ol(this,t[1]||"",!0),this.s=vg(t[2]||""),Pl(this,t[3]||"",!0),yg(this,t[4]),this.l=vg(t[5]||"",!0),_g(this,t[6]||"",!0),this.o=vg(t[7]||"")):(this.g=!!e,this.h=new kl(null,this.g))}function Cs(n){return new ai(n)}function Ol(n,e,t){n.j=t?vg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Pl(n,e,t){n.i=t?vg(e,!0):e}function yg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _g(n,e,t){e instanceof kl?(n.h=e,function zR(n,e){e&&!n.j&&(uo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(RD(this,r),Av(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=wg(e,nS)),n.h=new kl(e,n.g))}function ln(n,e,t){n.h.set(e,t)}function lu(n){return ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function vg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ai.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wg(e,xD,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wg(e,xD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(wg(t,"/"==t.charAt(0)?tS:eS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wg(t,MD)),n.join("")};var xD=/[#\/\?@]/g,eS=/[#\?:]/g,tS=/[#\?]/g,nS=/[#\?@]/g,MD=/#/g;function kl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uo(n){n.g||(n.g=new Rl,n.h=0,n.i&&function AD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RD(n,e){uo(n),e=Yo(n,e),uu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,uu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Nl(n)))}function ND(n,e){return uo(n),e=Yo(n,e),uu(n.g.h,e)}function Av(n,e,t){RD(n,e),0<t.length&&(n.i=null,n.g.set(Yo(n,e),qp(t)),n.h+=t.length)}function Yo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ig(n){this.l=n||rS,n=yt.PerformanceNavigationTiming?0<(n=yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(yt.g&&yt.g.Ea&&yt.g.Ea()&&yt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=kl.prototype).add=function(n,e){uo(this),this.i=null,n=Yo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){uo(this),this.g.forEach(function(t,r){sv(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){uo(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){uo(this);var e=[];if("string"==typeof n)ND(this,n)&&(e=XE(e,this.g.get(Yo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=XE(e,n[t])}return e},Je.set=function(n,e){return uo(this),this.i=null,ND(this,n=Yo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var rS=10;function PD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function iS(n){return n.h?1:n.g?n.g.size:0}function kD(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sv(n,e){n.g?n.g.add(e):n.h=e}function FD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function LD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qp(n.i)}function VD(){}function WR(){this.g=new VD}function qR(n,e,t){const r=t||"";try{bD(n,function(o,u){let c=o;$d(o)&&(c=gv(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function xv(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Qd(n){this.l=n.$b||null,this.j=n.ib||!1}function Mv(n,e){Xn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=UD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ig.prototype.cancel=function(){if(this.i=LD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},VD.prototype.stringify=function(n){return yt.JSON.stringify(n,void 0)},VD.prototype.parse=function(n){return yt.JSON.parse(n,void 0)},Un(Qd,wD),Qd.prototype.g=function(){return new Mv(this.l,this.j)},Qd.prototype.i=function(n){return function(){return n}}({}),Un(Mv,Xn);var UD=0;function sS(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Eg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dg(n)}function Dg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Mv.prototype).open=function(n,e){if(this.readyState!=UD)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Dg(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||yt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Eg(this)),this.readyState=UD},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dg(this)),this.g&&(this.readyState=3,Dg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sS(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Eg(this):Dg(this),3==this.readyState&&sS(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,Eg(this))},Je.Ta=function(n){this.g&&(this.response=n,Eg(this))},Je.ha=function(){this.g&&Eg(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Mv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ZR=yt.JSON.parse;function i(n){Xn.call(this),this.headers=new Rl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=s,this.K=this.L=!1}Un(i,Xn);var s="",a=/^https?$/i,l=["POST","PUT"];function h(n){return"content-type"==n.toLowerCase()}function y(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,w(n),C(n)}function w(n){n.D||(n.D=!0,cr(n,"complete"),cr(n,"error"))}function E(n){if(n.h&&typeof zp<"u"&&(!n.C[1]||4!=M(n)||2!=n.ba()))if(n.v&&4==M(n))og(n.Fa,0,n);else if(cr(n,"readystatechange"),4==M(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(TD)[1]||null;if(!o&&yt.self&&yt.self.location){var u=yt.self.location.protocol;o=u.substr(0,u.length-1)}r=!a.test(o?o.toLowerCase():"")}t=r}if(t)cr(n,"complete"),cr(n,"success");else{n.m=6;try{var c=2<M(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",w(n)}}finally{C(n)}}}function C(n,e){if(n.g){S(n);const t=n.g,r=n.C[0]?Wp:null;n.g=null,n.C=null,e||cr(n,"ready");try{t.onreadystatechange=r}catch{}}}function S(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(yt.clearTimeout(n.A),n.A=null)}function M(n){return n.g?n.g.readyState:0}function B(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case s:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function de(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function J(n){let e="";return Kp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ln(n,e,t))}function Te(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $e(n){this.za=0,this.l=[],this.h=new ag,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Te("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Te("baseRetryDelayMs",5e3,n),this.$a=Te("retryDelaySeedMs",1e4,n),this.Ya=Te("forwardChannelMaxRetries",2,n),this.ra=Te("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ig(n&&n.concurrentRequestLimit),this.Ca=new WR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ke(n){if(Ie(n),3==n.G){var e=n.V++,t=Cs(n.F);ln(t,"SID",n.J),ln(t,"RID",e),ln(t,"TYPE","terminate"),cu(n,t),(e=new Zo(n,n.h,e,void 0)).K=2,e.v=lu(Cs(t)),t=!1,yt.navigator&&yt.navigator.sendBeacon&&(t=yt.navigator.sendBeacon(e.v.toString(),"")),!t&&yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=JR(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Yd(e)}YR(n)}function ct(n){n.g&&(Xd(n),n.g.cancel(),n.g=null)}function Ie(n){ct(n),n.u&&(yt.clearTimeout(n.u),n.u=null),Fl(n),n.i.cancel(),n.m&&("number"==typeof n.m&&yt.clearTimeout(n.m),n.m=null)}function at(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Lt(n)}function Lt(n){PD(n.i)||n.m||(n.m=!0,Wd(n.Ha,n),n.C=0)}function Qo(n,e){var t;t=e?e.m:n.V++;const r=Cs(n.F);ln(r,"SID",n.J),ln(r,"RID",t),ln(r,"AID",n.U),cu(n,r),n.o&&n.s&&de(r,n.o,n.s),t=new Zo(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Cg(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Sv(n.i,t),Tv(t,r,e)}function cu(n,e){n.j&&bD({},function(t,r){ln(e,r,t)})}function Cg(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let D=o[_].h;const b=o[_].g;if(D-=u,0>D)u=Math.max(0,o[_].h-100),p=!1;else try{qR(b,c,"req"+D+"_")}catch{r&&r(b)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function bg(n){n.g||n.u||(n.Y=1,Wd(n.Ga,n),n.A=0)}function Jd(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sl(Jn(n.Ga,n),Sg(n,n.A)),n.A++,0))}function Xd(n){null!=n.B&&(yt.clearTimeout(n.B),n.B=null)}function Tg(n){n.g=new Zo(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Cs(n.oa);ln(e,"RID","rpc"),ln(e,"SID",n.J),ln(e,"CI",n.N?"0":"1"),ln(e,"AID",n.U),cu(n,e),ln(e,"TYPE","xmlhttp"),n.o&&n.s&&de(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=lu(Cs(e)),t.s=null,t.U=!0,ID(t,n)}function Fl(n){null!=n.v&&(yt.clearTimeout(n.v),n.v=null)}function Ag(n,e){var t=null;if(n.g==e){Fl(n),Xd(n),n.g=null;var r=2}else{if(!kD(n.i,e))return;t=e.D,FD(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;cr(r=ug(),new YA(r,t,e,o)),Lt(n)}else bg(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function mn(n,e){return!(iS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sl(Jn(n.Ha,n,e),Sg(n,n.C)),n.C++,0)))}(n,e)||2==r&&Jd(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:eh(n,5);break;case 4:eh(n,10);break;case 3:eh(n,6);break;default:eh(n,2)}}function Sg(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function eh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jn(n.jb,n);t||(t=new ai("//www.google.com/images/cleardot.gif"),yt.location&&"http"==yt.location.protocol||Ol(t,"https"),lu(t)),function KR(n,e){const t=new ag;if(yt.Image){const r=new Image;r.onload=jd(xv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=jd(xv,t,r,"TestLoadImage: error",!1,e),r.onabort=jd(xv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=jd(xv,t,r,"TestLoadImage: timeout",!1,e),yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wr(2);n.G=0,n.j&&n.j.va(e),YR(n),Ie(n)}function YR(n){n.G=0,n.I=-1,n.j&&((0!=LD(n.i).length||0!=n.l.length)&&(n.i.i.length=0,qp(n.l),n.l.length=0),n.j.ua())}function QR(n,e,t){let r=function HR(n){return n instanceof ai?Cs(n):new ai(n,void 0)}(t);if(""!=r.i)e&&Pl(r,e+"."+r.i),yg(r,r.m);else{const o=yt.location;r=function GR(n,e,t,r){var o=new ai(null,void 0);return n&&Ol(o,n),e&&Pl(o,e),t&&yg(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Kp(n.aa,function(o,u){ln(r,u,o)}),t=n.sa,(e=n.D)&&t&&ln(r,e,t),ln(r,"VER",n.ma),cu(n,r),r}function JR(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new i(t&&n.Ba&&!n.qa?new Qd({ib:!0}):n.qa)).L=n.H,e}function XR(){}function BD(){if(iu&&!(10<=Number(VR)))throw Error("Environmental error: no available transport.")}function Qi(n,e){Xn.call(this),this.g=new $e(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!bl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xg(this)}function eN(n){dg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tN(){hg.call(this),this.status=1}function xg(n){this.g=n}(Je=i.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fg.g(),this.C=function cg(n){return n.h||(n.h=n.i())}(this.u?this.u:fg),this.g.onreadystatechange=Jn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void y(this,u)}n=t||"";const o=new Rl(this.headers);r&&bD(r,function(u,c){o.set(c,u)}),r=function Cl(n){e:{var e=h;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=yt.FormData&&n instanceof yt.FormData,!(0<=JE(l,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{S(this),0<this.B&&((this.K=function d(n){return iu&&function LR(){return function $A(n){var e=FR;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=BA(String(Qp)).split("."),t=BA("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=eD(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||eD(0==o[2].length,0==u[2].length)||eD(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jn(this.pa,this)):this.A=og(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){y(this,u)}},Je.pa=function(){typeof zp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,cr(this,"complete"),cr(this,"abort"),C(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),C(this,!0)),i.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?E(this):this.cb())},Je.cb=function(){E(this)},Je.ba=function(){try{return 2<M(this)?this.g.status:-1}catch{return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ZR(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=$e.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Zo(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ov(u),av(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cg(this,o,e),ln(t=Cs(this.F),"RID",n),ln(t,"CVER",22),this.D&&ln(t,"X-HTTP-Session-Id",this.D),cu(this,t),this.o&&u&&de(t,this.o,u),Sv(this.i,o),this.Ra&&ln(t,"TYPE","init"),this.ja?(ln(t,"$req",e),ln(t,"SID","null"),o.$=!0,Tv(o,t,null)):Tv(o,t,e),this.G=2}}else 3==this.G&&(n?Qo(this,n):0==this.l.length||PD(this.i)||Qo(this))},Je.Ga=function(){if(this.u=null,Tg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sl(Jn(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wr(10),ct(this),Tg(this))},Je.ab=function(){null!=this.v&&(this.v=null,ct(this),Jd(this),wr(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),wr(2)):(this.h.info("Failed to ping google.com"),wr(1))},(Je=XR.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},BD.prototype.g=function(n,e){return new Qi(n,e)},Un(Qi,Xn),Qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Wd(Jn(n.hb,n,e))),wr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=QR(n,null,n.W),Lt(n)},Qi.prototype.close=function(){Ke(this.g)},Qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,at(this.g,e)}else this.v?((e={}).__data__=gv(n),at(this.g,e)):at(this.g,n)},Qi.prototype.M=function(){this.g.j=null,delete this.j,Ke(this.g),delete this.g,Qi.Z.M.call(this)},Un(eN,dg),Un(tN,hg),Un(xg,XR),xg.prototype.xa=function(){cr(this.g,"a")},xg.prototype.wa=function(n){cr(this.g,new eN(n))},xg.prototype.va=function(n){cr(this.g,new tN(n))},xg.prototype.ua=function(){cr(this.g,"b")},BD.prototype.createWebChannel=BD.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,lg.NO_ERROR=0,lg.TIMEOUT=8,lg.HTTP_ERROR=6,Dv.COMPLETE="complete",Cv.EventType=xl,xl.OPEN="a",xl.CLOSE="b",xl.ERROR="c",xl.MESSAGE="d",Xn.prototype.listen=Xn.prototype.N,i.prototype.listenOnce=i.prototype.O,i.prototype.getLastError=i.prototype.La,i.prototype.getLastErrorCode=i.prototype.Da,i.prototype.getStatus=i.prototype.ba,i.prototype.getResponseJson=i.prototype.Qa,i.prototype.getResponseText=i.prototype.ga,i.prototype.send=i.prototype.ea;var pk=qo.createWebChannelTransport=function(){return new BD},gk=qo.getStatEventTarget=function(){return ug()},oS=qo.ErrorCode=lg,mk=qo.EventType=Dv,yk=qo.Event=ou,nN=qo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_k=qo.FetchXmlHttpFactory=Qd,$D=qo.WebChannel=Cv,vk=qo.XhrIo=i;const rN="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let Mg="9.9.4";const Ll=new _r.Yd("@firebase/firestore");function aS(){return Ll.logLevel}function Ne(n,...e){if(Ll.logLevel<=_r.in.DEBUG){const t=e.map(uS);Ll.debug(`Firestore (${Mg}): ${n}`,...t)}}function qn(n,...e){if(Ll.logLevel<=_r.in.ERROR){const t=e.map(uS);Ll.error(`Firestore (${Mg}): ${n}`,...t)}}function th(n,...e){if(Ll.logLevel<=_r.in.WARN){const t=e.map(uS);Ll.warn(`Firestore (${Mg}): ${n}`,...t)}}function uS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Mg}) INTERNAL ASSERTION FAILED: `+n;throw qn(e),new Error(e)}function It(n,e){n||Xe()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends He.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class iN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ek{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class Dk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ck{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let c=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Er,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const D=c;e.enqueueRetryable((0,q.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Er)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new iN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Ir(e)}}class bk{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(It(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Tk{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new bk(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ak{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.A=t.token,new sN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Sk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class oN{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Sk(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function Rg(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function aN(n){return n+"\0"}class Dn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dn.fromMillis(Date.now())}static fromDate(e){return Dn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Dn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new Dn(0,0))}static max(){return new vt(new Dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rv{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qt extends Rv{construct(e,t,r){return new qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new qt(t)}static emptyPath(){return new qt([])}}const xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Rv{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new be(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new be(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new be(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===p?(c=!c,o++):"."!==p||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new be(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class je{constructor(e){this.path=e}static fromPath(e){return new je(qt.fromString(e))}static fromName(e){return new je(qt.fromString(e).popFirst(5))}static empty(){return new je(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new qt(e.slice()))}}class jD{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function lS(n){return n.fields.find(e=>2===e.kind)}function nh(n){return n.fields.filter(e=>2!==e.kind)}jD.UNKNOWN_ID=-1;class HD{constructor(e,t){this.fieldPath=e,this.kind=t}}class Nv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Nv(0,Ji.min())}}function uN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new Dn(t+1,0):new Dn(t,r));return new Ji(o,je.empty(),e)}function lN(n){return new Ji(n.readTime,n.key,-1)}class Ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ji(vt.min(),je.empty(),-1)}static max(){return new Ji(vt.max(),je.empty(),-1)}}function cS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const cN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Vl(n){return dS.apply(this,arguments)}function dS(){return dS=(0,q.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==cN)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),dS.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,c=!1;e.forEach(p=>{++o,p.next(()=>{++u,c&&u===o&&t()},_=>r(_))}),c=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,c=new Array(u);let p=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(b=>{c[D]=b,++p,p===u&&r(c)},b=>o(b))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class GD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Er,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ov(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=hS(r.target.error);this.P.reject(new Ov(e,o))}}static open(e,t,r,o){try{return new GD(t,e.transaction(o,r))}catch(u){throw new Ov(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ok(t)}}class lo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===lo.D((0,He.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),rh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,He.hl)())return!1;if(lo.N())return!0;const e=(0,He.z$)(),t=lo.D(e),r=0<t&&t<10,o=lo.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,q.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new Ov(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;o("VersionError"===p.name?new be(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new be(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ov(e,p))},u.onupgradeneeded=c=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,q.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=GD.open(u.db,e,c?"readonly":"readwrite",r),D=o(_).next(b=>(_.V(),b)).catch(b=>(_.abort(b),re.reject(b))).toPromise();return D.catch(()=>{}),yield _.v,D}catch(_){const D=_,b="FirebaseError"!==D.name&&p<3;if(Ne("SimpleDb","Transaction failed with error:",D.message,"Retrying:",b),u.close(),!b)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Nk{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return rh(this.U.delete())}}class Ov extends be{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ul(n){return"IndexedDbTransactionError"===n.name}class Ok{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rh(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),rh(this.store.add(e))}get(e){return rh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),rh(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),rh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(c,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const c=hS(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new re((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void o();const _=new Nk(p),D=t(p.primaryKey,p.value,_);if(D instanceof re){const b=D.catch(T=>(_.done(),re.reject(T)));r.push(b)}_.isDone?o():null===_.G?p.continue():p.continue(_.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rh(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=hS(r.target.error);t(o)}})}let hN=!1;function hS(n){const e=lo.D((0,He.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hN||(hN=!0,setTimeout(()=>{throw r},0)),r}}return n}class Pk{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,q.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ul(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Vl(r)}yield t.nt(1)}))}}class kk{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,q.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ne("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,o).next(p=>{o-=p,r.add(c)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(o,u)).next(p=>(Ne("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const c=lN(u);cS(c,r)>0&&(r=c)}),new Ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ti{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function fN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ih(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ti.at=-1;class $n{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zD(this.root,e,this.comparator,!1)}getReverseIterator(){return new zD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zD(this.root,e,this.comparator,!0)}}class zD{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??kr.RED,this.left=o??kr.EMPTY,this.right=u??kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new kr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return kr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1,kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gN(this.data.getIterator())}getIteratorFrom(e){return new gN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class gN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ng(n){return n.hasNext()?n.getNext():void 0}class Xi{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Xi([])}unionWith(e){let t=new cn(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rg(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const Lk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bl(n){if(It(!!n),"string"==typeof n){let e=0;const t=Lk.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sh(n){return"string"==typeof n?dr.fromBase64String(n):dr.fromUint8Array(n)}function fS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mN(n){const e=n.mapValue.fields.__previous_value__;return fS(e)?mN(e):e}function Pv(n){const e=Bl(n.mapValue.fields.__local_write_time__.timestampValue);return new Dn(e.seconds,e.nanos)}class Vk{constructor(e,t,r,o,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class $l{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $l("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}function kv(n){return null==n}function Fv(n){return 0===n&&1/n==-1/0}function yN(n){return"number"==typeof n&&Number.isInteger(n)&&!Fv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},WD={nullValue:"NULL_VALUE"};function oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fS(n)?4:IN(n)?9007199254740991:10:Xe()}function Jo(n,e){if(n===e)return!0;const t=oh(n);if(t!==oh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pv(n).isEqual(Pv(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Bl(r.timestampValue),c=Bl(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,sh(n.bytesValue).isEqual(sh(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return jn(r.geoPointValue.latitude)===jn(o.geoPointValue.latitude)&&jn(r.geoPointValue.longitude)===jn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return jn(r.integerValue)===jn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=jn(r.doubleValue),c=jn(o.doubleValue);return u===c?Fv(u)===Fv(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Rg(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(fN(u)!==fN(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Jo(u[p],c[p])))return!1;return!0}(n,e);default:return Xe()}var o}function Lv(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function Hl(n,e){if(n===e)return 0;const t=oh(n),r=oh(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=jn(o.integerValue||o.doubleValue),p=jn(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return _N(n.timestampValue,e.timestampValue);case 4:return _N(Pv(n),Pv(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(o,u){const c=sh(o),p=sh(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const D=At(c[_],p[_]);if(0!==D)return D}return At(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=At(jn(o.latitude),jn(u.latitude));return 0!==c?c:At(jn(o.longitude),jn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const D=Hl(c[_],p[_]);if(D)return D}return At(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===jl.mapValue&&u===jl.mapValue)return 0;if(o===jl.mapValue)return 1;if(u===jl.mapValue)return-1;const c=o.fields||{},p=Object.keys(c),_=u.fields||{},D=Object.keys(_);p.sort(),D.sort();for(let b=0;b<p.length&&b<D.length;++b){const T=At(p[b],D[b]);if(0!==T)return T;const k=Hl(c[p[b]],_[D[b]]);if(0!==k)return k}return At(p.length,D.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function _N(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=Bl(n),r=Bl(e),o=At(t.seconds,r.seconds);return 0!==o?o:At(t.nanos,r.nanos)}function Og(n){return pS(n)}function pS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Bl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sh(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=pS(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${pS(r.fields[p])}`;return u+"}"}(n.mapValue):Xe();var e}function ah(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gS(n){return!!n&&"integerValue"in n}function Vv(n){return!!n&&"arrayValue"in n}function vN(n){return!!n&&"nullValue"in n}function wN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qD(n){return!!n&&"mapValue"in n}function Uv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ih(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uk(n){return"nullValue"in n?WD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ah($l.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function Bk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ah($l.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?jl:Xe()}function EN(n,e){const t=Hl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function DN(n,e){const t=Hl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fr{constructor(e){this.value=e}static empty(){return new Fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uv(t)}setAll(e){let t=Bn.emptyPath(),r={},o=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=Uv(c):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());qD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];qD(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ih(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Fr(Uv(this.value))}}function CN(n){const e=[];return ih(n.fields,(t,r)=>{const o=new Bn([t]);if(qD(r)){const u=CN(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Xi(e)}class wn{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new wn(e,0,vt.min(),vt.min(),Fr.empty(),0)}static newFoundDocument(e,t,r){return new wn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new wn(e,2,t,vt.min(),Fr.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,vt.min(),Fr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $k{constructor(e,t=null,r=[],o=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function bN(n,e=null,t=[],r=[],o=null,u=null,c=null){return new $k(n,e,t,r,o,u,c)}function uh(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Og(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),kv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Og(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Og(r)).join(",")),e.ht=t}return e.ht}function Bv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Yk(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MN(n.startAt,e.startAt)&&MN(n.endAt,e.endAt)}function KD(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ZD(n,e){return n.filters.filter(t=>t instanceof Lr&&t.field.isEqual(e))}function TN(n,e,t){let r=WD,o=!0;for(const u of ZD(n,e)){let c=WD,p=!0;switch(u.op){case"<":case"<=":c=Uk(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=WD}EN({value:r,inclusive:o},{value:c,inclusive:p})<0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];EN({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function AN(n,e,t){let r=jl,o=!0;for(const u of ZD(n,e)){let c=jl,p=!0;switch(u.op){case">=":case">":c=Bk(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=jl}DN({value:r,inclusive:o},{value:c,inclusive:p})>0&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];DN({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class Lr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Hk(e,t,r):"array-contains"===t?new Wk(e,r):"in"===t?new qk(e,r):"not-in"===t?new Kk(e,r):"array-contains-any"===t?new Zk(e,r):new Lr(e,t,r)}static lt(e,t,r){return"in"===t?new Gk(e,r):new zk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Hl(t,this.value)):null!==t&&oh(this.value)===oh(t)&&this.ft(Hl(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Hk extends Lr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.ft(t)}}class Gk extends Lr{constructor(e,t){super(e,"in",t),this.keys=SN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zk extends Lr{constructor(e,t){super(e,"not-in",t),this.keys=SN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class Wk extends Lr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vv(t)&&Lv(t.arrayValue,this.value)}}class qk extends Lr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lv(this.value.arrayValue,t)}}class Kk extends Lr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lv(this.value.arrayValue,t)}}class Zk extends Lr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lv(this.value.arrayValue,r))}}class Gl{constructor(e,t){this.position=e,this.inclusive=t}}class Pg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xN(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(c.referenceValue),t.key):Hl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function MN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class du{constructor(e,t=null,r=[],o=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function RN(n,e,t,r,o,u,c,p){return new du(n,e,t,r,o,u,c,p)}function kg(n){return new du(n)}function NN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function mS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yS(n){for(const e of n.filters)if(e.dt())return e.field;return null}function _S(n){return null!==n.collectionGroup}function Fg(n){const e=Ge(n);if(null===e._t){e._t=[];const t=yS(e),r=mS(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Pg(t)),e._t.push(new Pg(Bn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Pg(Bn.keyField(),u))}}}return e._t}function Ai(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=bN(e.path,e.collectionGroup,Fg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Fg(e))t.push(new Pg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gl(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Gl(e.startAt.position,e.startAt.inclusive):null;e.wt=bN(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function YD(n,e,t){return new du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $v(n,e){return Bv(Ai(n),Ai(e))&&n.limitType===e.limitType}function ON(n){return`${uh(Ai(n))}|lt:${n.limitType}`}function vS(n){return`Query(target=${function jk(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Og(r.value)}`;var r}).join(", ")}]`),kv(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Og(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Og(t)).join(",")),`Target(${e})`}(Ai(n))}; limitType=${n.limitType})`}function wS(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const p=xN(o,u,c);return o.inclusive?p<=0:p<0}(t.startAt,Fg(t),r)||t.endAt&&!function(o,u,c){const p=xN(o,u,c);return o.inclusive?p>=0:p>0}(t.endAt,Fg(t),r)));var t,r}function PN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kN(n){return(e,t)=>{let r=!1;for(const o of Fg(n)){const u=Qk(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Qk(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,c){const p=u.data.field(o),_=c.data.field(o);return null!==p&&null!==_?Hl(p,_):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function FN(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fv(e)?"-0":e}}function LN(n){return{integerValue:""+n}}function VN(n,e){return yN(e)?LN(e):FN(n,e)}class QD{constructor(){this._=void 0}}function Jk(n,e,t){return n instanceof Lg?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof lh?BN(n,e):n instanceof ch?$N(n,e):function(r,o){const u=UN(r,o),c=jN(u)+jN(r.yt);return gS(u)&&gS(r.yt)?LN(c):FN(r.It,c)}(n,e)}function Xk(n,e,t){return n instanceof lh?BN(n,e):n instanceof ch?$N(n,e):t}function UN(n,e){return n instanceof Vg?gS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Lg extends QD{}class lh extends QD{constructor(e){super(),this.elements=e}}function BN(n,e){const t=HN(e);for(const r of n.elements)t.some(o=>Jo(o,r))||t.push(r);return{arrayValue:{values:t}}}class ch extends QD{constructor(e){super(),this.elements=e}}function $N(n,e){let t=HN(e);for(const r of n.elements)t=t.filter(o=>!Jo(o,r));return{arrayValue:{values:t}}}class Vg extends QD{constructor(e,t){super(),this.It=e,this.yt=t}}function jN(n){return jn(n.integerValue||n.doubleValue)}function HN(n){return Vv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jv{constructor(e,t){this.field=e,this.transform=t}}class tF{constructor(e,t){this.version=e,this.transformResults=t}}class Cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function JD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class XD{}function GN(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Bg(n.key,Cn.none()):new Ug(n.key,n.data,Cn.none());{const t=n.data,r=Fr.empty();let o=new cn(Bn.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),o=o.add(u)}return new hu(n.key,r,new Xi(o.toArray()),Cn.none())}}function nF(n,e,t){n instanceof Ug?function(r,o,u){const c=r.value.clone(),p=qN(r.fieldTransforms,o,u.transformResults);c.setAll(p),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof hu?function(r,o,u){if(!JD(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=qN(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(WN(r)),p.setAll(c),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hv(n,e,t,r){return n instanceof Ug?function(o,u,c,p){if(!JD(o.precondition,u))return c;const _=o.value.clone(),D=KN(o.fieldTransforms,p,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof hu?function(o,u,c,p){if(!JD(o.precondition,u))return c;const _=KN(o.fieldTransforms,p,u),D=u.data;return D.setAll(WN(o)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):(c=t,JD(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function rF(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=UN(r.transform,o||null);null!=u&&(null===t&&(t=Fr.empty()),t.set(r.field,u))}return t||null}function zN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Rg(t,r,(o,u)=>function eF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lh&&r instanceof lh||t instanceof ch&&r instanceof ch?Rg(t.elements,r.elements,Jo):t instanceof Vg&&r instanceof Vg?Jo(t.yt,r.yt):t instanceof Lg&&r instanceof Lg);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ug extends XD{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hu extends XD{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function WN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qN(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,p=e.data.field(u.field);r.set(u.field,Xk(c,p,t[o]))}return r}function KN(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,Jk(u,c,e))}return r}class Bg extends XD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IS extends XD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iF{constructor(e){this.count=e}}var er,Kt;function ZN(n){switch(n){default:return Xe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function YN(n){if(void 0===n)return qn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case er.OK:return ae.OK;case er.CANCELLED:return ae.CANCELLED;case er.UNKNOWN:return ae.UNKNOWN;case er.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case er.INTERNAL:return ae.INTERNAL;case er.UNAVAILABLE:return ae.UNAVAILABLE;case er.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case er.NOT_FOUND:return ae.NOT_FOUND;case er.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case er.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case er.ABORTED:return ae.ABORTED;case er.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case er.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case er.DATA_LOSS:return ae.DATA_LOSS;default:return Xe()}}(Kt=er||(er={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class zl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ih(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return pN(this.inner)}size(){return this.innerSize}}const sF=new $n(je.comparator);function Si(){return sF}const QN=new $n(je.comparator);function Gv(...n){let e=QN;for(const t of n)e=e.insert(t.key,t);return e}function JN(n){let e=QN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xo(){return zv()}function XN(){return zv()}function zv(){return new zl(n=>n.toString(),(n,e)=>n.isEqual(e))}const oF=new $n(je.comparator),aF=new cn(je.comparator);function Pt(...n){let e=aF;for(const t of n)e=e.add(t);return e}const uF=new cn(At);function eC(){return uF}class Wv{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wv(vt.min(),r,eC(),Si(),Pt())}}class qv{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qv(dr.EMPTY_BYTE_STRING,t,Pt(),Pt(),Pt())}}class tC{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class eO{constructor(e,t){this.targetId=e,this.At=t}}class tO{constructor(e,t,r=dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class nO{constructor(){this.Rt=0,this.bt=iO(),this.Pt=dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Pt(),t=Pt(),r=Pt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new qv(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=iO()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lF{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Si(),this.qt=rO(),this.Kt=new cn(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(KD(u))if(0===r){const c=new je(u.path);this.jt(t,c,wn.newNoDocument(c,vt.min()))}else It(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&KD(p.target)){const _=new je(p.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,wn.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Pt();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const D=this.Xt(_);return!D||2===D.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const o=new Wv(e,t,this.Kt,this.Ut,r);return this.Ut=Si(),this.qt=rO(),this.Kt=new cn(At),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new nO,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new cn(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nO),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rO(){return new $n(je.comparator)}function iO(){return new $n(je.comparator)}const cF={asc:"ASCENDING",desc:"DESCENDING"},dF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class hF{constructor(e,t){this.databaseId=e,this.gt=t}}function Kv(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sO(n,e){return n.gt?e.toBase64():e.toUint8Array()}function fF(n,e){return Kv(n,e.toTimestamp())}function Dr(n){return It(!!n),vt.fromTimestamp(function(e){const t=Bl(e);return new Dn(t.seconds,t.nanos)}(n))}function ES(n,e){return(t=n,new qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oO(n){const e=qt.fromString(n);return It(gO(e)),e}function Zv(n,e){return ES(n.databaseId,e.path)}function ea(n,e){const t=oO(e);if(t.get(1)!==n.databaseId.projectId)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(uO(t))}function DS(n,e){return ES(n.databaseId,e)}function aO(n){const e=oO(n);return 4===e.length?qt.emptyPath():uO(e)}function Yv(n){return new qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uO(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lO(n,e,t){return{name:Zv(n,e),fields:t.value.mapValue.fields}}function cO(n,e,t){const r=ea(n,e.name),o=Dr(e.updateTime),u=new Fr({mapValue:{fields:e.fields}}),c=wn.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Qv(n,e){let t;if(e instanceof Ug)t={update:lO(n,e.key,e.value)};else if(e instanceof Bg)t={delete:Zv(n,e.key)};else if(e instanceof hu)t={update:lO(n,e.key,e.data),updateMask:EF(e.fieldMask)};else{if(!(e instanceof IS))return Xe();t={verify:Zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Lg)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof lh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ch)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vg)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:fF(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function CS(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Cn.updateTime(Dr(o.updateTime)):void 0!==o.exists?Cn.exists(o.exists):Cn.none():Cn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let p=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),p=new Lg):"appendMissingElements"in c?p=new lh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new ch(c.removeAllFromArray.values||[]):"increment"in c?p=new Vg(u,c.increment):Xe();const _=Bn.fromServerFormat(c.fieldPath);return new jv(_,p)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),u=new Fr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Xi((e.updateMask.fieldPaths||[]).map(D=>Bn.fromServerFormat(D)));return new hu(o,u,c,t,r)}return new Ug(o,u,t,r)}if(e.delete){const o=ea(n,e.delete);return new Bg(o,t)}if(e.verify){const o=ea(n,e.verify);return new IS(o,t)}return Xe()}function dO(n,e){return{documents:[DS(n,e.path)]}}function hO(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=DS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=DS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const D=_.map(b=>function(T){if("=="===T.op){if(wN(T.value))return{unaryFilter:{field:$g(T.field),op:"IS_NAN"}};if(vN(T.value))return{unaryFilter:{field:$g(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(wN(T.value))return{unaryFilter:{field:$g(T.field),op:"IS_NOT_NAN"}};if(vN(T.value))return{unaryFilter:{field:$g(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$g(T.field),op:vF(T.op),value:T.value}}}(b));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:$g((b=D).field),direction:_F(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(D=e.limit,n.gt||kv(D)?D:{value:D});var D,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function fO(n){let e=aO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=pO(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(b=>{return new Pg(jg((T=b).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let p=null;t.limit&&(p=function(b){let T;return T="object"==typeof b?b.value:b,kv(T)?null:T}(t.limit));let _=null;var b;t.startAt&&(_=new Gl((b=t.startAt).values||[],!!b.before));let D=null;return t.endAt&&(D=function(b){return new Gl(b.values||[],!b.before)}(t.endAt)),RN(e,o,c,u,p,"F",_,D)}function pO(n){return n?void 0!==n.unaryFilter?[IF(n)]:void 0!==n.fieldFilter?[wF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>pO(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function _F(n){return cF[n]}function vF(n){return dF[n]}function $g(n){return{fieldPath:n.canonicalString()}}function jg(n){return Bn.fromServerFormat(n.fieldPath)}function wF(n){return Lr.create(jg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function IF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=jg(n.unaryFilter.field);return Lr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=jg(n.unaryFilter.field);return Lr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jg(n.unaryFilter.field);return Lr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jg(n.unaryFilter.field);return Lr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function EF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mO(e)),e=DF(n.get(t),e);return mO(e)}function DF(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function mO(n){return n+"\x01\x01"}function ta(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),qt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Xe(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===o.length?_=p:(o+=p,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:Xe()}u=c+2}return new qt(r)}const yO=["userId","batchId"];function nC(n,e){return[n,ui(e)]}function _O(n,e,t){return[n,ui(e),t]}const CF={},bF=["prefixPath","collectionGroup","readTime","documentId"],TF=["prefixPath","collectionGroup","documentId"],AF=["collectionGroup","readTime","prefixPath","documentId"],SF=["canonicalId","targetId"],xF=["targetId","path"],MF=["path","targetId"],RF=["collectionId","parent"],NF=["indexId","uid"],OF=["uid","sequenceNumber"],PF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kF=["indexId","uid","orderedDocumentKey"],FF=["userId","collectionPath","documentId"],LF=["userId","collectionPath","largestBatchId"],VF=["userId","collectionGroup","largestBatchId"],vO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UF=[...vO,"documentOverlays"],wO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IO=wO,BF=[...IO,"indexConfiguration","indexState","indexEntries"];class bS extends dN{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Cr(n,e){const t=Ge(n);return lo.O(t.ie,e)}class TS{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&nF(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hv(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XN();return this.mutations.forEach(o=>{const u=e.get(o.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(o.key)?null:p;const _=GN(c,p);null!==_&&r.set(o.key,_),c.isValidDocument()||c.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Rg(this.mutations,e.mutations,(t,r)=>zN(t,r))&&Rg(this.baseMutations,e.baseMutations,(t,r)=>zN(t,r))}}class AS{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=oF;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new AS(e,t,r,o)}}class SS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wl{constructor(e,t,r,o,u=vt.min(),c=vt.min(),p=dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class EO{constructor(e){this.re=e}}function DO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Zv(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Kv(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dh(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:dh(e.version)}}var o,u;return r}function rC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hh(n){const e=new Dn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function fh(n,e){const t=(e.baseMutations||[]).map(u=>CS(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>CS(n.re,u)),o=Dn.fromMillis(e.localWriteTimeMs);return new TS(e.batchId,o,t,r)}function Jv(n){const e=hh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hh(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=Ai(kg(aO(o.documents[0])))):r=Ai(fO(n.query)),new Wl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,dr.fromBase64String(n.resumeToken))}function CO(n,e){const t=dh(e.snapshotVersion),r=dh(e.lastLimboFreeSnapshotVersion);let o;o=KD(e.target)?dO(n.re,e.target):hO(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function xS(n){const e=fO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?YD(e,e.limit,"L"):e}function MS(n,e){return new SS(e.largestBatchId,CS(n.re,e.overlayMutation))}function bO(n,e){const t=e.path.lastSegment();return[n,ui(e.path.popLast()),t]}function TO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:dh(r.readTime),documentKey:ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class jF{getBundleMetadata(e,t){return AO(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:hh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return AO(e).put({bundleId:(r=t).id,createTime:dh(Dr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return SO(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:xS(o.bundledQuery),readTime:hh(o.readTime)};var o})}saveNamedQuery(e,t){return SO(e).put({name:(r=t).name,readTime:dh(Dr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AO(n){return Cr(n,"bundles")}function SO(n){return Cr(n,"namedQueries")}class iC{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new iC(e,t.uid||"")}getOverlay(e,t){return Xv(e).get(bO(this.userId,t)).next(r=>r?MS(this.It,r):null)}getOverlays(e,t){const r=Xo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const p=new SS(t,c);o.push(this.ue(e,p))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(ui(c.getCollectionPath())));const u=[];return o.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Xv(e).Y("collectionPathOverlayIndex",p))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Xo(),u=ui(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Xv(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const D=MS(this.It,_);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Xo();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xv(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,D,b)=>{const T=MS(this.It,D);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):b.done()}).next(()=>u)}ue(e,t){return Xv(e).put(function(r,o,u){const[c,p,_]=bO(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Qv(r.re,u.mutation)}}(this.It,this.userId,t))}}function Xv(n){return Cr(n,"documentOverlays")}class ph{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Fv(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(sh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?IN(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Xe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),je.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function HF(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xO(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=HF(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ph.Te=new ph;class GF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=xO(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=xO(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class zF{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class WF{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class ew{constructor(){this.Be=new GF,this.Le=new zF(this.Be),this.Ue=new WF(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class gh{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gh(this.indexId,this.documentKey,this.arrayValue,r)}}function mh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MO(n.arrayValue,e.arrayValue),0!==t?t:(t=MO(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function MO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=lS(e);if(void 0!==t&&!this.ze(t))return!1;const r=nh(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const c=r[o];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class KF{constructor(){this.Ye=new RS}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ji.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class RS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new cn(qt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new cn(qt.comparator)).toArray()}}const sC=new Uint8Array(0);class ZF{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new RS,this.Ze=new zl(r=>uh(r),(r,o)=>Bv(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ui(o)};return RO(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[aN(t),""],!1,!0);return RO(e).W(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ta(c.parent))}return r})}addFieldIndex(e,t){const r=oC(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete o.indexId;const u=r.add(o);if(t.indexState){const c=nw(e);return u.next(p=>{c.put(TO(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=oC(e),o=nw(e),u=tw(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=tw(e);let o=!0;const u=new Map;return re.forEach(this.tn(t),c=>this.en(e,c).next(p=>{o&&(o=!!p),u.set(c,p)})).next(()=>{if(o){let c=Pt();const p=[];return re.forEach(u,(_,D)=>{var b;Ne("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Et=>`${Et.fieldPath}:${Et.kind}`).join(",")}`} to execute ${uh(t)}`);const T=function(Et,ft){const mt=lS(ft);if(void 0===mt)return null;for(const Vt of ZD(Et,mt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(D,_),k=function(Et,ft){const mt=new Map;for(const Vt of nh(ft))for(const hr of ZD(Et,Vt.fieldPath))switch(hr.op){case"==":case"in":mt.set(Vt.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return mt.set(Vt.fieldPath.canonicalString(),hr.value),Array.from(mt.values())}return null}(D,_),z=function(Et,ft){const mt=[];let Vt=!0;for(const hr of nh(ft)){const vw=0===hr.kind?TN(Et,hr.fieldPath,Et.startAt):AN(Et,hr.fieldPath,Et.startAt);mt.push(vw.value),Vt&&(Vt=vw.inclusive)}return new Gl(mt,Vt)}(D,_),te=function(Et,ft){const mt=[];let Vt=!0;for(const hr of nh(ft)){const vw=0===hr.kind?AN(Et,hr.fieldPath,Et.endAt):TN(Et,hr.fieldPath,Et.endAt);mt.push(vw.value),Vt&&(Vt=vw.inclusive)}return new Gl(mt,Vt)}(D,_),De=this.nn(_,D,z),Me=this.nn(_,D,te),gt=this.sn(_,D,k),_t=this.rn(_.indexId,T,De,z.inclusive,Me,te.inclusive,gt);return re.forEach(_t,Et=>r.J(Et,t.limit).next(ft=>{ft.forEach(mt=>{const Vt=je.fromSegments(mt.documentKey);c.has(Vt)||(c=c.add(Vt),p.push(Vt))})}))}).next(()=>p)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),b=[];for(let T=0;T<_;++T){const k=t?this.on(t[T/D]):sC,z=this.un(e,k,r[T%D],o),te=this.cn(e,k,u[T%D],c),De=p.map(Me=>this.un(e,k,Me,!0));b.push(...this.createRange(z,te,De))}return b}un(e,t,r,o){const u=new gh(e,je.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new gh(e,je.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new qF(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new cn(Bn.comparator),_=!1;for(const D of c.filters){const b=D;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?_=!0:p=p.add(b.field))}for(const D of c.orderBy)D.field.isKeyField()||(p=p.add(D.field));return p.size+(_?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new ew;for(const o of nh(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.qe(o.kind);ph.Te.ce(u,c)}return r.$e()}on(e){const t=new ew;return ph.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new ew;return ph.Te.ce(ah(this.databaseId,t),r.qe(function(o){const u=nh(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new ew);let u=0;for(const c of nh(e)){const p=r[u++];for(const _ of o)if(this.ln(t,c.fieldPath)&&Vv(p))o=this.fn(o,c,p);else{const D=_.qe(c.kind);ph.Te.ce(p,D)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of o){const _=new ew;_.seed(p.$e()),ph.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Lr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=oC(e),o=nw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return re.forEach(u,p=>o.get([p.indexId,this.uid]).next(_=>{c.push(function(D,b){const T=b?new Nv(b.sequenceNumber,new Ji(hh(b.readTime),new je(ta(b.documentKey)),b.largestBatchId)):Nv.empty(),k=D.fields.map(([z,te])=>new HD(Bn.fromServerFormat(z),te));return new jD(D.indexId,D.collectionGroup,k,T)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:At(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=oC(e),u=nw(e);return this._n(e).next(c=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>re.forEach(p,_=>u.put(TO(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),re.forEach(p,_=>this.wn(e,o,_).next(D=>{const b=this.mn(u,_);return D.isEqual(b)?re.resolve():this.gn(e,u,_,D,b)}))))})}yn(e,t,r,o){return tw(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return tw(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=tw(e);let u=new cn(mh);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new gh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new cn(mh);const o=this.an(t,e);if(null==o)return r;const u=lS(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Vv(c))for(const p of c.arrayValue.values||[])r=r.add(new gh(t.indexId,e.key,this.on(p),o))}else r=r.add(new gh(t.indexId,e.key,sC,o));return r}gn(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,D,b,T){const k=p.getIterator(),z=_.getIterator();let te=Ng(k),De=Ng(z);for(;te||De;){let Me=!1,gt=!1;if(te&&De){const _t=D(te,De);_t<0?gt=!0:_t>0&&(Me=!0)}else null!=te?gt=!0:Me=!0;Me?(b(De),De=Ng(z)):gt?(T(te),te=Ng(k)):(te=Ng(k),De=Ng(z))}}(o,u,mh,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),re.waitFor(c)}_n(e){let t=1;return nw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>mh(c,p)).filter((c,p,_)=>!p||0!==mh(c,_[p-1]));const o=[];o.push(e);for(const c of r){const p=mh(c,e),_=mh(c,t);if(0===p)o[0]=e.Ke();else if(p>0&&_<0)o.push(c),o.push(c.Ke());else if(_>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,sC,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,sC,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NO)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||Xe())).next(NO)}}function RO(n){return Cr(n,"collectionParents")}function tw(n){return Cr(n,"indexEntries")}function oC(n){return Cr(n,"indexConfiguration")}function nw(n){return Cr(n,"indexState")}function NO(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;cS(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ji(e.readTime,e.documentKey,t)}const OO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xi(e,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function PO(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(b,T,k)=>(p++,k.delete()));u.push(_.next(()=>{It(1===p)}));const D=[];for(const b of t.mutations){const T=_O(e,b.key.path,t.batchId);u.push(o.delete(T)),D.push(b.key)}return re.waitFor(u).next(()=>D)}function aC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}xi.DEFAULT_COLLECTION_PERCENTILE=10,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xi.DEFAULT=new xi(41943040,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xi.DISABLED=new xi(-1,0,0);class uC{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new uC(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).Z({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Hg(e),c=ql(e);return c.add({}).next(p=>{It("number"==typeof p);const _=new TS(p,t,r,o),D=function(k,z,te){const De=te.baseMutations.map(gt=>Qv(k.re,gt)),Me=te.mutations.map(gt=>Qv(k.re,gt));return{userId:z,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:De,mutations:Me}}(this.It,this.userId,_),b=[];let T=new cn((k,z)=>At(k.canonicalString(),z.canonicalString()));for(const k of o){const z=_O(this.userId,k.key.path,p);T=T.add(k.key.path.popLast()),b.push(c.put(D)),b.push(u.put(z,CF))}return T.forEach(k=>{b.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),re.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return ql(e).get(t).next(r=>r?(It(r.userId===this.userId),fh(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ql(e).Z({index:"userMutationsIndex",range:o},(c,p,_)=>{p.userId===this.userId&&(It(p.batchId>=r),u=fh(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ql(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).W("userMutationsIndex",t).next(r=>r.map(o=>fh(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nC(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Hg(e).Z({range:o},(c,p,_)=>{const[D,b,T]=c,k=ta(b);if(D===this.userId&&t.path.isEqual(k))return ql(e).get(T).next(z=>{if(!z)throw Xe();It(z.userId===this.userId),u.push(fh(this.It,z))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(At);const o=[];return t.forEach(u=>{const c=nC(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=Hg(e).Z({range:p},(D,b,T)=>{const[k,z,te]=D,De=ta(z);k===this.userId&&u.path.isEqual(De)?r=r.add(te):T.done()});o.push(_)}),re.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=nC(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new cn(At);return Hg(e).Z({range:c},(_,D,b)=>{const[T,k,z]=_,te=ta(k);T===this.userId&&r.isPrefixOf(te)?te.length===o&&(p=p.add(z)):b.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ql(e).get(u).next(c=>{if(null===c)throw Xe();It(c.userId===this.userId),r.push(fh(this.It,c))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return PO(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Hg(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=ta(u[1]);o.push(_)}else p.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return kO(e,this.userId,t)}Rn(e){return FO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kO(n,e,t){const r=nC(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Hg(n).Z({range:u,X:!0},(p,_,D)=>{const[b,T,k]=p;b===e&&T===o&&(c=!0),D.done()}).next(()=>c)}function ql(n){return Cr(n,"mutations")}function Hg(n){return Cr(n,"documentMutations")}function FO(n){return Cr(n,"mutationQueues")}class yh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new yh(0)}static vn(){return new yh(-1)}}class YF{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new yh(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new Dn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gg(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Gg(e).Z((c,p)=>{const _=Jv(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Gg(e).Z((r,o)=>{const u=Jv(o);t(u)})}Vn(e){return LO(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Sn(e,t){return LO(e).put("targetGlobalKey",t)}Dn(e,t){return Gg(e).put(CO(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gg(e).Z({range:o,index:"queryTargetsIndex"},(c,p,_)=>{const D=Jv(p);Bv(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Kl(e);return t.forEach(c=>{const p=ui(c.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=Kl(e);return re.forEach(t,u=>{const c=ui(u.path);return re.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Kl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Kl(e);let u=Pt();return o.Z({range:r,X:!0},(c,p,_)=>{const D=ta(c[1]),b=new je(D);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=ui(t.path),o=IDBKeyRange.bound([r],[aN(r)],!1,!0);let u=0;return Kl(e).Z({index:"documentTargetsIndex",X:!0,range:o},([c,p],_,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}se(e,t){return Gg(e).get(t).next(r=>r?Jv(r):null)}}function Gg(n){return Cr(n,"targets")}function LO(n){return Cr(n,"targetGlobal")}function Kl(n){return Cr(n,"targetDocuments")}function VO([n,e],[t,r]){const o=At(n,t);return 0===o?At(e,r):o}class QF{constructor(e){this.xn=e,this.buffer=new cn(VO),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,q.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ul(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Vl(r)}yield t.Fn(3e5)}))}}class XF{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Ti.at);const r=new QF(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(OO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OO):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,c,p,_,D;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(r=T,p=Date.now(),this.removeTargets(e,r,t))).next(T=>(u=T,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(D=Date.now(),aS()<=_r.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-b}ms\n\tDetermined least recently used ${o} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${T} documents in `+(D-_)+`ms\nTotal Duration: ${D-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}class eL{constructor(e,t){this.db=e,this.garbageCollector=new XF(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return lC(e,r)}removeReference(e,t,r){return lC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lC(e,t)}Gn(e,t){return function(r,o){let u=!1;return FO(r).tt(c=>kO(r,c,o).next(p=>(p&&(u=!0),re.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,vt.min()),Kl(e).delete([0,ui(c.path)])))});o.push(_)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lC(e,t)}Kn(e,t){const r=Kl(e);let o,u=Ti.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:D})=>{0===c?(u!==Ti.at&&t(new je(ta(o)),u),u=D,o=_):u=Ti.at}).next(()=>{u!==Ti.at&&t(new je(ta(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lC(n,e){return Kl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ui(e.path),sequenceNumber:r}));var r}class UO{constructor(){this.changes=new zl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tL{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _h(e).put(r)}removeEntry(e,t,r){return _h(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],rC(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return _h(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rw(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return _h(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rw(t))},(o,u)=>{r={document:this.jn(t,u),size:aC(u)}}).next(()=>r)}getEntries(e,t){let r=Si();return this.zn(e,t,(o,u)=>{const c=this.jn(o,u);r=r.insert(o,c)}).next(()=>r)}Hn(e,t){let r=Si(),o=new $n(je.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),o=o.insert(u,aC(c))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let o=new cn(HO);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(rw(o.first()),rw(o.last())),c=o.getIterator();let p=c.getNext();return _h(e).Z({index:"documentKeyIndex",range:u},(_,D,b)=>{const T=je.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;p&&HO(p,T)<0;)r(p,null),p=c.getNext();p&&p.isEqual(T)&&(r(p,D),p=c.hasNext()?c.getNext():null),p?b.j(rw(p)):b.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),rC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _h(e).W(IDBKeyRange.bound(o,u,!0)).next(c=>{let p=Si();for(const _ of c){const D=this.jn(je.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(D.key,D)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=Si();const c=jO(t,r),p=jO(t,Ji.max());return _h(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,D,b)=>{const T=this.jn(je.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(T.key,T),u.size===o&&b.done()}).next(()=>u)}newChangeBuffer(e){return new nL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $O(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Qn(e,t){return $O(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function $F(n,e){let t;if(e.document)t=cO(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=hh(e.noDocument.readTime);t=wn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=je.fromSegments(e.unknownDocument.path),o=hh(e.unknownDocument.version);t=wn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Dn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return wn.newInvalidDocument(e)}}function BO(n){return new tL(n)}class nL extends UO{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new zl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new cn((u,c)=>At(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=DO(this.Yn.It,c);o=o.add(u.path.popLast()),r+=aC(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=DO(this.Yn.It,c.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function $O(n){return Cr(n,"remoteDocumentGlobal")}function _h(n){return Cr(n,"remoteDocumentsV14")}function rw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jO(n,e){const t=e.documentKey.path.toArray();return[n,rC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HO(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=At(t[u],r[u]),o)return o;return o=At(t.length,r.length),o||(o=At(t[t.length-2],r[r.length-2]),o||At(t[t.length-1],r[r.length-1]))}class rL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GO{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Hv(r.mutation,o,Xi.empty(),Dn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pt()){const o=Xo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let c=Gv();return u.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,o){let u=Si();const c=zv(),p=zv();return t.forEach((_,D)=>{const b=r.get(D.key);o.has(D.key)&&(void 0===b||b.mutation instanceof hu)?u=u.insert(D.key,D):void 0!==b&&(c.set(D.key,b.mutation.getFieldMask()),Hv(b.mutation,D,b.mutation.getFieldMask(),Dn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,b)=>c.set(D,b)),t.forEach((D,b)=>{var T;return p.set(D,new rL(b,null!==(T=c.get(D))&&void 0!==T?T:null))}),p))}recalculateAndSaveOverlays(e,t){const r=zv();let o=new $n((c,p)=>c-p),u=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let b=r.get(_)||Xi.empty();b=p.applyToLocalView(D,b),r.set(_,b);const T=(o.get(p.batchId)||Pt()).add(_);o=o.insert(p.batchId,T)})}).next(()=>{const c=[],p=o.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),D=_.key,b=_.value,T=XN();b.forEach(k=>{if(!u.has(k)){const z=GN(t.get(k),r.get(k));null!==z&&T.set(k,z),u=u.add(k)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,T))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_S(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(Xo());let p=-1,_=u;return c.next(D=>re.forEach(D,(b,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(b)?re.resolve():this.getBaseDocument(e,b,T).next(k=>{_=_.insert(b,k)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,Pt())).next(b=>({batchId:p,changes:JN(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next(r=>{let o=Gv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Gv();return this.indexManager.getCollectionParents(e,o).next(c=>re.forEach(c,p=>{const _=(D=t,b=p.child(o),new du(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((b,T)=>{u=u.insert(b,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const D=_.getKey();null===o.get(D)&&(o=o.insert(D,wn.newInvalidDocument(D)))});let c=Gv();return o.forEach((p,_)=>{const D=u.get(p);void 0!==D&&Hv(D.mutation,_,Xi.empty(),Dn.now()),wS(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(wn.newInvalidDocument(t))}}class iL{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Dr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xS(r.bundledQuery),readTime:Dr(r.readTime)}),re.resolve();var r}}class sL{constructor(){this.overlays=new $n(je.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=Xo(),u=t.length+1,c=new je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new $n((D,b)=>D-b);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let b=u.get(D.largestBatchId);null===b&&(b=Xo(),u=u.insert(D.largestBatchId,b)),b.set(D.getKey(),D)}}const p=Xo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,b)=>p.set(D,b)),!(p.size()>=o)););return re.resolve(p)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new SS(t,r));let u=this.es.get(t);void 0===u&&(u=Pt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class NS{constructor(){this.ns=new cn(br.ss),this.rs=new cn(br.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new br(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new br(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new je(new qt([])),r=new br(t,e),o=new br(t,e+1),u=[];return this.rs.forEachInRange([r,o],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new je(new qt([])),r=new br(t,e),o=new br(t,e+1);let u=Pt();return this.rs.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new br(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class br{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return je.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||je.comparator(e.key,t.key)}}class oL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new cn(br.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const c=new TS(u,t,r,o);this.mutationQueue.push(c);for(const p of o)this.gs=this.gs.add(new br(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new br(t,0),o=new br(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],c=>{const p=this.ys(c._s);u.push(p)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(At);return t.forEach(o=>{const u=new br(o,0),c=new br(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const c=new br(new je(u),0);let p=new cn(At);return this.gs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(p=p.add(_._s)),!0)},c),re.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,o=>{const u=new br(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new br(t,0),o=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aL{constructor(e){this.Es=e,this.docs=new $n(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=Si();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():wn.newInvalidDocument(o))}),re.resolve(r)}getAllFromCollection(e,t,r){let o=Si();const u=new je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||cS(lN(_),r)<=0||(o=o.insert(_.key,_.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uL(this)}getSize(e){return re.resolve(this.size)}}class uL extends UO{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class lL{constructor(e){this.persistence=e,this.Rs=new zl(t=>uh(t),Bv),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new NS,this.targetCount=0,this.vs=yh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new yh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class zO{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ti(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new lL(this),this.indexManager=new KF,this.remoteDocumentCache=new aL(r=>this.referenceDelegate.xs(r)),this.It=new EO(t),this.Ns=new iL(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new oL(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new cL(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class cL extends dN{constructor(e){super(),this.currentSequenceNumber=e}}class cC{constructor(e){this.persistence=e,this.Fs=new NS,this.$s=null}static Bs(e){return new cC(e)}get Ls(){if(this.$s)return this.$s;throw Xe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const o=je.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class dL{constructor(e){this.It=e}$(e,t,r,o){const u=new GD("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yO,{unique:!0}),p.createObjectStore("documentMutations"),WO(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=re.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),WO(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(D=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yO,{unique:!0});const b=_.store("mutations"),T=D.map(k=>b.put(k));return re.waitFor(T)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.qs(u))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(c=c.next(()=>this.Gs(u))),r<8&&o>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.js(u))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:FF});_.createIndex("collectionPathOverlayIndex",LF,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",VF,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:bF});_.createIndex("documentKeyIndex",TF),_.createIndex("collectionGroupIndex",AF)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&o>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:NF}).createIndex("sequenceNumberIndex",OF,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:PF}).createIndex("documentKeyIndex",kF,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=aC(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>re.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>re.forEach(p,_=>{It(_.userId===u.userId);const D=fh(this.It,_);return PO(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((c,p)=>{const _=new qt(c),D=[0,ui(_)];u.push(t.get(D).next(b=>b?re.resolve():t.put({targetId:0,path:ui(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:RF});const r=t.store("collectionParents"),o=new RS,u=c=>{if(o.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:ui(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new qt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],D)=>{const b=ta(p);return u(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Jv(o),c=CO(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(D=c,D.document?new je(qt.fromString(D.document.name).popFirst(5)):D.noDocument?je.fromSegments(D.noDocument.path):D.unknownDocument?je.fromSegments(D.unknownDocument.path):Xe()).path.toArray();var D;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(p.put(b))}).next(()=>re.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=BO(this.It),u=new zO(cC.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var D;let b=null!==(D=p.get(_.userId))&&void 0!==D?D:Pt();fh(this.It,_).keys().forEach(T=>b=b.add(T)),p.set(_.userId,b)}),re.forEach(p,(_,D)=>{const b=new Ir(D),T=iC.oe(this.It,b),k=u.getIndexManager(b),z=uC.oe(b,this.It,k,u.referenceDelegate);return new GO(o,z,T,k).recalculateAndSaveOverlaysForDocumentKeys(new bS(t,Ti.at),_).next()})})}}function WO(n){n.createObjectStore("targetDocuments",{keyPath:xF}).createIndex("documentTargetsIndex",MF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SF,{unique:!0}),n.createObjectStore("targetGlobal")}const OS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class PS{constructor(e,t,r,o,u,c,p,_,D,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=D,this.Ys=b,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=k=>Promise.resolve(),!PS.C())throw new be(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eL(this,o),this.ii=t+"main",this.It=new EO(_),this.ri=new lo(this.ii,this.Xs,new dL(this.It)),this.Cs=new YF(this.referenceDelegate,this.It),this.remoteDocumentCache=BO(this.It),this.Ns=new jF,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,OS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ti(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,q.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,q.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ul(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return iw(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return dC(e).delete(this.clientId)}yi(){var e=this;return(0,q.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Cr(r,"clientMetadata");return o.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return re.forEach(p,_=>o.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):iw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new be(ae.FAILED_PRECONDITION,OS);return!1}}return!(!this.networkEnabled||!this.inForeground)||dC(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,q.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bS(t,Ti.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>dC(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return uC.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZF(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return iC.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?BF:14===c?IO:13===c?wO:12===c?UF:11===c?vO:void Xe();var c;let p;return this.ri.runTransaction(e,o,u,_=>(p=new bS(_,this.Ss?this.Ss.next():Ti.at),"readwrite-primary"===t?this.fi(p).next(D=>!!D||this.di(p)).next(D=>{if(!D)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new be(ae.FAILED_PRECONDITION,cN);return r(p)}).next(D=>this.wi(p).next(()=>D)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return iw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new be(ae.FAILED_PRECONDITION,OS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iw(e).put("owner",t)}static C(){return lo.C()}_i(e){const t=iw(e);return t.get("owner").next(r=>this.mi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,He.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function iw(n){return Cr(n,"owner")}function dC(n){return Cr(n,"clientMetadata")}function kS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class FS{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Pt(),o=Pt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new FS(e,t.fromCache,r,o)}}class qO{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(NN(t))return re.resolve(null);let r=Ai(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=YD(t,null,"F"),r=Ai(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Pt(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.Fi(t,p);return this.$i(t,D,c,_.readTime)?this.ki(e,YD(t,null,"F")):this.Bi(e,D,t,_)}))})))}Mi(e,t,r,o){return NN(t)||o.isEqual(vt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,o)?this.Oi(e,t):(aS()<=_r.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vS(t)),this.Bi(e,c,t,uN(o,-1)))})}Fi(e,t){let r=new cn(kN(e));return t.forEach((o,u)=>{wS(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return aS()<=_r.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",vS(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ji.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class hL{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new $n(At),this.qi=new zl(u=>uh(u),Bv),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KO(n,e,t,r){return new hL(n,e,t,r)}function ZO(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,q.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=Pt();for(const D of o){c.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}for(const D of u){p.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(D=>({ji:D,removedBatchIds:c,addedBatchIds:p}))})})}),LS.apply(this,arguments)}function fL(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,D){const b=_.batch,T=b.keys();let k=re.resolve();return T.forEach(z=>{k=k.next(()=>D.getEntry(p,z)).next(te=>{const De=_.docVersions.get(z);It(null!==De),te.version.compareTo(De)<0&&(b.applyToRemoteDocument(te,_),te.isValidDocument()&&(te.setReadTime(_.commitVersion),D.addEntry(te)))})}),k.next(()=>c.mutationQueue.removeMutationBatch(p,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=Pt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function YO(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function pL(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const p=[];e.targetChanges.forEach((b,T)=>{const k=o.get(T);if(!k)return;p.push(t.Cs.removeMatchingKeys(u,b.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(u,b.addedDocuments,T)));let z=k.withSequenceNumber(u.currentSequenceNumber);var te,De,Me;e.targetMismatches.has(T)?z=z.withResumeToken(dr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):b.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(b.resumeToken,r)),o=o.insert(T,z),De=z,Me=b,(0===(te=k).resumeToken.approximateByteSize()||De.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,z))});let _=Si(),D=Pt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(QO(u,c,e.documentUpdates).next(b=>{_=b.Wi,D=b.zi})),!r.isEqual(vt.min())){const b=t.Cs.getLastRemoteSnapshotVersion(u).next(T=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return re.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ui=o,u))}function QO(n,e,t){let r=Pt(),o=Pt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Si();return t.forEach((p,_)=>{const D=u.get(p);_.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(p)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):Ne("LocalStore","Ignoring outdated watch update for ",p,". Current version:",D.version," Watch version:",_.version)}),{Wi:c,zi:o}})}function gL(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zg(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Cs.allocateTargetId(r).next(c=>(o=new Wl(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Wg(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,q.Z)(function*(n,e,t){const r=Ge(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ul(c))throw c;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),VS.apply(this,arguments)}function hC(n,e,t){const r=Ge(n);let o=vt.min(),u=Pt();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,D){const b=Ge(p),T=b.qi.get(D);return void 0!==T?re.resolve(b.Ui.get(T)):b.Cs.getTargetData(_,D)}(r,c,Ai(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?o:vt.min(),t?u:Pt())).next(p=>(eP(r,PN(e),p),{documents:p,Hi:u})))}function JO(n,e){const t=Ge(n),r=Ge(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function XO(n,e){const t=Ge(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,uN(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(eP(t,e,o),o))}function eP(n,e,t){let r=vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function US(){return US=(0,q.Z)(function*(n,e,t,r){const o=Ge(n);let u=Pt(),c=Si();for(const D of t){const b=e.Ji(D.metadata.name);D.document&&(u=u.add(b));const T=e.Yi(D);T.setReadTime(e.Xi(D.metadata.readTime)),c=c.insert(b,T)}const p=o.Gi.newChangeBuffer({trackRemovals:!0}),_=yield zg(o,(D=r,Ai(kg(qt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>QO(D,p,c).next(b=>(p.apply(D),b)).next(b=>o.Cs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>o.Cs.addMatchingKeys(D,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,b.Wi,b.zi)).next(()=>b.Wi)))}),US.apply(this,arguments)}function yL(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,q.Z)(function*(n,e,t=Pt()){const r=yield zg(n,Ai(xS(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Dr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(dr.EMPTY_BYTE_STRING,c);return o.Ui=o.Ui.insert(p.targetId,p),o.Cs.updateTargetData(u,p).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),BS.apply(this,arguments)}function tP(n,e){return`firestore_clients_${n}_${e}`}function nP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $S(n,e){return`firestore_targets_${n}_${e}`}class fC{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new be(o.error.code,o.error.message))),c?new fC(e,t,o.state,u):(qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new be(r.error.code,r.error.message))),u?new sw(e,r.state,o):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=eC();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=yN(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new pC(e,u):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jS(t.clientId,t.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HS{constructor(){this.activeTargetIds=eC()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $n(At),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=tP(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new HS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,q.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(tP(e.persistenceKey,o));if(u){const c=pC.Zi(o,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($S(this.persistenceKey,e));if(r){const o=sw.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($S(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,q.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let c=Ti.at;if(null!=u)try{const p=JSON.parse(u);It("number"==typeof p),c=p}catch(p){qn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);o!==Ti.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new fC(this.currentUser,e,t,r),u=nP(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=nP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=$S(this.persistenceKey,e),u=new sw(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return pC.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return fC.Zi(new Ir(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return sw.Zi(o,t)}yr(e){return jS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(_=>{o.has(_)||c.push(_)}),o.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=eC();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class rP{constructor(){this.Lr=new HS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new HS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _L{qr(e){}shutdown(){}}class iP{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class wL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class IL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const c=this.ao(e,t);Ne("RestConnection","Sending: ",c,r);const p={};return this.ho(p,o,u),this.lo(e,c,p,r).then(_=>(Ne("RestConnection","Received: ",_),_),_=>{throw th("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}fo(e,t,r,o,u,c){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${vL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,c)=>{const p=new vk;p.listenOnce(mk.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case oS.NO_ERROR:const D=p.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(D)),u(D);break;case oS.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),c(new be(ae.DEADLINE_EXCEEDED,"Request time out"));break;case oS.HTTP_ERROR:const b=p.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',b,"response text:",p.getResponseText()),b>0){const T=p.getResponseJson().error;if(T&&T.status&&T.message){const k=function(z){const te=z.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(te)>=0?te:ae.UNKNOWN}(T.status);c(new be(k,T.message))}else c(new be(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new be(ae.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);p.send(t,"POST",_,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=pk(),c=gk(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new _k({})),this.ho(p.initMessageHeaders,t,r),(0,He.uI)()||(0,He.b$)()||(0,He.d)()||(0,He.w1)()||(0,He.Mn)()||(0,He.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=o.join("");Ne("Connection","Creating WebChannel: "+_,p);const D=u.createWebChannel(_,p);let b=!1,T=!1;const k=new wL({Hr:te=>{T?Ne("Connection","Not sending because WebChannel is closed:",te):(b||(Ne("Connection","Opening WebChannel transport."),D.open(),b=!0),Ne("Connection","WebChannel sending:",te),D.send(te))},Jr:()=>D.close()}),z=(te,De,Me)=>{te.listen(De,gt=>{try{Me(gt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return z(D,$D.EventType.OPEN,()=>{T||Ne("Connection","WebChannel transport opened.")}),z(D,$D.EventType.CLOSE,()=>{T||(T=!0,Ne("Connection","WebChannel transport closed"),k.io())}),z(D,$D.EventType.ERROR,te=>{T||(T=!0,th("Connection","WebChannel transport errored:",te),k.io(new be(ae.UNAVAILABLE,"The operation could not be completed")))}),z(D,$D.EventType.MESSAGE,te=>{var De;if(!T){const Me=te.data[0];It(!!Me);const gt=Me,_t=gt.error||(null===(De=gt[0])||void 0===De?void 0:De.error);if(_t){Ne("Connection","WebChannel received error:",_t);const Et=_t.status;let ft=function(Vt){const hr=er[Vt];if(void 0!==hr)return YN(hr)}(Et),mt=_t.message;void 0===ft&&(ft=ae.INTERNAL,mt="Unknown error status: "+Et+" with message "+_t.message),T=!0,k.io(new be(ft,mt)),D.close()}else Ne("Connection","WebChannel received:",Me),k.ro(Me)}}),z(c,yk.STAT_EVENT,te=>{te.stat===nN.PROXY?Ne("Connection","Detected buffering proxy"):te.stat===nN.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}function sP(){return typeof window<"u"?window:null}function gC(){return typeof document<"u"?document:null}function ow(n){return new hF(n,!0)}class zS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oP{constructor(e,t,r,o,u,c,p,_){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new zS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,q.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,q.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,q.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(qn(t.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new be(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,q.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EL extends oP{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function gF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Xe(),o=e.targetChange.targetIds||[],u=function(_,D){return _.gt?(It(void 0===D||"string"==typeof D),dr.fromBase64String(D||"")):(It(void 0===D||D instanceof Uint8Array),dr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const D=void 0===_.code?ae.UNKNOWN:YN(_.code);return new be(D,_.message||"")}(c);t=new tO(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),u=Dr(r.document.updateTime),c=new Fr({mapValue:{fields:r.document.fields}}),p=wn.newFoundDocument(o,u,c);t=new tC(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),u=r.readTime?Dr(r.readTime):vt.min(),c=wn.newNoDocument(o,u);t=new tC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new tC([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new iF(r.count||0);t=new eO(r.targetId,u)}}var _;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Dr(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yv(this.It),t.addTarget=function(o,u){let c;const p=u.target;return c=KD(p)?{documents:dO(o,p)}:{query:hO(o,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=sO(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(c.readTime=Kv(o,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function yF(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yv(this.It),t.removeTarget=e,this.Bo(t)}}class DL extends oP{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function mF(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Dr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Dr(o)),new tF(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.Zo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yv(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qv(this.It,r))};this.Bo(t)}}class CL extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(ae.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new be(ae.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class bL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(qn(t),this.ou=!1):Ne("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class TL{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,q.Z)(function*(){var _;Zl(c)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,q.Z)(function*(D){const b=Ge(D);b._u.add(4),yield qg(b),b.gu.set("Unknown"),b._u.delete(4),yield aw(b)}),function(D){return _.apply(this,arguments)})(c))}))}),this.gu=new bL(r,o)}}function aw(n){return WS.apply(this,arguments)}function WS(){return WS=(0,q.Z)(function*(n){if(Zl(n))for(const e of n.wu)yield e(!0)}),WS.apply(this,arguments)}function qg(n){return qS.apply(this,arguments)}function qS(){return qS=(0,q.Z)(function*(n){for(const e of n.wu)yield e(!1)}),qS.apply(this,arguments)}function mC(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),YS(t)?ZS(t):Zg(t).ko()&&KS(t,e))}function uw(n,e){const t=Ge(n),r=Zg(t);t.du.delete(e),r.ko()&&aP(t,e),0===t.du.size&&(r.ko()?r.Fo():Zl(t)&&t.gu.set("Unknown"))}function KS(n,e){n.yu.Ot(e.targetId),Zg(n).zo(e)}function aP(n,e){n.yu.Ot(e),Zg(n).Ho(e)}function ZS(n){n.yu=new lF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Zg(n).start(),n.gu.uu()}function YS(n){return Zl(n)&&!Zg(n).No()&&n.du.size>0}function Zl(n){return 0===Ge(n)._u.size}function uP(n){n.yu=void 0}function AL(n){return QS.apply(this,arguments)}function QS(){return QS=(0,q.Z)(function*(n){n.du.forEach((e,t)=>{KS(n,e)})}),QS.apply(this,arguments)}function SL(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,q.Z)(function*(n,e){uP(n),YS(n)?(n.gu.hu(e),ZS(n)):n.gu.set("Unknown")}),JS.apply(this,arguments)}function xL(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,q.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof tO&&2===e.state&&e.cause)try{yield(r=(0,q.Z)(function*(o,u){const c=u.cause;for(const p of u.targetIds)o.du.has(p)&&(yield o.remoteSyncer.rejectListen(p,c),o.du.delete(p),o.yu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yC(n,r)}else if(e instanceof tC?n.yu.Gt(e):e instanceof eO?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(vt.min()))try{const r=yield YO(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.yu.te(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const D=o.du.get(_);D&&o.du.set(_,D.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=o.du.get(p);if(!_)return;o.du.set(p,_.withResumeToken(dr.EMPTY_BYTE_STRING,_.snapshotVersion)),aP(o,p);const D=new Wl(_.target,p,1,_.sequenceNumber);KS(o,D)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield yC(n,r)}var r}),XS.apply(this,arguments)}function yC(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,q.Z)(function*(n,e,t){if(!Ul(e))throw e;n._u.add(1),yield qg(n),n.gu.set("Offline"),t||(t=()=>YO(n.localStore)),n.asyncQueue.enqueueRetryable((0,q.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield aw(n)}))}),ex.apply(this,arguments)}function lP(n,e){return e().catch(t=>yC(n,t,e))}function Kg(n){return tx.apply(this,arguments)}function tx(){return tx=(0,q.Z)(function*(n){const e=Ge(n),t=Yl(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;ML(e);)try{const o=yield gL(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,RL(e,o)}catch(o){yield yC(e,o)}cP(e)&&dP(e)}),tx.apply(this,arguments)}function ML(n){return Zl(n)&&n.fu.length<10}function RL(n,e){n.fu.push(e);const t=Yl(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function cP(n){return Zl(n)&&!Yl(n).No()&&n.fu.length>0}function dP(n){Yl(n).start()}function NL(n){return nx.apply(this,arguments)}function nx(){return nx=(0,q.Z)(function*(n){Yl(n).eu()}),nx.apply(this,arguments)}function OL(n){return rx.apply(this,arguments)}function rx(){return rx=(0,q.Z)(function*(n){const e=Yl(n);for(const t of n.fu)e.Xo(t.mutations)}),rx.apply(this,arguments)}function PL(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,q.Z)(function*(n,e,t){const r=n.fu.shift(),o=AS.from(r,e,t);yield lP(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Kg(n)}),ix.apply(this,arguments)}function kL(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,q.Z)(function*(n,e){var t;e&&Yl(n).Yo&&(yield(t=(0,q.Z)(function*(r,o){if(ZN(u=o.code)&&u!==ae.ABORTED){const c=r.fu.shift();Yl(r).Oo(),yield lP(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Kg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),cP(n)&&dP(n)}),sx.apply(this,arguments)}function hP(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,q.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Zl(t);t._u.add(3),yield qg(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield aw(t)}),ox.apply(this,arguments)}function ax(n,e){return ux.apply(this,arguments)}function ux(){return ux=(0,q.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield aw(t)):e||(t._u.add(2),yield qg(t),t.gu.set("Unknown"))}),ux.apply(this,arguments)}function Zg(n){return n.pu||(n.pu=function(e,t,r){const o=Ge(e);return o.su(),new EL(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:AL.bind(null,n),Zr:SL.bind(null,n),Wo:xL.bind(null,n)}),n.wu.push(function(){var e=(0,q.Z)(function*(t){t?(n.pu.Oo(),YS(n)?ZS(n):n.gu.set("Unknown")):(yield n.pu.stop(),uP(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Yl(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ge(e);return o.su(),new DL(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:NL.bind(null,n),Zr:kL.bind(null,n),tu:OL.bind(null,n),Zo:PL.bind(null,n)}),n.wu.push(function(){var e=(0,q.Z)(function*(t){t?(n.Iu.Oo(),yield Kg(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class lx{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,p=new lx(e,t,c,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new be(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(n,e){if(qn("AsyncQueue",`${e}: ${n}`),Ul(n))return new be(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Qg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=Gv(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new Qg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class fP{constructor(){this.Tu=new $n(je.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Xe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jg{constructor(e,t,r,o,u,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Jg(e,t,Qg.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class FL{constructor(){this.Au=void 0,this.listeners=[]}}class LL{constructor(){this.queries=new zl(e=>ON(e),$v),this.onlineState="Unknown",this.Ru=new Set}}function cx(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,q.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new FL),o)try{u.Au=yield t.onListen(r)}catch(c){const p=Yg(c,`Initialization of query '${vS(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&px(t)}),dx.apply(this,arguments)}function hx(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,q.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),fx.apply(this,arguments)}function VL(n,e){const t=Ge(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const p of c.listeners)p.Pu(o)&&(r=!0);c.Au=o}}r&&px(t)}function UL(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function px(n){n.Ru.forEach(e=>{e.next()})}class gx{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Jg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class BL{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class pP{constructor(e){this.It=e}Ji(e){return ea(this.It,e)}Yi(e){return e.metadata.exists?cO(this.It,e.document,!1):wn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Dr(e)}}class $L{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gP(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new pP(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const c of o.metadata.queries){const p=(t.get(c)||Pt()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,q.Z)(function*(){const t=yield function mL(n,e,t,r){return US.apply(this,arguments)}(e.localStore,new pP(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield yL(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function gP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mP{constructor(e){this.key=e}}class yP{constructor(e){this.key=e}}class _P{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Pt(),this.mutatedKeys=Pt(),this.Ku=kN(e),this.Gu=new Qg(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new fP,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((b,T)=>{const k=o.get(b),z=wS(this.query,T)?T:null,te=!!k&&this.mutatedKeys.has(k.key),De=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Me=!1;k&&z?k.data.isEqual(z.data)?te!==De&&(r.track({type:3,doc:z}),Me=!0):this.zu(k,z)||(r.track({type:2,doc:z}),Me=!0,(_&&this.Ku(z,_)>0||D&&this.Ku(z,D)<0)&&(p=!0)):!k&&z?(r.track({type:0,doc:z}),Me=!0):k&&!z&&(r.track({type:1,doc:k}),Me=!0,(_||D)&&(p=!0)),Me&&(z?(c=c.add(z),u=De?u.add(b):u.delete(b)):(c=c.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const b="F"===this.query.limitType?c.last():c.first();c=c.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{Gu:c,Wu:r,$i:p,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((D,b)=>function(T,k){const z=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return z(T)-z(k)}(D.type,b.type)||this.Ku(D.doc,b.doc)),this.Hu(r);const c=t?this.Ju():[],p=0===this.qu.size&&this.current?1:0,_=p!==this.Uu;return this.Uu=p,0!==u.length||_?{snapshot:new Jg(this.query,e.Gu,o,u,e.mutatedKeys,0===p,_,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new fP,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Pt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new yP(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new mP(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Pt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Jg.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class jL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HL{constructor(e){this.key=e,this.ec=!1}}class GL{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new zl(p=>ON(p),$v),this.ic=new Map,this.rc=new Set,this.oc=new $n(je.comparator),this.uc=new Map,this.cc=new NS,this.ac={},this.hc=new Map,this.lc=yh.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function zL(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,q.Z)(function*(n,e){const t=Ux(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const c=yield zg(t.localStore,Ai(e));t.isPrimaryClient&&mC(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield yx(t,e,r,"current"===p)}return o}),mx.apply(this,arguments)}function yx(n,e,t,r){return _x.apply(this,arguments)}function _x(){return _x=(0,q.Z)(function*(n,e,t,r){n.dc=(b,T,k)=>{return(z=(0,q.Z)(function*(te,De,Me,gt){let _t=De.view.ju(Me);_t.$i&&(_t=yield hC(te.localStore,De.query,!1).then(({documents:mt})=>De.view.ju(mt,_t)));const Et=gt&&gt.targetChanges.get(De.targetId),ft=De.view.applyChanges(_t,te.isPrimaryClient,Et);return Sx(te,De.targetId,ft.Yu),ft.snapshot}),function(te,De,Me,gt){return z.apply(this,arguments)})(n,b,T,k);var z};const o=yield hC(n.localStore,e,!0),u=new _P(e,o.Hi),c=u.ju(o.documents),p=qv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,p);Sx(n,t,_.Yu);const D=new jL(e,t,u);return n.sc.set(e,D),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),_x.apply(this,arguments)}function WL(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,q.Z)(function*(n,e){const t=Ge(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!$v(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),uw(t.remoteStore,r.targetId),Xg(t,r.targetId)}).catch(Vl))):(Xg(t,r.targetId),yield Wg(t.localStore,r.targetId,!0))}),vx.apply(this,arguments)}function wx(){return wx=(0,q.Z)(function*(n,e,t){const r=Bx(n);try{const o=yield function(u,c){const p=Ge(u),_=Dn.now(),D=c.reduce((k,z)=>k.add(z.key),Pt());let b,T;return p.persistence.runTransaction("Locally write mutations","readwrite",k=>{let z=Si(),te=Pt();return p.Gi.getEntries(k,D).next(De=>{z=De,z.forEach((Me,gt)=>{gt.isValidDocument()||(te=te.add(Me))})}).next(()=>p.localDocuments.getOverlayedDocuments(k,z)).next(De=>{b=De;const Me=[];for(const gt of c){const _t=rF(gt,b.get(gt.key).overlayedDocument);null!=_t&&Me.push(new hu(gt.key,_t,CN(_t.value.mapValue),Cn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,_,Me,c)}).next(De=>{T=De;const Me=De.applyToLocalDocumentSet(b,te);return p.documentOverlayCache.saveOverlays(k,De.batchId,Me)})}).then(()=>({batchId:T.batchId,changes:JN(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,p){let _=u.ac[u.currentUser.toKey()];_||(_=new $n(At)),_=_.insert(c,p),u.ac[u.currentUser.toKey()]=_}(r,o.batchId,t),yield fu(r,o.changes),yield Kg(r.remoteStore)}catch(o){const u=Yg(o,"Failed to persist write");t.reject(u)}}),wx.apply(this,arguments)}function vP(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,q.Z)(function*(n,e){const t=Ge(n);try{const r=yield pL(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.uc.get(u);c&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.ec=!0:o.modifiedDocuments.size>0?It(c.ec):o.removedDocuments.size>0&&(It(c.ec),c.ec=!1))}),yield fu(t,r,e)}catch(r){yield Vl(r)}}),Ix.apply(this,arguments)}function wP(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,c)=>{const p=c.view.bu(e);p.snapshot&&o.push(p.snapshot)}),function(u,c){const p=Ge(u);p.onlineState=c;let _=!1;p.queries.forEach((D,b)=>{for(const T of b.listeners)T.bu(c)&&(_=!0)}),_&&px(p)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KL(n,e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,q.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let c=new $n(je.comparator);c=c.insert(u,wn.newNoDocument(u,vt.min()));const p=Pt().add(u),_=new Wv(vt.min(),new Map,new cn(At),c,p);yield vP(r,_),r.oc=r.oc.remove(u),r.uc.delete(e),xx(r)}else yield Wg(r.localStore,e,!1).then(()=>Xg(r,e,t)).catch(Vl)}),Ex.apply(this,arguments)}function ZL(n,e){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,q.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield fL(t.localStore,e);Ax(t,r,null),Tx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(t,o)}catch(o){yield Vl(o)}}),Dx.apply(this,arguments)}function YL(n,e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,q.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,c){const p=Ge(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return p.mutationQueue.lookupMutationBatch(_,c).next(b=>(It(null!==b),D=b.keys(),p.mutationQueue.removeMutationBatch(_,b))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,D,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>p.localDocuments.getDocuments(_,D))})}(r.localStore,e);Ax(r,e,t),Tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fu(r,o)}catch(o){yield Vl(o)}}),Cx.apply(this,arguments)}function bx(){return bx=(0,q.Z)(function*(n,e){const t=Ge(n);Zl(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=Yg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),bx.apply(this,arguments)}function Tx(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function Ax(n,e,t){const r=Ge(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function Xg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||IP(n,r)})}function IP(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(uw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),xx(n))}function Sx(n,e,t){for(const r of t)r instanceof mP?(n.cc.addReference(r.key,e),JL(n,r)):r instanceof yP?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||IP(n,r.key)):Xe()}function JL(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.rc.add(r),xx(n))}function xx(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new je(qt.fromString(e)),r=n.lc.next();n.uc.set(r,new HL(t)),n.oc=n.oc.insert(t,r),mC(n.remoteStore,new Wl(Ai(kg(t.path)),r,2,Ti.at))}}function fu(n,e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,q.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],c=[];var p;r.sc.isEmpty()||(r.sc.forEach((p,_)=>{c.push(r.dc(_,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D.fromCache?"not-current":"current"),o.push(D);const b=FS.Ci(_.targetId,D);u.push(b)}}))}),yield Promise.all(c),r.nc.Wo(o),yield(p=(0,q.Z)(function*(_,D){const b=Ge(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>re.forEach(D,k=>re.forEach(k.Si,z=>b.persistence.referenceDelegate.addReference(T,k.targetId,z)).next(()=>re.forEach(k.Di,z=>b.persistence.referenceDelegate.removeReference(T,k.targetId,z)))))}catch(T){if(!Ul(T))throw T;Ne("LocalStore","Failed to update sequence numbers: "+T)}for(const T of D){const k=T.targetId;if(!T.fromCache){const z=b.Ui.get(k),De=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);b.Ui=b.Ui.insert(k,De)}}}),function(_,D){return p.apply(this,arguments)})(r.localStore,u))}),Mx.apply(this,arguments)}function XL(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,q.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield ZO(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(c=>{c.forEach(p=>{p.reject(new be(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(t,r.ji)}var o}),Rx.apply(this,arguments)}function eV(n,e){const t=Ge(n),r=t.uc.get(e);if(r&&r.ec)return Pt().add(r.key);{let o=Pt();const u=t.ic.get(e);if(!u)return o;for(const c of u){const p=t.sc.get(c);o=o.unionWith(p.view.Qu)}return o}}function tV(n,e){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,q.Z)(function*(n,e){const t=Ge(n),r=yield hC(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&Sx(t,e.targetId,o.Yu),o}),Nx.apply(this,arguments)}function nV(n,e){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,q.Z)(function*(n,e){const t=Ge(n);return XO(t.localStore,e).then(r=>fu(t,r))}),Ox.apply(this,arguments)}function rV(n,e,t,r){return Px.apply(this,arguments)}function Px(){return Px=(0,q.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(c,p){const _=Ge(c),D=Ge(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>D.Tn(b,p).next(T=>T?_.localDocuments.getDocuments(b,T):re.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Kg(o.remoteStore):"acknowledged"===t||"rejected"===t?(Ax(o,e,r||null),Tx(o,e),p=e,Ge(Ge(o.localStore).mutationQueue).An(p)):Xe(),yield fu(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),Px.apply(this,arguments)}function kx(){return kx=(0,q.Z)(function*(n,e){const t=Ge(n);if(Ux(t),Bx(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield EP(t,r.toArray());t.fc=!0,yield ax(t.remoteStore,!0);for(const u of o)mC(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Xg(t,c),Wg(t.localStore,c,!0))),uw(t.remoteStore,c)}),yield o,yield EP(t,r),function(u){const c=Ge(u);c.uc.forEach((p,_)=>{uw(c.remoteStore,_)}),c.cc.fs(),c.uc=new Map,c.oc=new $n(je.comparator)}(t),t.fc=!1,yield ax(t.remoteStore,!1)}}),kx.apply(this,arguments)}function EP(n,e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,q.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const c of e){let p;const _=r.ic.get(c);if(_&&0!==_.length){p=yield zg(r.localStore,Ai(_[0]));for(const D of _){const b=r.sc.get(D),T=yield tV(r,b);T.snapshot&&u.push(T.snapshot)}}else{const D=yield JO(r.localStore,c);p=yield zg(r.localStore,D),yield yx(r,DP(D),c,!1)}o.push(p)}return r.nc.Wo(u),o}),Fx.apply(this,arguments)}function DP(n){return RN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sV(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function oV(n,e,t,r){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,q.Z)(function*(n,e,t,r){const o=Ge(n);if(o.fc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield XO(o.localStore,PN(u[0])),p=Wv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fu(o,c,p);break}case"rejected":yield Wg(o.localStore,e,!0),Xg(o,e,r);break;default:Xe()}}),Lx.apply(this,arguments)}function aV(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,q.Z)(function*(n,e,t){const r=Ux(n);if(r.fc){for(const o of e){if(r.ic.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield JO(r.localStore,o),c=yield zg(r.localStore,u);yield yx(r,DP(u),c.targetId,!1),mC(r.remoteStore,c)}for(const o of t)r.ic.has(o)&&(yield Wg(r.localStore,o,!1).then(()=>{uw(r.remoteStore,o),Xg(r,o)}).catch(Vl))}}),Vx.apply(this,arguments)}function Ux(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KL.bind(null,e),e.nc.Wo=VL.bind(null,e.eventManager),e.nc._c=UL.bind(null,e.eventManager),e}function Bx(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YL.bind(null,e),e}class CP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,q.Z)(function*(){t.It=ow(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return KO(this.persistence,new qO,e.initialUser,this.It)}gc(e){return new zO(cC.Bs,this.It)}mc(e){return new rP}terminate(){var e=this;return(0,q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bP extends CP{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield Bx(r.Ec.syncEngine),yield Kg(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return KO(this.persistence,new qO,e.initialUser,this.It)}Ic(e,t){return new JF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new kk(t,this.persistence);return new Pk(e.asyncQueue,r)}gc(e){const t=kS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xi.withCacheSize(this.cacheSizeBytes):xi.DEFAULT;return new PS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sP(),gC(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new rP}}class lV extends bP{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof GS&&(r.sharedClientState.syncEngine={Fr:rV.bind(null,o),$r:oV.bind(null,o),Br:aV.bind(null,o),vi:sV.bind(null,o),Or:nV.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,q.Z)(function*(c){yield function iV(n,e){return kx.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=sP();if(!GS.C(t))throw new be(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $x{initialize(e,t){var r=this;return(0,q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>wP(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=XL.bind(null,r.syncEngine),yield ax(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LL}createDatastore(e){const t=ow(e.databaseInfo.databaseId),r=new IL(e.databaseInfo);return new CL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>wP(this.syncEngine,p,0),c=iP.C()?new iP:new _L,new TL(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,p,_,D){const b=new GL(r,o,u,c,p,_);return D&&(b.fc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,q.Z)(function*(t){const r=Ge(t);Ne("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield qg(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function TP(n,e=10240){let t=0;return{read:()=>(0,q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,q.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _C{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cV{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,q.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,q.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,q.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new BL(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,q.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,q.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,q.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new be(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,q.Z)(function*(u,c){const p=Ge(u),_=Yv(p.It)+"/documents",D={documents:c.map(z=>Zv(p.It,z))},b=yield p.fo("BatchGetDocuments",_,D,c.length),T=new Map;b.forEach(z=>{const te=function pF(n,e){return"found"in e?function(t,r){It(!!r.found);const o=ea(t,r.found.name),u=Dr(r.found.updateTime),c=new Fr({mapValue:{fields:r.found.fields}});return wn.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=ea(t,r.missing),u=Dr(r.readTime);return wn.newNoDocument(o,u)}(n,e):Xe()}(p.It,z);T.set(te.key.toString(),te)});const k=[];return c.forEach(z=>{const te=T.get(z.toString());It(!!te),k.push(te)}),k}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new IS(u,e.precondition(u)))}),yield(r=(0,q.Z)(function*(o,u){const c=Ge(o),p=Yv(c.It)+"/documents",_={writes:u.map(D=>Qv(c.It,D))};yield c.co("Commit",p,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new be(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Cn.exists(!1):Cn.updateTime(t):Cn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new be(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cn.updateTime(t)}return Cn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hV{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new zS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,q.Z)(function*(){const t=new dV(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!kv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ZN(t)}return!1}}class fV{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ir.UNAUTHENTICATED,this.clientId=oN.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,q.Z)(function*(p){Ne("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ne("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Yg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function AP(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,q.Z)(function*(u){r.isEqual(u)||(yield ZO(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jx.apply(this,arguments)}function SP(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Gx(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>hP(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>hP(e.remoteStore,u)),n.onlineComponents=e}),Hx.apply(this,arguments)}function Gx(n){return zx.apply(this,arguments)}function zx(){return zx=(0,q.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield AP(n,new CP)),n.offlineComponents}),zx.apply(this,arguments)}function vC(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,q.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield SP(n,new $x)),n.onlineComponents}),Wx.apply(this,arguments)}function xP(n){return Gx(n).then(e=>e.persistence)}function wC(n){return Gx(n).then(e=>e.localStore)}function MP(n){return vC(n).then(e=>e.remoteStore)}function qx(n){return vC(n).then(e=>e.syncEngine)}function em(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,q.Z)(function*(n){const e=yield vC(n),t=e.eventManager;return t.onListen=zL.bind(null,e.syncEngine),t.onUnlisten=WL.bind(null,e.syncEngine),t}),Kx.apply(this,arguments)}function RP(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(o,u,c,p,_){const D=new _C({next:T=>{u.enqueueAndForget(()=>hx(o,b));const k=T.docs.has(c);!k&&T.fromCache?_.reject(new be(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&p&&"server"===p.source?_.reject(new be(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(T)},error:T=>_.reject(T)}),b=new gx(kg(c.path),D,{includeMetadataChanges:!0,Nu:!0});return cx(o,b)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}function NP(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(o,u,c,p,_){const D=new _C({next:T=>{u.enqueueAndForget(()=>hx(o,b)),T.fromCache&&"server"===p.source?_.reject(new be(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(T)},error:T=>_.reject(T)}),b=new gx(c,D,{includeMetadataChanges:!0,Nu:!0});return cx(o,b)}(yield em(n),n.asyncQueue,e,t,r)})),r.promise}const OP=new Map;function Zx(n,e,t){if(!t)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PP(n,e,t,r){if(!0===e&&!0===r)throw new be(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kP(n){if(!je.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FP(n){if(je.isDocumentKey(n))throw new be(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function IC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=IC(n);throw new be(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LP(n,e){if(e<=0)throw new be(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class VP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new be(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new be(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lw{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ek;switch(t.type){case"gapi":return new Tk(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new be(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OP.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),OP.delete(e),t.terminate())}(this),Promise.resolve()}}class En{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class na extends Zr{constructor(e,t,r){super(e,t,kg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new je(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function UP(n,e,...t){if(n=(0,He.m9)(n),Zx("collection","path",e),n instanceof lw){const r=qt.fromString(e,...t);return FP(r),new na(n,null,r)}{if(!(n instanceof En||n instanceof na))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return FP(r),new na(n.firestore,null,r)}}function EC(n,e,...t){if(n=(0,He.m9)(n),1===arguments.length&&(e=oN.R()),Zx("doc","path",e),n instanceof lw){const r=qt.fromString(e,...t);return kP(r),new En(n,null,new je(r))}{if(!(n instanceof En||n instanceof na))throw new be(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(qt.fromString(e,...t));return kP(r),new En(n.firestore,n instanceof na?n.converter:null,new je(r))}}function BP(n,e){return n=(0,He.m9)(n),e=(0,He.m9)(e),(n instanceof En||n instanceof na)&&(e instanceof En||e instanceof na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $P(n,e){return n=(0,He.m9)(n),e=(0,He.m9)(e),n instanceof Zr&&e instanceof Zr&&n.firestore===e.firestore&&$v(n._query,e._query)&&n.converter===e.converter}class CV{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new zS(this,"async_queue_retry"),this.jc=()=>{const t=gC();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=gC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=gC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Er;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,q.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Ul(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,qn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=lx.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&Xe()}verifyOperationInProgress(){}Yc(){var e=this;return(0,q.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Yx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class bV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bn extends lw{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new CV,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jP(this),this._firestoreClient.terminate()}}function AV(n,e){const t="object"==typeof n?n:(0,Ot.getApp)(),r="string"==typeof n?n:e||"(default)";return(0,Ot._getProvider)(t,"firestore").getImmediate({identifier:r})}function tr(n){return n._firestoreClient||jP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function jP(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Vk(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new fV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function HP(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,q.Z)(function*(){try{yield AP(n,t),yield SP(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(c=u).name?c.code===ae.FAILED_PRECONDITION||c.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;th("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function GP(n){if(n._initialized||n._terminated)throw new be(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new be(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ra(dr.fromBase64String(e))}catch(t){throw new be(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ra(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vh{constructor(e){this._methodName=e}}class DC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const FV=/^__.*__$/;class LV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new hu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ug(e,this.data,t,this.fieldTransforms)}}class zP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class CC{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new CC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return AC(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(WP(this.na)&&FV.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class VV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ow(e)}fa(e,t,r,o=!1){return new CC({na:e,methodName:t,la:r,path:Bn.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function wh(n){const e=n._freezeSettings(),t=ow(n._databaseId);return new VV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bC(n,e,t,r,o,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,o);eM("Data must be an object, but it was:",c,r);const p=ZP(r,c);let _,D;if(u.merge)_=new Xi(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const b=[];for(const T of u.mergeFields){const k=tM(e,T,t);if(!c.contains(k))throw new be(ae.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);QP(b,k)||b.push(k)}_=new Xi(b),D=c.fieldTransforms.filter(T=>_.covers(T.field))}else _=null,D=c.fieldTransforms;return new LV(new Fr(p),_,D)}class cw extends vh{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cw}}function qP(n,e,t){return new CC({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Qx extends vh{_toFieldTransform(e){return new jv(e.path,new Lg)}isEqual(e){return e instanceof Qx}}class UV extends vh{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=qP(this,e,!0),r=this.da.map(u=>Ih(u,t)),o=new lh(r);return new jv(e.path,o)}isEqual(e){return this===e}}class BV extends vh{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=qP(this,e,!0),r=this.da.map(u=>Ih(u,t)),o=new ch(r);return new jv(e.path,o)}isEqual(e){return this===e}}class $V extends vh{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Vg(e.It,VN(e.It,this._a));return new jv(e.path,t)}isEqual(e){return this===e}}function Jx(n,e,t,r){const o=n.fa(1,e,t);eM("Data must be an object, but it was:",o,r);const u=[],c=Fr.empty();ih(r,(_,D)=>{const b=TC(e,_,t);D=(0,He.m9)(D);const T=o.ua(b);if(D instanceof cw)u.push(b);else{const k=Ih(D,T);null!=k&&(u.push(b),c.set(b,k))}});const p=new Xi(u);return new zP(c,p,o.fieldTransforms)}function Xx(n,e,t,r,o,u){const c=n.fa(1,e,t),p=[tM(e,r,t)],_=[o];if(u.length%2!=0)throw new be(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)p.push(tM(e,u[k])),_.push(u[k+1]);const D=[],b=Fr.empty();for(let k=p.length-1;k>=0;--k)if(!QP(D,p[k])){const z=p[k];let te=_[k];te=(0,He.m9)(te);const De=c.ua(z);if(te instanceof cw)D.push(z);else{const Me=Ih(te,De);null!=Me&&(D.push(z),b.set(z,Me))}}const T=new Xi(D);return new zP(b,T,c.fieldTransforms)}function KP(n,e,t,r=!1){return Ih(t,n.fa(r?4:3,e))}function Ih(n,e){if(YP(n=(0,He.m9)(n)))return eM("Unsupported field value:",e,n),ZP(n,e);if(n instanceof vh)return function(t,r){if(!WP(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let p=Ih(c,r.ca(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,He.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VN(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Dn.fromDate(t);return{timestampValue:Kv(r.It,o)}}if(t instanceof Dn){const o=new Dn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kv(r.It,o)}}if(t instanceof DC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ra)return{bytesValue:sO(r.It,t._byteString)};if(t instanceof En){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ES(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${IC(t)}`)}(n,e)}function ZP(n,e){const t={};return pN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ih(n,(r,o)=>{const u=Ih(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function YP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Dn||n instanceof DC||n instanceof ra||n instanceof En||n instanceof vh)}function eM(n,e,t){if(!YP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=IC(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function tM(n,e,t){if((e=(0,He.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return TC(n,e);throw AC("Field path arguments must be of type string or ",n,!1,void 0,t)}const jV=new RegExp("[~\\*/\\[\\]]");function TC(n,e,t){if(e.search(jV)>=0)throw AC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch{throw AC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AC(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${o}`),_+=")"),new be(ae.INVALID_ARGUMENT,p+n+_)}function QP(n,e){return n.some(t=>t.isEqual(e))}class dw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HV extends dw{data(){return super.data()}}function SC(n,e){return"string"==typeof e?TC(n,e):e instanceof pu?e._internalPath:e._delegate._internalPath}class Eh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gu extends dw{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(SC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hw extends gu{data(e={}){return super.data(e)}}class Ql{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Eh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hw(this._firestore,this._userDataWriter,r.key,r,new Eh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new hw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Eh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const p=new hw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Eh(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),D=u.indexOf(c.doc.key)),{type:GV(c.type),doc:p,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function GV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function JP(n,e){return n instanceof gu&&e instanceof gu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ql&&e instanceof Ql&&n._firestore===e._firestore&&$P(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function XP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new be(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fw{}function Jl(n,...e){for(const t of e)n=t._apply(n);return n}class zV extends fw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=wh(e.firestore),r=function(o,u,c,p,_,D,b){let T;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){s1(b,D);const z=[];for(const te of b)z.push(i1(p,o,te));T={arrayValue:{values:z}}}else T=i1(p,o,b)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||s1(b,D),T=KP(c,"where",b,"in"===D||"not-in"===D);const k=Lr.create(_,D,T);return function(z,te){if(te.dt()){const Me=yS(z);if(null!==Me&&!Me.isEqual(te.field))throw new be(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${te.field.toString()}'`);const gt=mS(z);null!==gt&&o1(0,te.field,gt)}const De=function(Me,gt){for(const _t of Me.filters)if(gt.indexOf(_t.op)>=0)return _t.op;return null}(z,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==De)throw new be(ae.INVALID_ARGUMENT,De===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${De.toString()}' filters.`)}(o,k),k}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Zr(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new du(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class qV extends fw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new be(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Pg(o,u);return function(p,_){if(null===mS(p)){const D=yS(p);null!==D&&o1(0,D,_.field)}}(r,c),c}(e._query,this.wa,this.ya);return new Zr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new du(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class e1 extends fw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Zr(e.firestore,e.converter,YD(e._query,this.pa,this.Ia))}}class t1 extends fw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=r1(e,this.type,this.Ta,this.Ea);return new Zr(e.firestore,e.converter,(o=t,new du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class n1 extends fw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=r1(e,this.type,this.Ta,this.Ea);return new Zr(e.firestore,e.converter,(o=t,new du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function r1(n,e,t,r){if(t[0]=(0,He.m9)(t[0]),t[0]instanceof dw)return function(o,u,c,p,_){if(!p)throw new be(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const D=[];for(const b of Fg(o))if(b.field.isKeyField())D.push(ah(u,p.key));else{const T=p.data.field(b.field);if(fS(T))throw new be(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const k=b.field.canonicalString();throw new be(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}D.push(T)}return new Gl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=wh(n.firestore);return function(u,c,p,_,D,b){const T=u.explicitOrderBy;if(D.length>T.length)throw new be(ae.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let z=0;z<D.length;z++){const te=D[z];if(T[z].field.isKeyField()){if("string"!=typeof te)throw new be(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof te}`);if(!_S(u)&&-1!==te.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${te}' contains a slash.`);const De=u.path.child(qt.fromString(te));if(!je.isDocumentKey(De))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${De}' is not because it contains an odd number of segments.`);const Me=new je(De);k.push(ah(c,Me))}else{const De=KP(p,_,te);k.push(De)}}return new Gl(k,b)}(n._query,n.firestore._databaseId,o,e,t,r)}}function i1(n,e,t){if("string"==typeof(t=(0,He.m9)(t))){if(""===t)throw new be(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_S(e)&&-1!==t.indexOf("/"))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(qt.fromString(t));if(!je.isDocumentKey(r))throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ah(n,new je(r))}if(t instanceof En)return ah(n,t._key);throw new be(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${IC(t)}.`)}function s1(n,e){if(!Array.isArray(n)||0===n.length)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new be(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function o1(n,e,t){if(!t.isEqual(e))throw new be(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const tU={maxAttempts:5};class nM{convertValue(e,t="none"){switch(oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return ih(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new DC(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mN(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pv(e));default:return null}}convertTimestamp(e){const t=Bl(e);return new Dn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=qt.fromString(e);It(gO(r));const o=new $l(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||qn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nU extends nM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}class a1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wh(e)}set(e,t,r){this._verifyNotCommitted();const o=Xl(e,this._firestore),u=xC(o.converter,t,r),c=bC(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Cn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Xl(e,this._firestore);let c;return c="string"==typeof(t=(0,He.m9)(t))||t instanceof pu?Xx(this._dataReader,"WriteBatch.update",u._key,t,r,o):Jx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xl(e,this._firestore);return this._mutations=this._mutations.concat(new Bg(t._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(n,e){if((n=(0,He.m9)(n)).firestore!==e)throw new be(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dh extends nM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function u1(n,e,t){n=Gt(n,En);const r=Gt(n.firestore,bn),o=xC(n.converter,e,t);return tm(r,[bC(wh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Cn.none())])}function l1(n,e,t,...r){n=Gt(n,En);const o=Gt(n.firestore,bn),u=wh(o);let c;return c="string"==typeof(e=(0,He.m9)(e))||e instanceof pu?Xx(u,"updateDoc",n._key,e,t,r):Jx(u,"updateDoc",n._key,e),tm(o,[c.toMutation(n._key,Cn.exists(!0))])}function c1(n,...e){var t,r,o;n=(0,He.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Yx(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Yx(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[c+2]=null===(o=T.complete)||void 0===o?void 0:o.bind(T)}let _,D,b;if(n instanceof En)D=Gt(n.firestore,bn),b=kg(n._key.path),_={next:T=>{e[c]&&e[c](rM(D,n,T))},error:e[c+1],complete:e[c+2]};else{const T=Gt(n,Zr);D=Gt(T.firestore,bn),b=T._query;const k=new Dh(D);_={next:z=>{e[c]&&e[c](new Ql(D,k,T,z))},error:e[c+1],complete:e[c+2]},XP(n._query)}return function(T,k,z,te){const De=new _C(te),Me=new gx(k,De,z);return T.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return cx(yield em(T),Me)})),()=>{De.Rc(),T.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return hx(yield em(T),Me)}))}}(tr(D),b,p,_)}function tm(n,e){return function(t,r){const o=new Er;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function qL(n,e,t){return wx.apply(this,arguments)}(yield qx(t),r,o)})),o.promise}(tr(n),e)}function rM(n,e,t){const r=t.docs.get(e._key),o=new Dh(n);return new gu(n,o,e._key,r,new Eh(t.hasPendingWrites,t.fromCache),e.converter)}class hU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wh(e)}get(e){const t=Xl(e,this._firestore),r=new nU(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new dw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new dw(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=Xl(e,this._firestore),u=xC(o.converter,t,r),c=bC(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=Xl(e,this._firestore);let c;return c="string"==typeof(t=(0,He.m9)(t))||t instanceof pu?Xx(this._dataReader,"Transaction.update",u._key,t,r,o):Jx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Xl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xl(e,this._firestore),r=new Dh(this._firestore);return super.get(e).then(o=>new gu(this._firestore,r,t._key,o._document,new Eh(!1,!1),t.converter))}}function iM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function h1(){if(typeof Uint8Array>"u")throw new be("unimplemented","Uint8Arrays are not available in this environment.")}function f1(){if(!function Fk(){return typeof atob<"u"}())throw new be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mg=Ot.SDK_VERSION,(0,Ot._registerComponent)(new ii.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),c=new bn(new Ck(t.getProvider("auth-internal")),new Ak(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(p.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)(rN,"3.4.15",n),(0,Ot.registerVersion)(rN,"3.4.15","esm2017")}();class pw{constructor(e){this._delegate=e}static fromBase64String(e){return f1(),new pw(ra.fromBase64String(e))}static fromUint8Array(e){return h1(),new pw(ra.fromUint8Array(e))}toBase64(){return f1(),this._delegate.toBase64()}toUint8Array(){return h1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sM(n){return function IU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class EU{enableIndexedDbPersistence(e,t){return function SV(n,e){GP(n=Gt(n,bn));const t=tr(n),r=n._freezeSettings(),o=new $x;return HP(t,o,new bP(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xV(n){GP(n=Gt(n,bn));const e=tr(n),t=n._freezeSettings(),r=new $x;return HP(e,r,new lV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function MV(n){if(n._initialized&&!n._terminated)throw new be(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{yield(t=(0,q.Z)(function*(r){if(!lo.C())return Promise.resolve();const o=r+"main";yield lo.delete(o)}),function(r){return t.apply(this,arguments)})(kS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class p1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $l||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&th("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function EV(n,e,t,r={}){var o;const u=(n=Gt(n,lw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&th("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Ir.MOCK_USER;else{c=(0,He.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new be(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ir(_)}n._authCredentials=new Dk(new iN(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function NV(n){return function pV(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield xP(n),t=yield MP(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o._u.delete(0),aw(o)}(t)}))}(tr(n=Gt(n,bn)))}(this._delegate)}disableNetwork(){return function OV(n){return function gV(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield xP(n),t=yield MP(n);return e.setNetworkEnabled(!1),(r=(0,q.Z)(function*(o){const u=Ge(o);u._u.add(0),yield qg(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(tr(n=Gt(n,bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RV(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function QL(n,e){return bx.apply(this,arguments)}(yield qx(e),t)})),t.promise}(tr(n=Gt(n,bn)))}(this._delegate)}onSnapshotsInSync(e){return function dU(n,e){return function _V(n,e){const t=new _C(e);return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield em(n),o=t,Ge(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield em(n),o=t,void Ge(r).Ru.delete(o);var r,o}))}}(tr(n=Gt(n,bn)),Yx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nm(this,UP(this._delegate,e))}catch(t){throw li(t,"collection()","Firestore.collection()")}}doc(e){try{return new bs(this,EC(this._delegate,e))}catch(t){throw li(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ci(this,function DV(n,e){if(n=Gt(n,lw),Zx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new be(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(n,null,(t=e,new du(qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw li(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fU(n,e,t){n=Gt(n,bn);const r=Object.assign(Object.assign({},tU),t);return function(o){if(o.maxAttempts<1)throw new be(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function vV(n,e,t){const r=new Er;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){const o=yield(u=n,vC(u).then(c=>c.datastore));var u;new hV(n.asyncQueue,o,t,e,r).run()})),r.promise}(tr(n),o=>e(new hU(n,o)),r)}(this._delegate,t=>e(new g1(this,t)))}batch(){return tr(this._delegate),new m1(new a1(this._delegate,e=>tm(this._delegate,e)))}loadBundle(e){return function PV(n,e){const t=tr(n=Gt(n,bn)),r=new bV;return function wV(n,e,t,r){const o=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return TP(_,D);if(_ instanceof ArrayBuffer)return TP(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new cV(_,c);var _}(t,ow(e));n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){!function uV(n,e,t){const r=Ge(n);var o;(o=(0,q.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(k,z){const te=Ge(k),De=Dr(z.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Me=>te.Ns.getBundleMetadata(Me,z.id)).then(Me=>!!Me&&Me.createTime.compareTo(De)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(k=_).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);p._updateProgress(gP(_));const D=new $L(_,u.localStore,c.It);let b=yield c.wc();for(;b;){const k=yield D.Ou(b);k&&p._updateProgress(k),b=yield c.wc()}const T=yield D.complete();return yield fu(u,T.Bu,void 0),yield function(k,z){const te=Ge(k);return te.persistence.runTransaction("Save bundle","readwrite",De=>te.Ns.saveBundleMetadata(De,z))}(u.localStore,_),p._completeWith(T.progress),Promise.resolve(T.$u)}catch(_){return th("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var k}),function(u,c,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield qx(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kV(n,e){return function IV(n,e){return n.asyncQueue.enqueue((0,q.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield wC(n),e)}))}(tr(n=Gt(n,bn)),e).then(t=>t?new Zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ci(this,t):null)}}class MC extends nM{constructor(e){super(),this.firestore=e}convertBytes(e){return new pw(new ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bs.forKey(t,this.firestore,null)}}class g1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}get(e){const t=bh(e);return this._delegate.get(t).then(r=>new gw(this._firestore,new gu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=bh(e);return r?(iM("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bh(e);return this._delegate.delete(t),this}}class m1{constructor(e){this._delegate=e}set(e,t,r){const o=bh(e);return r?(iM("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bh(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ch{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new hw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ch.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ch(e,new MC(e),t),o.set(t,u)),u}}Ch.INSTANCES=new WeakMap;class bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bs(t,new En(t._delegate,r,new je(e)))}static forKey(e,t,r){return new bs(t,new En(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nm(this.firestore,UP(this._delegate,e))}catch(t){throw li(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,He.m9)(e))instanceof En&&BP(this._delegate,e)}set(e,t){t=iM("DocumentReference.set",t);try{return t?u1(this._delegate,e,t):u1(this._delegate,e)}catch(r){throw li(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?l1(this._delegate,e):l1(this._delegate,e,t,...r)}catch(o){throw li(o,"updateDoc()","DocumentReference.update()")}}delete(){return function lU(n){return tm(Gt(n.firestore,bn),[new Bg(n._key,Cn.none())])}(this._delegate)}onSnapshot(...e){const t=y1(e),r=_1(e,o=>new gw(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return c1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function iU(n){n=Gt(n,En);const e=Gt(n.firestore,bn),t=tr(e),r=new Dh(e);return function mV(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(o,u,c){try{const p=yield function(_,D){const b=Ge(_);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,D))}(o,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new be(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Yg(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(o,u,c){return r.apply(this,arguments)})(yield wC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new gu(e,r,n._key,o,new Eh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function sU(n){n=Gt(n,En);const e=Gt(n.firestore,bn);return RP(tr(e),n._key,{source:"server"}).then(t=>rM(e,n,t))}(this._delegate):function rU(n){n=Gt(n,En);const e=Gt(n.firestore,bn);return RP(tr(e),n._key).then(t=>rM(e,n,t))}(this._delegate),t.then(r=>new gw(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}function li(n,e,t){return n.message=n.message.replace(e,t),n}function y1(n){for(const e of n)if("object"==typeof e&&!sM(e))return e;return{}}function _1(n,e){var t,r;let o;return o=sM(n[0])?n[0]:sM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class gw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JP(this._delegate,e._delegate)}}class mw extends gw{data(e){const t=this._delegate.data(e);return function Ik(n,e){n||Xe()}(void 0!==t),t}}class ci{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MC(e)}where(e,t,r){try{return new ci(this.firestore,Jl(this._delegate,function WV(n,e,t){const r=e,o=SC("where",n);return new zV(o,r,t)}(e,t,r)))}catch(o){throw li(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ci(this.firestore,Jl(this._delegate,function KV(n,e="asc"){const t=e,r=SC("orderBy",n);return new qV(r,t)}(e,t)))}catch(r){throw li(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ci(this.firestore,Jl(this._delegate,function ZV(n){return LP("limit",n),new e1("limit",n,"F")}(e)))}catch(t){throw li(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ci(this.firestore,Jl(this._delegate,function YV(n){return LP("limitToLast",n),new e1("limitToLast",n,"L")}(e)))}catch(t){throw li(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ci(this.firestore,Jl(this._delegate,function QV(...n){return new t1("startAt",n,!0)}(...e)))}catch(t){throw li(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ci(this.firestore,Jl(this._delegate,function JV(...n){return new t1("startAfter",n,!1)}(...e)))}catch(t){throw li(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ci(this.firestore,Jl(this._delegate,function XV(...n){return new n1("endBefore",n,!1)}(...e)))}catch(t){throw li(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ci(this.firestore,Jl(this._delegate,function eU(...n){return new n1("endAt",n,!0)}(...e)))}catch(t){throw li(t,"endAt()","Query.endAt()")}}isEqual(e){return $P(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function aU(n){n=Gt(n,Zr);const e=Gt(n.firestore,bn),t=tr(e),r=new Dh(e);return function yV(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(o,u,c){try{const p=yield hC(o,u,!0),_=new _P(u,p.Hi),D=_.ju(p.documents),b=_.applyChanges(D,!1);c.resolve(b.snapshot)}catch(p){const _=Yg(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(o,u,c){return r.apply(this,arguments)})(yield wC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ql(e,r,n,o))}(this._delegate):"server"===e?.source?function uU(n){n=Gt(n,Zr);const e=Gt(n.firestore,bn),t=tr(e),r=new Dh(e);return NP(t,n._query,{source:"server"}).then(o=>new Ql(e,r,n,o))}(this._delegate):function oU(n){n=Gt(n,Zr);const e=Gt(n.firestore,bn),t=tr(e),r=new Dh(e);return XP(n._query),NP(t,n._query).then(o=>new Ql(e,r,n,o))}(this._delegate),t.then(r=>new oM(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=y1(e),r=_1(e,o=>new oM(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return c1(this._delegate,t,r)}withConverter(e){return new ci(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}class CU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ci(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mw(this._firestore,r))})}isEqual(e){return JP(this._delegate,e._delegate)}}class nm extends ci{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bs(this.firestore,e):null}doc(e){try{return new bs(this.firestore,void 0===e?EC(this._delegate):EC(this._delegate,e))}catch(t){throw li(t,"doc()","CollectionReference.doc()")}}add(e){return function cU(n,e){const t=Gt(n.firestore,bn),r=EC(n),o=xC(n.converter,e);return tm(t,[bC(wh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new bs(this.firestore,t))}isEqual(e){return BP(this._delegate,e._delegate)}withConverter(e){return new nm(this.firestore,this._delegate.withConverter(e?Ch.getInstance(this.firestore,e):null))}}function bh(n){return Gt(n,En)}class aM{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new aM(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,He.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Th{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gU(){return new Qx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Th(e)}static delete(){const e=function pU(){return new cw("deleteField")}();return e._methodName="FieldValue.delete",new Th(e)}static arrayUnion(...e){const t=function mU(...n){return new UV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Th(t)}static arrayRemove(...e){const t=function yU(...n){return new BV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Th(t)}static increment(e){const t=function _U(n){return new $V("increment",n)}(e);return t._methodName="FieldValue.increment",new Th(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bU={Firestore:p1,GeoPoint:DC,Timestamp:Dn,Blob:pw,Transaction:g1,WriteBatch:m1,DocumentReference:bs,DocumentSnapshot:gw,Query:ci,QueryDocumentSnapshot:mw,QuerySnapshot:oM,CollectionReference:nm,FieldPath:aM,FieldValue:Th,setLogLevel:function DU(n){!function wk(n){Ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function AU(n){(function TU(n,e){n.INTERNAL.registerComponent(new ii.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},bU)))})(n,(e,t)=>new p1(e,t,new EU)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(LA.Z);var SU=N(6451);class xU extends Oi.x{constructor(e=1/0,t=1/0,r=Ly){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var MU=N(3099);function v1(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,MU.B)({connector:()=>new xU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function w1(n,e){return(0,ki.m)(e)?Ln(()=>n,e):Ln(()=>n)}class rm{constructor(e){return e}}class I1{constructor(){return(0,Ot.getApps)()}}const uM=new g.OlP("angularfire2._apps"),NU={provide:rm,useFactory:function RU(n){return n&&1===n.length?n[0]:new rm((0,Ot.getApp)())},deps:[[new g.FiY,uM]]},OU={provide:I1,deps:[[new g.FiY,uM]]};function PU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new rm(r)}}let kU=(()=>{class n{constructor(t){(0,Ot.registerVersion)("angularfire",$p.full,"core"),(0,Ot.registerVersion)("angularfire",$p.full,"app"),(0,Ot.registerVersion)("angular",g.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.Lbi))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[NU,OU]}),n})();function FU(n,...e){return{ngModule:kU,providers:[{provide:uM,useFactory:PU(n),multi:!0,deps:[g.R0b,g.zs3,Ud,...e]}]}}const LU=ZE(Ot.initializeApp,!0),E1=new Map,VU={activated:!1,tokenObservers:[]},UU={initialized:!1,enabled:!1};function Tr(n){return E1.get(n)||VU}function co(n,e){E1.set(n,e)}function RC(){return UU}class GU{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,q.Z)(function*(){t.stop();try{t.pending=new He.BH,yield function zU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new He.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const di=new He.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function C1(n){if(!Tr(n).activated)throw di.create("use-before-activation",{appName:n.name})}function dM(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,q.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const z=yield c.getHeartbeatsHeader();z&&(u["X-Firebase-Client"]=z)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,D;try{_=yield fetch(n,p)}catch(z){throw di.create("fetch-network-error",{originalErrorMessage:null===(r=z)||void 0===r?void 0:r.message})}if(200!==_.status)throw di.create("fetch-status-error",{httpStatus:_.status});try{D=yield _.json()}catch(z){throw di.create("fetch-parse-error",{originalErrorMessage:null===(o=z)||void 0===o?void 0:o.message})}const b=D.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const T=1e3*Number(b[1]),k=Date.now();return{token:D.token,expireTimeMillis:k+T,issuedAtTimeMillis:k}}),hM.apply(this,arguments)}function ZU(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const yw="firebase-app-check-store";let PC=null;function T1(){return PC||(PC=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(di.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(yw,{keyPath:"compositeKey"})}}catch(r){e(di.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),PC)}function fM(){return fM=(0,q.Z)(function*(n,e){const r=(yield T1()).transaction(yw,"readwrite"),u=r.objectStore(yw).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var D;p(di.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})}),fM.apply(this,arguments)}const _w=new _r.Yd("@firebase/app-check");function M1(n,e){return(0,He.hl)()?function XU(n,e){return function A1(n,e){return fM.apply(this,arguments)}(function x1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_w.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function R1(){return RC().enabled}function N1(){return yM.apply(this,arguments)}function yM(){return yM=(0,q.Z)(function*(){const n=RC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),yM.apply(this,arguments)}const sB={error:"UNKNOWN_ERROR"};function oB(n){return He.US.encodeString(JSON.stringify(n),!1)}function kC(n){return _M.apply(this,arguments)}function _M(){return _M=(0,q.Z)(function*(n,e=!1){const t=n.app;C1(t);const r=Tr(t);let u,o=r.token;if(!o){const _=yield r.cachedTokenPromise;_&&FC(_)&&(o=_)}if(!e&&o&&FC(o))return{token:o.token};let p,c=!1;if(R1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=dM(ZU(t,yield N1()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),c=!0);const _=yield r.exchangeTokenPromise;return yield M1(t,_),co(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),o=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?_w.warn(_.message):_w.error(_),u=_}return o?(p={token:o.token},co(t,Object.assign(Object.assign({},r),{token:o})),yield M1(t,o)):p=uB(u),c&&P1(t,p),p}),_M.apply(this,arguments)}function wM(n,e){const t=Tr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),co(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function O1(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function aB(n){const{app:e}=n;return new GU((0,q.Z)(function*(){let r;if(r=Tr(e).token?yield kC(n,!0):yield kC(n),r.error)throw r.error}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),co(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function P1(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function FC(n){return n.expireTimeMillis-Date.now()>0}function uB(n){return{token:oB(sB),error:n}}class lB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)wM(this.app,t.next);return Promise.resolve()}}const j1="app-check-internal";!function DB(){(0,Ot._registerComponent)(new ii.wA("app-check",n=>function cB(n,e){return new lB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(j1).initialize()})),(0,Ot._registerComponent)(new ii.wA(j1,n=>function dB(n){return{getToken:e=>kC(n,e),addTokenListener:e=>function vM(n,e,t,r){const{app:o}=n,u=Tr(o),c={next:t,error:r,type:e};if(co(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&FC(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),O1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>O1(n))}(n,"INTERNAL",e),removeTokenListener:e=>wM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ot.registerVersion)("@firebase/app-check","0.5.12")}();class VC{constructor(){return nv("app-check")}}typeof window<"u"&&window,N(127);const G1=new g.OlP("angularfire2.auth.use-emulator"),z1=new g.OlP("angularfire2.auth.settings"),W1=new g.OlP("angularfire2.auth.tenant-id"),q1=new g.OlP("angularfire2.auth.langugage-code"),K1=new g.OlP("angularfire2.auth.use-device-language"),Z1=new g.OlP("angularfire.auth.persistence"),Y1=(n,e,t,r,o,u,c,p)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),c)for(const[D,b]of Object.entries(c))_.settings[D]=b;return p&&_.setPersistence(p),_},[t,r,o,u,c,p]);let Q1=(()=>{class n{constructor(t,r,o,u,c,p,_,D,b,T,k,z){const te=new Oi.x,De=et(void 0).pipe((0,El.Q)(c.outsideAngular),Ln(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,tt.U)(()=>(0,vr.on)(t,u,r)),(0,tt.U)(Me=>Y1(Me,u,p,D,b,T,_,k)),v1({bufferSize:1,refCount:!1}));if(la(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{De.pipe(ei()).subscribe();const gt=De.pipe(Ln(ft=>ft.getRedirectResult().then(mt=>mt,()=>null)),oi,v1({bufferSize:1,refCount:!1})),_t=De.pipe(Ln(ft=>new Gn.y(mt=>({unsubscribe:u.runOutsideAngular(()=>ft.onAuthStateChanged(Vt=>mt.next(Vt),Vt=>mt.error(Vt),()=>mt.complete()))})))),Et=De.pipe(Ln(ft=>new Gn.y(mt=>({unsubscribe:u.runOutsideAngular(()=>ft.onIdTokenChanged(Vt=>mt.next(Vt),Vt=>mt.error(Vt),()=>mt.complete()))}))));this.authState=gt.pipe(w1(_t),(0,kd.R)(c.outsideAngular),(0,El.Q)(c.insideAngular)),this.user=gt.pipe(w1(Et),(0,kd.R)(c.outsideAngular),(0,El.Q)(c.insideAngular)),this.idToken=this.user.pipe(Ln(ft=>ft?(0,Yt.D)(ft.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Ln(ft=>ft?(0,Yt.D)(ft.getIdTokenResult()):et(null))),this.credential=(0,SU.T)(gt,te,this.authState.pipe(Gr(ft=>!ft))).pipe((0,tt.U)(ft=>ft?.user?ft:null),(0,kd.R)(c.outsideAngular),(0,El.Q)(c.insideAngular))}return(0,vr.pX)(this,De,u,{spy:{apply:(Me,gt,_t)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&_t.then(Et=>te.next(Et))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(vr.Dh),g.LFG(vr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ud),g.LFG(G1,8),g.LFG(z1,8),g.LFG(W1,8),g.LFG(q1,8),g.LFG(K1,8),g.LFG(Z1,8),g.LFG(VC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function J1(n,e){return function xB(n,e=wI){return new Gn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bM(n,e){return J1(n,e).pipe((0,tt.U)(t=>({payload:t,type:"query"})))}function UC(n,e){return bM(n,e).pipe(Zs(void 0),Gp(),(0,tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=o.find(b=>b.doc.ref.isEqual(c.ref)),D=t?.payload.docs.find(b=>b.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function X1(n,e,t){return UC(n,t).pipe(bo((r,o)=>function RB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function NB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function FA(n,e=zs.y){return n=n??Rr,(0,Fn.e)((t,r)=>{let o,u=!0;t.subscribe((0,zn.x)(r,c=>{const p=e(c);(u||!n(o,p))&&(u=!1,o=p,r.next(c))}))})}(),(0,tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function TM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function ek(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class tk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Zs(void 0),Gp(),Gr(([r,o])=>o.length>0||!r),(0,tt.U)(([r,o])=>o),oi)}auditTrail(e){return this.stateChanges(e).pipe(bo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ek(e);return X1(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi)}valueChanges(e={}){return bM(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),oi)}get(e){return(0,Yt.D)(this.query.get(e)).pipe(oi)}add(e){return this.ref.add(e)}doc(e){return new nk(this.ref.doc(e),this.afs)}}class nk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=rk(r,t);return new tk(o,u,this.afs)}snapshotChanges(){return function MB(n,e){return J1(n,e).pipe(Zs(void 0),Gp(),(0,tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oi)}valueChanges(e={}){return this.snapshotChanges().pipe((0,tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yt.D)(this.ref.get(e)).pipe(oi)}}class OB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UC(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gr(t=>t.length>0),oi):UC(this.query,this.afs.schedulers.outsideAngular).pipe(oi)}auditTrail(e){return this.stateChanges(e).pipe(bo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=ek(e);return X1(this.query,t,this.afs.schedulers.outsideAngular).pipe(oi)}valueChanges(e={}){return bM(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),oi)}get(e){return(0,Yt.D)(this.query.get(e)).pipe(oi)}}const PB=new g.OlP("angularfire2.enableFirestorePersistence"),kB=new g.OlP("angularfire2.firestore.persistenceSettings"),FB=new g.OlP("angularfire2.firestore.settings"),LB=new g.OlP("angularfire2.firestore.use-emulator");function rk(n,e=(t=>t)){return{query:e(n),ref:n}}let VB=(()=>{class n{constructor(t,r,o,u,c,p,_,D,b,T,k,z,te,De,Me,gt,_t){this.schedulers=_;const Et=(0,vr.on)(t,p,r),ft=b;T&&Y1(Et,p,k,te,De,Me,z,gt),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${Et.name}.firestore`,"AngularFirestore",Et.name,()=>{const mt=p.runOutsideAngular(()=>Et.firestore());if(u&&mt.settings(u),ft&&mt.useEmulator(...ft),o&&!la(c)){const Vt=()=>{try{return(0,Yt.D)(mt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(hr){return typeof console<"u"&&console.warn(hr),et(!1)}};return[mt,p.runOutsideAngular(Vt)]}return[mt,et(!1)]},[u,ft,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=rk(o,r),p=this.schedulers.ngZone.run(()=>u);return new tk(p,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new OB(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new nk(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(vr.Dh),g.LFG(vr.xv,8),g.LFG(PB,8),g.LFG(FB,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Ud),g.LFG(kB,8),g.LFG(LB,8),g.LFG(Q1,8),g.LFG(G1,8),g.LFG(z1,8),g.LFG(W1,8),g.LFG(q1,8),g.LFG(K1,8),g.LFG(Z1,8),g.LFG(VC,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AM=(()=>{class n{constructor(t){this.firestore=t,this.myName="Macaco",this.mensajeLenght=1}crearSala(t){return console.log("[creandoSala] "+t),this.firestore.collection("salas").doc(t).set({owner:t}),this.firestore.collection("salas").doc(t).valueChanges().subscribe(o=>{console.log(o+"DAtosssss")}),this.firestore.collection("salas").doc(t).collection("Mensajes").doc("PrimerMensaje").set({nick:"Admin",mensaje:"Bienvenidos",id:1})}UnirseSala(){}getSalas(){return this.firestore.collection("salas")}getMensajes(t){return this.firestore.collection("salas").doc(t).collection("Mensajes")}enviarMensajeSala(t,r){return console.log(t),console.log(r),console.log(this.myName),this.getLenghtMensajes(t),console.log(this.mensajeLenght),this.firestore.collection("salas").doc(t).collection("Mensajes").add({nick:this.myName,mensaje:r,id:this.mensajeLenght})}getLenghtMensajes(t){this.firestore.collection("salas").doc(t).collection("Mensajes").valueChanges().subscribe(o=>{this.mensajeLenght=o.length})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(VB))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UB=(()=>{class n{constructor(t,r,o){this.fb=t,this.dataService=r,this.routers=o}ngOnInit(){this.inputForm=this.fb.group({nick:["",Kb.required]})}crearSala(){this.dataService.crearSala(this.inputForm.value.nick),this.dataService.myName=this.inputForm.value.nick,this.routers.navigate(["/room/"+this.inputForm.value.nick])}leer(){this.dataService.myName=this.inputForm.value.nick,this.routers.navigate(["/rooms"])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(vI),g.Y36(AM),g.Y36(Nn))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:3,consts:[[1,"contenedor","justify-content-center"],[1,"text-center","mb-5"],[3,"formGroup"],[1,"row","align-items-center","mb-3"],[1,"col-4"],["formControlName","nick","type","text",1,"col-6","text-center"],[1,"row","mt-5"],[1,"col-6"],[1,"btn",3,"disabled","click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1",1),g._uU(2,"Macacos Online"),g.qZA(),g.TgZ(3,"form",2)(4,"div",3)(5,"label",4),g._uU(6,"Nick"),g.qZA(),g._UZ(7,"input",5),g.qZA(),g.TgZ(8,"div",6)(9,"div",7)(10,"button",8),g.NdJ("click",function(){return r.leer()}),g._uU(11,"Ingresar sala"),g.qZA()(),g.TgZ(12,"div",4)(13,"button",8),g.NdJ("click",function(){return r.crearSala()}),g._uU(14,"Crear sala"),g.qZA()()()()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.inputForm),g.xp6(7),g.Q6J("disabled",r.inputForm.invalid),g.xp6(3),g.Q6J("disabled",r.inputForm.invalid))},dependencies:[Yf,tl,pd,Wi,Id,ol],styles:[".contenedor[_ngcontent-%COMP%]{display:grid;align-items:center;margin:5% 10%;max-width:1000px;background:rgb(34,193,195);background:linear-gradient(0deg,rgba(34,193,195,1) 0%,rgba(221,45,253,1) 100%);border-radius:10px;padding-top:4%;padding-bottom:10%}h1[_ngcontent-%COMP%]{color:#6dca7b;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}label[_ngcontent-%COMP%]{font-weight:700;font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif}.btn[_ngcontent-%COMP%]{font-style:inherit;width:200px;height:50px;border-radius:20px;background:rgb(255,253,121);box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px}.btn[_ngcontent-%COMP%]:hover{background:rgb(139,184,255);font-style:oblique}ul[_ngcontent-%COMP%]{list-style-type:none}input[_ngcontent-%COMP%]{width:450px;height:40px}"]}),n})();function BB(n,e){if(1&n&&(g.TgZ(0,"ul",11)(1,"li",12)(2,"label",13),g._uU(3),g.qZA(),g.TgZ(4,"p",14),g._uU(5),g.qZA()()()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.nick),g.xp6(2),g.Oqu(t.mensaje)}}let $B=(()=>{class n{constructor(t,r,o){this.router=t,this.dataService=r,this.fb=o}ngOnInit(){this.roomName=this.router.snapshot.paramMap.get("id"),this.router.queryParams.subscribe(t=>{console.log(t)}),this.dataService.getMensajes(this.roomName).valueChanges().subscribe(t=>{this.mensajes=t}),this.inputForm=this.fb.group({text:["",Kb.required]})}enviarMensaje(){this.dataService.enviarMensajeSala(this.roomName,this.inputForm.value.text),this.inputForm.controls.text.setValue("")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ps),g.Y36(AM),g.Y36(vI))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-room"]],decls:15,vars:3,consts:[[1,"contenedor","align-items-center"],[1,"row"],[1,"sidebar","col-3"],[1,"row","align-items-center","mt-3"],[1,"text-center"],[1,"col-9"],["data-bs-spy","scroll",1,"chat"],["class","list-group",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","text","type","text",1,"text"],[1,"btn",3,"click"],[1,"list-group"],[1,"boxMensaje","align-items-center"],[1,"ms-3"],[1,"text-end","mr-3"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),g._uU(5),g.qZA()()(),g.TgZ(6,"div",5)(7,"h1",4),g._uU(8,"Chat"),g.qZA(),g.TgZ(9,"div",6),g.YNc(10,BB,6,2,"ul",7),g.qZA(),g.TgZ(11,"form",8),g._UZ(12,"input",9),g.TgZ(13,"button",10),g.NdJ("click",function(){return r.enviarMensaje()}),g._uU(14,"Enviar"),g.qZA()()()()()),2&t&&(g.xp6(5),g.Oqu(r.roomName),g.xp6(5),g.Q6J("ngForOf",r.mensajes),g.xp6(1),g.Q6J("formGroup",r.inputForm))},dependencies:[gi,Yf,tl,pd,Wi,Id,ol],styles:[".sidebar[_ngcontent-%COMP%]{margin-left:auto;width:20%;height:100%}.chat[_ngcontent-%COMP%]{height:500px;width:99%;background-color:#de90908b;border-radius:25px;overflow:scroll}.text[_ngcontent-%COMP%]{width:75%;height:40px}button[_ngcontent-%COMP%]{margin-left:10px;background-color:#8bb8ff;width:20%;height:40px}.a[_ngcontent-%COMP%]{transform:translateY(50%)}.btn[_ngcontent-%COMP%]:hover{background:aqua;font-style:oblique}.boxMensaje[_ngcontent-%COMP%]{margin:20px;width:90%;background-color:#74c8fdcb;border-radius:20px}"]}),n})();function jB(n,e){if(1&n&&(g.TgZ(0,"li",4)(1,"div",5)(2,"label",6),g._uU(3),g.qZA()(),g.TgZ(4,"div",5)(5,"button",7),g._uU(6,"Ingresar"),g.qZA()()()),2&n){const t=e.$implicit;g.xp6(3),g.Oqu(t.owner),g.xp6(2),g.MGl("routerLink","/room/",t.owner,"")}}const HB=[{path:"",component:UB},{path:"rooms",component:(()=>{class n{constructor(t){this.dataService=t}ngOnInit(){this.dataService.getSalas().valueChanges().subscribe(t=>{this.rooms=t,console.log(t)}),console.log(this.rooms)}noc(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(AM))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-rooms"]],decls:5,vars:1,consts:[[1,"contenedor","justify-content-center"],[1,"text-center"],[1,"mt-3","list-group"],["class","salaItem row mt-1 align-items-center a",4,"ngFor","ngForOf"],[1,"salaItem","row","mt-1","align-items-center","a"],[1,"col","text-center"],[1,""],[1,"btn",3,"routerLink"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1",1),g._uU(2,"Salas"),g.qZA(),g.TgZ(3,"ul",2),g.YNc(4,jB,7,2,"li",3),g.qZA()()),2&t&&(g.xp6(4),g.Q6J("ngForOf",r.rooms))},dependencies:[gi,dd],styles:[".salaItem[_ngcontent-%COMP%]{width:600px;max-width:600px;height:100px;background-color:#ffffffb3;border:solid 2px}button[_ngcontent-%COMP%]{background-color:#8bb8ff;width:130px;height:50px}.a[_ngcontent-%COMP%]{transform:translateY(50%)}.btn[_ngcontent-%COMP%]:hover{background:aqua;font-style:oblique}"]}),n})()},{path:"room/:id",component:$B}];let GB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[D0.forRoot(HB),D0]}),n})(),zB=(()=>{class n{constructor(){this.title="RealTimeChat"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Qw]}),n})();const SM={firebase:{projectId:"realtimechat-aa615",appId:"1:498915363236:web:f60744da09ee52df491931",storageBucket:"realtimechat-aa615.appspot.com",locationId:"us-central",apiKey:"AIzaSyDtKRSxISM_qnrDdyF17QSIlIhGtDx0I-I",authDomain:"realtimechat-aa615.firebaseapp.com",messagingSenderId:"498915363236",measurementId:"G-QDLC60NKXM"},production:!0};N(8554);class sk{constructor(){return nv("auth")}}class RM{constructor(e){return e}}const ok="firestore",NM=new g.OlP("angularfire2.firestore-instances");function QB(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new RM(r)}}const JB={provide:class ZB{constructor(){return nv(ok)}},deps:[[new g.FiY,NM]]},XB={provide:RM,useFactory:function YB(n,e){const t=function Vd(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(c=>c.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(ok,n,e);return t&&new RM(t)},deps:[[new g.FiY,NM],rm]};let e2=(()=>{class n{constructor(){(0,Ot.registerVersion)("angularfire",$p.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[XB,JB]}),n})();function t2(n,...e){return{ngModule:e2,providers:[{provide:NM,useFactory:QB(n),multi:!0,deps:[g.R0b,g.zs3,Ud,I1,[new g.FiY,sk],[new g.FiY,VC],...e]}]}}const n2=ZE(AV,!0);let r2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[zB]}),n.\u0275inj=g.cJS({providers:[{provide:vr.Dh,useValue:SM.firebase}],imports:[Io,GB,FU(()=>LU(SM.firebase)),t2(()=>n2()),np]}),n})();SM.production&&(0,g.G48)(),va().bootstrapModule(r2).catch(n=>console.error(n))},127:(ut,Ae,N)=>{N.d(Ae,{Z:()=>g.Z});var g=N(3942);g.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(ut,Ae,N)=>{N.r(Ae);var g=N(5861),F=N(3942),R=N(8554),oe=N(2090),Ce=(N(9681),N(1877),N(4859));function ge(){return window}function j(){return(j=(0,g.Z)(function*(Y,P,V){var ue;const{BuildInfo:Ue}=ge();(0,R.aq)(P.sessionId,"AuthEvent did not contain a session ID");const st=yield le(P.sessionId),dt={};return(0,R.ar)()?dt.ibi=Ue.packageName:(0,R.as)()?dt.apn=Ue.packageName:(0,R.at)(Y,"operation-not-supported-in-this-environment"),Ue.displayName&&(dt.appDisplayName=Ue.displayName),dt.sessionId=st,(0,R.au)(Y,V,P.type,void 0,null!==(ue=P.eventId)&&void 0!==ue?ue:void 0,dt)})).apply(this,arguments)}function ke(){return(ke=(0,g.Z)(function*(Y){const{BuildInfo:P}=ge(),V={};(0,R.ar)()?V.iosBundleId=P.packageName:(0,R.as)()?V.androidPackageName=P.packageName:(0,R.at)(Y,"operation-not-supported-in-this-environment"),yield(0,R.av)(Y,V)})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(Y,P,V){const{cordova:ue}=ge();let Ue=()=>{};try{yield new Promise((st,dt)=>{let Ee=null;function qe(){var xt;st();const Zt=null===(xt=ue.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Zt&&Zt(),"function"==typeof V?.close&&V.close()}function Ut(){Ee||(Ee=window.setTimeout(()=>{dt((0,R.aw)(Y,"redirect-cancelled-by-user"))},2e3))}function sn(){"visible"===document?.visibilityState&&Ut()}P.addPassiveListener(qe),document.addEventListener("resume",Ut,!1),(0,R.as)()&&document.addEventListener("visibilitychange",sn,!1),Ue=()=>{P.removePassiveListener(qe),document.removeEventListener("resume",Ut,!1),document.removeEventListener("visibilitychange",sn,!1),Ee&&window.clearTimeout(Ee)}})}finally{Ue()}})).apply(this,arguments)}function le(Y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(Y){const P=Qe(Y),V=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(V)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Qe(Y){if((0,R.aq)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const P=new ArrayBuffer(Y.length),V=new Uint8Array(P);for(let ue=0;ue<Y.length;ue++)V[ue]=Y.charCodeAt(ue);return V}class _e extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(P)),super.onEvent(P)}initialized(){var P=this;return(0,g.Z)(function*(){yield P.initPromise})()}}function ee(Y){return ne.apply(this,arguments)}function ne(){return(ne=(0,g.Z)(function*(Y){const P=yield K()._get(se(Y));return P&&(yield K()._remove(se(Y))),P})).apply(this,arguments)}function W(){const Y=[],P="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const ue=Math.floor(Math.random()*P.length);Y.push(P.charAt(ue))}return Y.join("")}function K(){return(0,R.ay)(R.b)}function se(Y){return(0,R.az)("authEvent",Y.config.apiKey,Y.name)}function xe(Y){if(!Y?.includes("?"))return{};const[P,...V]=Y.split("?");return(0,oe.zd)(V.join("?"))}function Ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function Rt(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function nr(Y=(0,oe.z$)()){return!("file:"!==Rt()&&"ionic:"!==Rt()&&"capacitor:"!==Rt()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function fi(){try{const Y=self.localStorage,P=R.aI();if(Y)return Y.setItem(P,"1"),Y.removeItem(P),!function es(Y=(0,oe.z$)()){return function hi(){return(0,oe.w1)()&&11===document?.documentMode}()||function yn(Y=(0,oe.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,oe.hl)()}catch{return Ar()&&(0,oe.hl)()}return!1}function Ar(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function rr(){return(function St(){return"http:"===Rt()||"https:"===Rt()}()||(0,oe.ru)()||nr())&&!function ho(){return(0,oe.b$)()||(0,oe.UG)()}()&&fi()&&!Ar()}function ts(){return nr()&&typeof document<"u"}function We(){return(We=(0,g.Z)(function*(){return!!ts()&&new Promise(Y=>{const P=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),Y(!0)})})})).apply(this,arguments)}const Tn={LOCAL:"local",NONE:"none",SESSION:"session"},en=R.ax,Vr="persistence";function dn(Y){return _n.apply(this,arguments)}function _n(){return(_n=(0,g.Z)(function*(Y){yield Y._initializationPromise;const P=nt(),V=R.az(Vr,Y.config.apiKey,Y.name);P&&P.setItem(V,Y._getPersistence())})).apply(this,arguments)}function nt(){var Y;try{return(null===(Y=function ir(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const rt=R.ax;class bt{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class $t{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(P){var V=this;return(0,g.Z)(function*(){const ue=P._key();let Ue=V.eventManagers.get(ue);return Ue||(Ue=new _e(P),V.eventManagers.set(ue,Ue),V.attachCallbackListeners(P,Ue)),Ue})()}_openPopup(P){(0,R.at)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,V,ue,Ue){var st=this;return(0,g.Z)(function*(){!function ie(Y){var P,V,ue,Ue,st,dt,Ee,qe,Ut,sn;const xt=ge();(0,R.ax)("function"==typeof(null===(P=xt?.universalLinks)||void 0===P?void 0:P.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(typeof(null===(V=xt?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(st=null===(Ue=null===(ue=xt?.cordova)||void 0===ue?void 0:ue.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===st?void 0:st.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(qe=null===(Ee=null===(dt=xt?.cordova)||void 0===dt?void 0:dt.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===qe?void 0:qe.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(sn=null===(Ut=xt?.cordova)||void 0===Ut?void 0:Ut.InAppBrowser)||void 0===sn?void 0:sn.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const dt=yield st._initialize(P);yield dt.initialized(),dt.resetRedirect(),(0,R.aD)(),yield st._originValidation(P);const Ee=function he(Y,P,V=null){return{type:P,eventId:V,urlResponse:null,sessionId:W(),postBody:null,tenantId:Y.tenantId,error:(0,R.aw)(Y,"no-auth-event")}}(P,ue,Ue);yield function Le(Y,P){return K()._set(se(Y),P)}(P,Ee);const qe=yield function H(Y,P,V){return j.apply(this,arguments)}(P,Ee,V),Ut=yield function Pe(Y){const{cordova:P}=ge();return new Promise(V=>{P.plugins.browsertab.isAvailable(ue=>{let Ue=null;ue?P.plugins.browsertab.openUrl(Y):Ue=P.InAppBrowser.open(Y,(0,R.ap)()?"_blank":"_system","location=yes"),V(Ue)})})}(qe);return function me(Y,P,V){return ze.apply(this,arguments)}(P,dt,Ut)})()}_isIframeWebStorageSupported(P,V){throw new Error("Method not implemented.")}_originValidation(P){const V=P._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function Z(Y){return ke.apply(this,arguments)}(P)),this.originValidationPromises[V]}attachCallbackListeners(P,V){const{universalLinks:ue,handleOpenURL:Ue,BuildInfo:st}=ge(),dt=setTimeout((0,g.Z)(function*(){yield ee(P),V.onEvent(Ve())}),500),Ee=function(){var sn=(0,g.Z)(function*(xt){clearTimeout(dt);const Zt=yield ee(P);let pi=null;Zt&&xt?.url&&(pi=function ce(Y,P){var V,ue;const Ue=function Se(Y){const P=xe(Y),V=P.link?decodeURIComponent(P.link):void 0,ue=xe(V).link,Ue=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return xe(Ue).link||Ue||ue||V||Y}(P);if(Ue.includes("/__/auth/callback")){const st=xe(Ue),dt=st.firebaseError?function X(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,Ee=null===(ue=null===(V=dt?.code)||void 0===V?void 0:V.split("auth/"))||void 0===ue?void 0:ue[1],qe=Ee?(0,R.aw)(Ee):null;return qe?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:Ue,postBody:null}}return null}(Zt,xt.url)),V.onEvent(pi||Ve())});return function(Zt){return sn.apply(this,arguments)}}();typeof ue<"u"&&"function"==typeof ue.subscribe&&ue.subscribe(null,Ee);const qe=Ue,Ut=`${st.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var sn=(0,g.Z)(function*(xt){if(xt.toLowerCase().startsWith(Ut)&&Ee({url:xt}),"function"==typeof qe)try{qe(xt)}catch(Zt){console.error(Zt)}});return function(xt){return sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(P){var V=this;return(0,g.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,V,ue,Ue){var st=this;return(0,g.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(P,V,ue,Ue)})()}_openRedirect(P,V,ue,Ue){var st=this;return(0,g.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(P,V,ue,Ue)})()}_isIframeWebStorageSupported(P,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,V)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return ts()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,g.Z)(function*(){if(P.underlyingResolver)return;const V=yield function ns(){return We.apply(this,arguments)}();P.underlyingResolver=V?P.cordovaResolver:P.browserResolver})()}}function fr(Y){return Y.unwrap()}function or(Y){return ar(Y)}function ar(Y){const{_tokenResponse:P}=Y instanceof oe.ZR?Y.customData:Y;if(!P)return null;if(!(Y instanceof oe.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return R.P.credentialFromResult(Y);const V=P.providerId;if(!V||V===R.o.PASSWORD)return null;let ue;switch(V){case R.o.GOOGLE:ue=R.Q;break;case R.o.FACEBOOK:ue=R.N;break;case R.o.GITHUB:ue=R.T;break;case R.o.TWITTER:ue=R.W;break;default:const{oauthIdToken:Ue,oauthAccessToken:st,oauthTokenSecret:dt,pendingToken:Ee,nonce:qe}=P;return st||dt||Ue||Ee?Ee?V.startsWith("saml.")?R.aL._create(V,Ee):R.J._fromParams({providerId:V,signInMethod:V,pendingToken:Ee,idToken:Ue,accessToken:st}):new R.U(V).credential({idToken:Ue,accessToken:st,rawNonce:qe}):null}return Y instanceof oe.ZR?ue.credentialFromError(Y):ue.credentialFromResult(Y)}function Dt(Y,P){return P.catch(V=>{throw V instanceof oe.ZR&&function pt(Y,P){var V,ue;const Ue=null===(V=P.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ue=P)||void 0===ue?void 0:ue.code))P.resolver=new G(Y,R.an(Y,P));else if(Ue){const st=ar(P),dt=P;st&&(dt.credential=st,dt.tenantId=Ue.tenantId||void 0,dt.email=Ue.email||void 0,dt.phoneNumber=Ue.phoneNumber||void 0)}}(Y,V),V}).then(V=>{const Ue=V.user;return{operationType:V.operationType,credential:or(V),additionalUserInfo:R.al(V),user:L.getOrCreate(Ue)}})}function Yr(Y,P){return kt.apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(Y,P){const V=yield P;return{verificationId:V.verificationId,confirm:ue=>Dt(Y,V.confirm(ue))}})).apply(this,arguments)}class G{constructor(P,V){this.resolver=V,this.auth=function sr(Y){return Y.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return Dt(fr(this.auth),this.resolver.resolveSignIn(P))}}class L{constructor(P){this._delegate=P,this.multiFactor=R.ao(P)}static getOrCreate(P){return L.USER_MAP.has(P)||L.USER_MAP.set(P,new L(P)),L.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var V=this;return(0,g.Z)(function*(){return Dt(V.auth,R.Z(V._delegate,P))})()}linkWithPhoneNumber(P,V){var ue=this;return(0,g.Z)(function*(){return Yr(ue.auth,R.l(ue._delegate,P,V))})()}linkWithPopup(P){var V=this;return(0,g.Z)(function*(){return Dt(V.auth,R.d(V._delegate,P,bt))})()}linkWithRedirect(P){var V=this;return(0,g.Z)(function*(){return yield dn(R.aE(V.auth)),R.g(V._delegate,P,bt)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var V=this;return(0,g.Z)(function*(){return Dt(V.auth,R._(V._delegate,P))})()}reauthenticateWithPhoneNumber(P,V){return Yr(this.auth,R.r(this._delegate,P,V))}reauthenticateWithPopup(P){return Dt(this.auth,R.e(this._delegate,P,bt))}reauthenticateWithRedirect(P){var V=this;return(0,g.Z)(function*(){return yield dn(R.aE(V.auth)),R.h(V._delegate,P,bt)})()}sendEmailVerification(P){return R.ab(this._delegate,P)}unlink(P){var V=this;return(0,g.Z)(function*(){return yield R.ak(V._delegate,P),V})()}updateEmail(P){return R.ag(this._delegate,P)}updatePassword(P){return R.ah(this._delegate,P)}updatePhoneNumber(P){return R.u(this._delegate,P)}updateProfile(P){return R.af(this._delegate,P)}verifyBeforeUpdateEmail(P,V){return R.ac(this._delegate,P,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}L.USER_MAP=new WeakMap;const O=R.ax;let U=(()=>{class Y{constructor(V,ue){if(this.app=V,ue.isInitialized())return this._delegate=ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=V.options;O(Ue,"invalid-api-key",{appName:V.name}),O(Ue,"invalid-api-key",{appName:V.name});const st=typeof window<"u"?bt:void 0;this._delegate=ue.initialize({options:{persistence:pe(Ue,V.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?L.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,ue){R.G(this._delegate,V,ue)}applyActionCode(V){return R.a2(this._delegate,V)}checkActionCode(V){return R.a3(this._delegate,V)}confirmPasswordReset(V,ue){return R.a1(this._delegate,V,ue)}createUserWithEmailAndPassword(V,ue){var Ue=this;return(0,g.Z)(function*(){return Dt(Ue._delegate,R.a5(Ue._delegate,V,ue))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return R.aa(this._delegate,V)}isSignInWithEmailLink(V){return R.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,g.Z)(function*(){O(rr(),V._delegate,"operation-not-supported-in-this-environment");const ue=yield R.j(V._delegate,bt);return ue?Dt(V._delegate,Promise.resolve(ue)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function Jt(Y,P){(0,R.aE)(Y)._logFramework(P)}(this._delegate,V)}onAuthStateChanged(V,ue,Ue){const{next:st,error:dt,complete:Ee}=$(V,ue,Ue);return this._delegate.onAuthStateChanged(st,dt,Ee)}onIdTokenChanged(V,ue,Ue){const{next:st,error:dt,complete:Ee}=$(V,ue,Ue);return this._delegate.onIdTokenChanged(st,dt,Ee)}sendSignInLinkToEmail(V,ue){return R.a7(this._delegate,V,ue)}sendPasswordResetEmail(V,ue){return R.a0(this._delegate,V,ue||void 0)}setPersistence(V){var ue=this;return(0,g.Z)(function*(){let Ue;switch(function Ts(Y,P){en(Object.values(Tn).includes(P),Y,"invalid-persistence-type"),(0,oe.b$)()?en(P!==Tn.SESSION,Y,"unsupported-persistence-type"):(0,oe.UG)()?en(P===Tn.NONE,Y,"unsupported-persistence-type"):Ar()?en(P===Tn.NONE||P===Tn.LOCAL&&(0,oe.hl)(),Y,"unsupported-persistence-type"):en(P===Tn.NONE||fi(),Y,"unsupported-persistence-type")}(ue._delegate,V),V){case Tn.SESSION:Ue=R.a;break;case Tn.LOCAL:Ue=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case Tn.NONE:Ue=R.L;break;default:return R.at("argument-error",{appName:ue._delegate.name})}return ue._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return Dt(this._delegate,R.X(this._delegate))}signInWithCredential(V){return Dt(this._delegate,R.Y(this._delegate,V))}signInWithCustomToken(V){return Dt(this._delegate,R.$(this._delegate,V))}signInWithEmailAndPassword(V,ue){return Dt(this._delegate,R.a6(this._delegate,V,ue))}signInWithEmailLink(V,ue){return Dt(this._delegate,R.a9(this._delegate,V,ue))}signInWithPhoneNumber(V,ue){return Yr(this._delegate,R.s(this._delegate,V,ue))}signInWithPopup(V){var ue=this;return(0,g.Z)(function*(){return O(rr(),ue._delegate,"operation-not-supported-in-this-environment"),Dt(ue._delegate,R.c(ue._delegate,V,bt))})()}signInWithRedirect(V){var ue=this;return(0,g.Z)(function*(){return O(rr(),ue._delegate,"operation-not-supported-in-this-environment"),yield dn(ue._delegate),R.f(ue._delegate,V,bt)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return R.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=Tn,Y})();function $(Y,P,V){let ue=Y;"function"!=typeof Y&&({next:ue,error:P,complete:V}=Y);const Ue=ue;return{next:dt=>Ue(dt&&L.getOrCreate(dt)),error:P,complete:V}}function pe(Y,P){const V=function tn(Y,P){const V=nt();if(!V)return[];const ue=R.az(Vr,Y,P);switch(V.getItem(ue)){case Tn.NONE:return[R.L];case Tn.LOCAL:return[R.i,R.a];case Tn.SESSION:return[R.a];default:return[]}}(Y,P);if(typeof self<"u"&&!V.includes(R.i)&&V.push(R.i),typeof window<"u")for(const ue of[R.b,R.a])V.includes(ue)||V.push(ue);return V.includes(R.L)||V.push(R.L),V}class Fe{constructor(){this.providerId="phone",this._delegate=new R.P(fr(F.Z.auth()))}static credential(P,V){return R.P.credential(P,V)}verifyPhoneNumber(P,V){return this._delegate.verifyPhoneNumber(P,V)}unwrap(){return this._delegate}}Fe.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Fe.PROVIDER_ID=R.P.PROVIDER_ID;const lt=R.ax;class zt{constructor(P,V,ue=F.Z.app()){var Ue;lt(null===(Ue=ue.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:ue.name}),this._delegate=new R.R(P,V,ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function An(Y){Y.INTERNAL.registerComponent(new Ce.wA("auth-compat",P=>{const V=P.getProvider("app-compat").getImmediate(),ue=P.getProvider("auth");return new U(V,ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:Fe,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:zt,TwitterAuthProvider:R.W,Auth:U,AuthCredential:R.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.2.19")}(F.Z)},9751:(ut,Ae,N)=>{N.d(Ae,{y:()=>ge});var g=N(2961),F=N(727),R=N(8822),oe=N(9635),we=N(2416),ye=N(576),Ce=N(2806);let ge=(()=>{class Z{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const me=new Z;return me.source=this,me.operator=Pe,me}subscribe(Pe,me,ze){const ie=function j(Z){return Z&&Z instanceof g.Lv||function H(Z){return Z&&(0,ye.m)(Z.next)&&(0,ye.m)(Z.error)&&(0,ye.m)(Z.complete)}(Z)&&(0,F.Nn)(Z)}(Pe)?Pe:new g.Hp(Pe,me,ze);return(0,Ce.x)(()=>{const{operator:le,source:Ze}=this;ie.add(le?le.call(ie,Ze):Ze?this._subscribe(ie):this._trySubscribe(ie))}),ie}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(me){Pe.error(me)}}forEach(Pe,me){return new(me=Oe(me))((ze,ie)=>{const le=new g.Hp({next:Ze=>{try{Pe(Ze)}catch(Qe){ie(Qe),le.unsubscribe()}},error:ie,complete:ze});this.subscribe(le)})}_subscribe(Pe){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(Pe)}[R.L](){return this}pipe(...Pe){return(0,oe.U)(Pe)(this)}toPromise(Pe){return new(Pe=Oe(Pe))((me,ze)=>{let ie;this.subscribe(le=>ie=le,le=>ze(le),()=>me(ie))})}}return Z.create=ke=>new Z(ke),Z})();function Oe(Z){var ke;return null!==(ke=Z??we.v.Promise)&&void 0!==ke?ke:Promise}},7579:(ut,Ae,N)=>{N.d(Ae,{x:()=>Ce});var g=N(9751),F=N(727);const oe=(0,N(3888).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=N(8737),ye=N(2806);let Ce=(()=>{class Oe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Z=new ge(this,this);return Z.operator=j,Z}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(j)}})}error(j){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Z}=this;for(;Z.length;)Z.shift().error(j)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Z,isStopped:ke,observers:Pe}=this;return Z||ke?F.Lc:(this.currentObservers=null,Pe.push(j),new F.w0(()=>{this.currentObservers=null,(0,we.P)(Pe,j)}))}_checkFinalizedStatuses(j){const{hasError:Z,thrownError:ke,isStopped:Pe}=this;Z?j.error(ke):Pe&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return Oe.create=(H,j)=>new ge(H,j),Oe})();class ge extends Ce{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Z||Z.call(j,H)}error(H){var j,Z;null===(Z=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Z||Z.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,Z;return null!==(Z=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==Z?Z:F.Lc}}},2961:(ut,Ae,N)=>{N.d(Ae,{Hp:()=>ze,Lv:()=>Z});var g=N(576),F=N(727),R=N(2416),oe=N(7849);function we(){}const ye=Oe("C",void 0,void 0);function Oe(Re,_e,he){return{kind:Re,value:_e,error:he}}var H=N(3410),j=N(2806);class Z extends F.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,F.Nn)(_e)&&_e.add(this)):this.destination=Qe}static create(_e,he,Le){return new ze(_e,he,Le)}next(_e){this.isStopped?Ze(function ge(Re){return Oe("N",Re,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ze(function Ce(Re){return Oe("E",void 0,Re)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Pe(Re,_e){return ke.call(Re,_e)}class me{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:he}=this;if(he.next)try{he.next(_e)}catch(Le){ie(Le)}}error(_e){const{partialObserver:he}=this;if(he.error)try{he.error(_e)}catch(Le){ie(Le)}else ie(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(he){ie(he)}}}class ze extends Z{constructor(_e,he,Le){let ee;if(super(),(0,g.m)(_e)||!_e)ee={next:_e??void 0,error:he??void 0,complete:Le??void 0};else{let ne;this&&R.v.useDeprecatedNextContext?(ne=Object.create(_e),ne.unsubscribe=()=>this.unsubscribe(),ee={next:_e.next&&Pe(_e.next,ne),error:_e.error&&Pe(_e.error,ne),complete:_e.complete&&Pe(_e.complete,ne)}):ee=_e}this.destination=new me(ee)}}function ie(Re){R.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Re):(0,oe.h)(Re)}function Ze(Re,_e){const{onStoppedNotification:he}=R.v;he&&H.z.setTimeout(()=>he(Re,_e))}const Qe={closed:!0,next:we,error:function le(Re){throw Re},complete:we}},727:(ut,Ae,N)=>{N.d(Ae,{Lc:()=>ye,w0:()=>we,Nn:()=>Ce});var g=N(576);const R=(0,N(3888).d)(Oe=>function(j){Oe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Z,ke)=>`${ke+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=N(8737);class we{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Pe of j)Pe.remove(this);else j.remove(this);const{initialTeardown:Z}=this;if((0,g.m)(Z))try{Z()}catch(Pe){H=Pe instanceof R?Pe.errors:[Pe]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Pe of ke)try{ge(Pe)}catch(me){H=H??[],me instanceof R?H=[...H,...me.errors]:H.push(me)}}if(H)throw new R(H)}}add(H){var j;if(H&&H!==this)if(this.closed)ge(H);else{if(H instanceof we){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,oe.P)(j,H),H instanceof we&&H._removeParent(this)}}we.EMPTY=(()=>{const Oe=new we;return Oe.closed=!0,Oe})();const ye=we.EMPTY;function Ce(Oe){return Oe instanceof we||Oe&&"closed"in Oe&&(0,g.m)(Oe.remove)&&(0,g.m)(Oe.add)&&(0,g.m)(Oe.unsubscribe)}function ge(Oe){(0,g.m)(Oe)?Oe():Oe.unsubscribe()}},2416:(ut,Ae,N)=>{N.d(Ae,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,N)=>{N.d(Ae,{E:()=>F});const F=new(N(9751).y)(we=>we.complete())},8996:(ut,Ae,N)=>{N.d(Ae,{D:()=>_e});var g=N(8421),F=N(5363),R=N(9468),ye=N(9751),ge=N(2202),Oe=N(576),H=N(9672);function Z(he,Le){if(!he)throw new Error("Iterable cannot be null");return new ye.y(ee=>{(0,H.f)(ee,Le,()=>{const ne=he[Symbol.asyncIterator]();(0,H.f)(ee,Le,()=>{ne.next().then(ce=>{ce.done?ee.complete():ee.next(ce.value)})},0,!0)})})}var ke=N(3670),Pe=N(8239),me=N(1144),ze=N(6495),ie=N(2206),le=N(4532),Ze=N(3260);function _e(he,Le){return Le?function Re(he,Le){if(null!=he){if((0,ke.c)(he))return function oe(he,Le){return(0,g.Xf)(he).pipe((0,R.R)(Le),(0,F.Q)(Le))}(he,Le);if((0,me.z)(he))return function Ce(he,Le){return new ye.y(ee=>{let ne=0;return Le.schedule(function(){ne===he.length?ee.complete():(ee.next(he[ne++]),ee.closed||this.schedule())})})}(he,Le);if((0,Pe.t)(he))return function we(he,Le){return(0,g.Xf)(he).pipe((0,R.R)(Le),(0,F.Q)(Le))}(he,Le);if((0,ie.D)(he))return Z(he,Le);if((0,ze.T)(he))return function j(he,Le){return new ye.y(ee=>{let ne;return(0,H.f)(ee,Le,()=>{ne=he[ge.h](),(0,H.f)(ee,Le,()=>{let ce,W;try{({value:ce,done:W}=ne.next())}catch(K){return void ee.error(K)}W?ee.complete():ee.next(ce)},0,!0)}),()=>(0,Oe.m)(ne?.return)&&ne.return()})}(he,Le);if((0,Ze.L)(he))return function Qe(he,Le){return Z((0,Ze.Q)(he),Le)}(he,Le)}throw(0,le.z)(he)}(he,Le):(0,g.Xf)(he)}},8421:(ut,Ae,N)=>{N.d(Ae,{Xf:()=>ke});var g=N(655),F=N(1144),R=N(8239),oe=N(9751),we=N(3670),ye=N(2206),Ce=N(4532),ge=N(6495),Oe=N(3260),H=N(576),j=N(7849),Z=N(8822);function ke(Re){if(Re instanceof oe.y)return Re;if(null!=Re){if((0,we.c)(Re))return function Pe(Re){return new oe.y(_e=>{const he=Re[Z.L]();if((0,H.m)(he.subscribe))return he.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,F.z)(Re))return function me(Re){return new oe.y(_e=>{for(let he=0;he<Re.length&&!_e.closed;he++)_e.next(Re[he]);_e.complete()})}(Re);if((0,R.t)(Re))return function ze(Re){return new oe.y(_e=>{Re.then(he=>{_e.closed||(_e.next(he),_e.complete())},he=>_e.error(he)).then(null,j.h)})}(Re);if((0,ye.D)(Re))return le(Re);if((0,ge.T)(Re))return function ie(Re){return new oe.y(_e=>{for(const he of Re)if(_e.next(he),_e.closed)return;_e.complete()})}(Re);if((0,Oe.L)(Re))return function Ze(Re){return le((0,Oe.Q)(Re))}(Re)}throw(0,Ce.z)(Re)}function le(Re){return new oe.y(_e=>{(function Qe(Re,_e){var he,Le,ee,ne;return(0,g.mG)(this,void 0,void 0,function*(){try{for(he=(0,g.KL)(Re);!(Le=yield he.next()).done;)if(_e.next(Le.value),_e.closed)return}catch(ce){ee={error:ce}}finally{try{Le&&!Le.done&&(ne=he.return)&&(yield ne.call(he))}finally{if(ee)throw ee.error}}_e.complete()})})(Re,_e).catch(he=>_e.error(he))})}},6451:(ut,Ae,N)=>{N.d(Ae,{T:()=>ye});var g=N(8189),F=N(8421),R=N(515),oe=N(7669),we=N(8996);function ye(...Ce){const ge=(0,oe.yG)(Ce),Oe=(0,oe._6)(Ce,1/0),H=Ce;return H.length?1===H.length?(0,F.Xf)(H[0]):(0,g.J)(Oe)((0,we.D)(H,ge)):R.E}},5403:(ut,Ae,N)=>{N.d(Ae,{x:()=>F});var g=N(2961);function F(oe,we,ye,Ce,ge){return new R(oe,we,ye,Ce,ge)}class R extends g.Lv{constructor(we,ye,Ce,ge,Oe,H){super(we),this.onFinalize=Oe,this.shouldUnsubscribe=H,this._next=ye?function(j){try{ye(j)}catch(Z){we.error(Z)}}:super._next,this._error=ge?function(j){try{ge(j)}catch(Z){we.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(j){we.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4004:(ut,Ae,N)=>{N.d(Ae,{U:()=>R});var g=N(4482),F=N(5403);function R(oe,we){return(0,g.e)((ye,Ce)=>{let ge=0;ye.subscribe((0,F.x)(Ce,Oe=>{Ce.next(oe.call(we,Oe,ge++))}))})}},8189:(ut,Ae,N)=>{N.d(Ae,{J:()=>R});var g=N(5577),F=N(4671);function R(oe=1/0){return(0,g.z)(F.y,oe)}},5577:(ut,Ae,N)=>{N.d(Ae,{z:()=>ge});var g=N(4004),F=N(8421),R=N(4482),oe=N(9672),we=N(5403),Ce=N(576);function ge(Oe,H,j=1/0){return(0,Ce.m)(H)?ge((Z,ke)=>(0,g.U)((Pe,me)=>H(Z,Pe,ke,me))((0,F.Xf)(Oe(Z,ke))),j):("number"==typeof H&&(j=H),(0,R.e)((Z,ke)=>function ye(Oe,H,j,Z,ke,Pe,me,ze){const ie=[];let le=0,Ze=0,Qe=!1;const Re=()=>{Qe&&!ie.length&&!le&&H.complete()},_e=Le=>le<Z?he(Le):ie.push(Le),he=Le=>{Pe&&H.next(Le),le++;let ee=!1;(0,F.Xf)(j(Le,Ze++)).subscribe((0,we.x)(H,ne=>{ke?.(ne),Pe?_e(ne):H.next(ne)},()=>{ee=!0},void 0,()=>{if(ee)try{for(le--;ie.length&&le<Z;){const ne=ie.shift();me?(0,oe.f)(H,me,()=>he(ne)):he(ne)}Re()}catch(ne){H.error(ne)}}))};return Oe.subscribe((0,we.x)(H,_e,()=>{Qe=!0,Re()})),()=>{ze?.()}}(Z,ke,Oe,j)))}},5363:(ut,Ae,N)=>{N.d(Ae,{Q:()=>oe});var g=N(9672),F=N(4482),R=N(5403);function oe(we,ye=0){return(0,F.e)((Ce,ge)=>{Ce.subscribe((0,R.x)(ge,Oe=>(0,g.f)(ge,we,()=>ge.next(Oe),ye),()=>(0,g.f)(ge,we,()=>ge.complete(),ye),Oe=>(0,g.f)(ge,we,()=>ge.error(Oe),ye)))})}},3099:(ut,Ae,N)=>{N.d(Ae,{B:()=>we});var g=N(8421),F=N(7579),R=N(2961),oe=N(4482);function we(Ce={}){const{connector:ge=(()=>new F.x),resetOnError:Oe=!0,resetOnComplete:H=!0,resetOnRefCountZero:j=!0}=Ce;return Z=>{let ke,Pe,me,ze=0,ie=!1,le=!1;const Ze=()=>{Pe?.unsubscribe(),Pe=void 0},Qe=()=>{Ze(),ke=me=void 0,ie=le=!1},Re=()=>{const _e=ke;Qe(),_e?.unsubscribe()};return(0,oe.e)((_e,he)=>{ze++,!le&&!ie&&Ze();const Le=me=me??ge();he.add(()=>{ze--,0===ze&&!le&&!ie&&(Pe=ye(Re,j))}),Le.subscribe(he),!ke&&ze>0&&(ke=new R.Hp({next:ee=>Le.next(ee),error:ee=>{le=!0,Ze(),Pe=ye(Qe,Oe,ee),Le.error(ee)},complete:()=>{ie=!0,Ze(),Pe=ye(Qe,H),Le.complete()}}),(0,g.Xf)(_e).subscribe(ke))})(Z)}}function ye(Ce,ge,...Oe){if(!0===ge)return void Ce();if(!1===ge)return;const H=new R.Hp({next:()=>{H.unsubscribe(),Ce()}});return ge(...Oe).subscribe(H)}},9468:(ut,Ae,N)=>{N.d(Ae,{R:()=>F});var g=N(4482);function F(R,oe=0){return(0,g.e)((we,ye)=>{ye.add(R.schedule(()=>we.subscribe(ye),oe))})}},3410:(ut,Ae,N)=>{N.d(Ae,{z:()=>g});const g={setTimeout(F,R,...oe){const{delegate:we}=g;return we?.setTimeout?we.setTimeout(F,R,...oe):setTimeout(F,R,...oe)},clearTimeout(F){const{delegate:R}=g;return(R?.clearTimeout||clearTimeout)(F)},delegate:void 0}},2202:(ut,Ae,N)=>{N.d(Ae,{h:()=>F});const F=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,N)=>{N.d(Ae,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ae,N)=>{N.d(Ae,{_6:()=>ye,jO:()=>oe,yG:()=>we});var g=N(576);function R(Ce){return Ce[Ce.length-1]}function oe(Ce){return(0,g.m)(R(Ce))?Ce.pop():void 0}function we(Ce){return function F(Ce){return Ce&&(0,g.m)(Ce.schedule)}(R(Ce))?Ce.pop():void 0}function ye(Ce,ge){return"number"==typeof R(Ce)?Ce.pop():ge}},8737:(ut,Ae,N)=>{function g(F,R){if(F){const oe=F.indexOf(R);0<=oe&&F.splice(oe,1)}}N.d(Ae,{P:()=>g})},3888:(ut,Ae,N)=>{function g(F){const oe=F(we=>{Error.call(we),we.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}N.d(Ae,{d:()=>g})},2806:(ut,Ae,N)=>{N.d(Ae,{O:()=>oe,x:()=>R});var g=N(2416);let F=null;function R(we){if(g.v.useDeprecatedSynchronousErrorHandling){const ye=!F;if(ye&&(F={errorThrown:!1,error:null}),we(),ye){const{errorThrown:Ce,error:ge}=F;if(F=null,Ce)throw ge}}else we()}function oe(we){g.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=we)}},9672:(ut,Ae,N)=>{function g(F,R,oe,we=0,ye=!1){const Ce=R.schedule(function(){oe(),ye?F.add(this.schedule(null,we)):this.unsubscribe()},we);if(F.add(Ce),!ye)return Ce}N.d(Ae,{f:()=>g})},4671:(ut,Ae,N)=>{function g(F){return F}N.d(Ae,{y:()=>g})},1144:(ut,Ae,N)=>{N.d(Ae,{z:()=>g});const g=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(ut,Ae,N)=>{N.d(Ae,{D:()=>F});var g=N(576);function F(R){return Symbol.asyncIterator&&(0,g.m)(R?.[Symbol.asyncIterator])}},576:(ut,Ae,N)=>{function g(F){return"function"==typeof F}N.d(Ae,{m:()=>g})},3670:(ut,Ae,N)=>{N.d(Ae,{c:()=>R});var g=N(8822),F=N(576);function R(oe){return(0,F.m)(oe[g.L])}},6495:(ut,Ae,N)=>{N.d(Ae,{T:()=>R});var g=N(2202),F=N(576);function R(oe){return(0,F.m)(oe?.[g.h])}},8239:(ut,Ae,N)=>{N.d(Ae,{t:()=>F});var g=N(576);function F(R){return(0,g.m)(R?.then)}},3260:(ut,Ae,N)=>{N.d(Ae,{L:()=>oe,Q:()=>R});var g=N(655),F=N(576);function R(we){return(0,g.FC)(this,arguments,function*(){const Ce=we.getReader();try{for(;;){const{value:ge,done:Oe}=yield(0,g.qq)(Ce.read());if(Oe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ge)}}finally{Ce.releaseLock()}})}function oe(we){return(0,F.m)(we?.getReader)}},4482:(ut,Ae,N)=>{N.d(Ae,{A:()=>F,e:()=>R});var g=N(576);function F(oe){return(0,g.m)(oe?.lift)}function R(oe){return we=>{if(F(we))return we.lift(function(ye){try{return oe(ye,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ut,Ae,N)=>{N.d(Ae,{U:()=>R,z:()=>F});var g=N(4671);function F(...oe){return R(oe)}function R(oe){return 0===oe.length?g.y:1===oe.length?oe[0]:function(ye){return oe.reduce((Ce,ge)=>ge(Ce),ye)}}},7849:(ut,Ae,N)=>{N.d(Ae,{h:()=>R});var g=N(2416),F=N(3410);function R(oe){F.z.setTimeout(()=>{const{onUnhandledError:we}=g.v;if(!we)throw oe;we(oe)})}},4532:(ut,Ae,N)=>{function g(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ae,{z:()=>g})},655:(ut,Ae,N)=>{function oe(W,K){var se={};for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&K.indexOf(X)<0&&(se[X]=W[X]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(X=Object.getOwnPropertySymbols(W);Se<X.length;Se++)K.indexOf(X[Se])<0&&Object.prototype.propertyIsEnumerable.call(W,X[Se])&&(se[X[Se]]=W[X[Se]])}return se}function ge(W,K,se,X){return new(se||(se=Promise))(function(xe,it){function $t(Jt){try{Ve(X.next(Jt))}catch(Kn){it(Kn)}}function Bt(Jt){try{Ve(X.throw(Jt))}catch(Kn){it(Kn)}}function Ve(Jt){Jt.done?xe(Jt.value):function Se(xe){return xe instanceof se?xe:new se(function(it){it(xe)})}(Jt.value).then($t,Bt)}Ve((X=X.apply(W,K||[])).next())})}function ie(W){return this instanceof ie?(this.v=W,this):new ie(W)}function le(W,K,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,X=se.apply(W,K||[]),xe=[];return Se={},it("next"),it("throw"),it("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function it(Xt){X[Xt]&&(Se[Xt]=function(jt){return new Promise(function(Rt,St){xe.push([Xt,jt,Rt,St])>1||$t(Xt,jt)})})}function $t(Xt,jt){try{!function Bt(Xt){Xt.value instanceof ie?Promise.resolve(Xt.value.v).then(Ve,Jt):Kn(xe[0][2],Xt)}(X[Xt](jt))}catch(Rt){Kn(xe[0][3],Rt)}}function Ve(Xt){$t("next",Xt)}function Jt(Xt){$t("throw",Xt)}function Kn(Xt,jt){Xt(jt),xe.shift(),xe.length&&$t(xe[0][0],xe[0][1])}}function Qe(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,K=W[Symbol.asyncIterator];return K?K.call(W):(W=function Z(W){var K="function"==typeof Symbol&&Symbol.iterator,se=K&&W[K],X=0;if(se)return se.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&X>=W.length&&(W=void 0),{value:W&&W[X++],done:!W}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),se={},X("next"),X("throw"),X("return"),se[Symbol.asyncIterator]=function(){return this},se);function X(xe){se[xe]=W[xe]&&function(it){return new Promise(function($t,Bt){!function Se(xe,it,$t,Bt){Promise.resolve(Bt).then(function(Ve){xe({value:Ve,done:$t})},it)}($t,Bt,(it=W[xe](it)).done,it.value)})}}}N.d(Ae,{FC:()=>le,KL:()=>Qe,_T:()=>oe,mG:()=>ge,qq:()=>ie})},4650:(ut,Ae,N)=>{N.d(Ae,{$8M:()=>Vu,$Z:()=>_y,AFp:()=>Hd,AaK:()=>ge,CRH:()=>kA,CZH:()=>ng,CqO:()=>AI,D6c:()=>LD,EJc:()=>hD,F4k:()=>TI,FYo:()=>sb,FiY:()=>pn,G48:()=>ID,GfV:()=>Jw,Gpc:()=>j,JOm:()=>gs,LFG:()=>an,LSH:()=>Zc,Lbi:()=>dv,Lck:()=>mA,MGl:()=>hl,MMx:()=>B_,NdJ:()=>dp,OlP:()=>nn,Oqu:()=>Ep,PXZ:()=>_D,Q6J:()=>$y,QGY:()=>cp,QP$:()=>Ue,Qsj:()=>Gm,R0b:()=>bi,RDi:()=>uf,Rgc:()=>Il,SBq:()=>yf,Sil:()=>Xn,Suo:()=>PA,TTD:()=>ks,TgZ:()=>Ad,X6Q:()=>Tv,XFs:()=>We,Xpm:()=>U,Xts:()=>Fm,Y36:()=>ja,YKP:()=>Kr,YNc:()=>up,Yjl:()=>Y,Yz7:()=>jt,Z0I:()=>ho,ZZ4:()=>Yo,_Bn:()=>SE,_UZ:()=>Gy,_Vd:()=>nd,_c5:()=>Sv,_uU:()=>GI,aQg:()=>Ig,c2e:()=>cD,cJS:()=>St,cg1:()=>f_,dDg:()=>yD,dqk:()=>bt,eFA:()=>Sl,ekj:()=>t_,eoX:()=>wv,f3M:()=>Gr,g9A:()=>rg,h0i:()=>wl,hGG:()=>FD,iGM:()=>WE,ifc:()=>rt,ip1:()=>uD,jDz:()=>ME,kL8:()=>iE,lG2:()=>An,lqb:()=>to,lri:()=>Al,n5z:()=>ls,oAB:()=>lt,q4F:()=>_f,qLn:()=>wf,qOj:()=>np,qZA:()=>lp,rWj:()=>vv,sBO:()=>Yd,sIi:()=>ul,s_b:()=>X_,soG:()=>Tl,tb:()=>hv,tp0:()=>Ys,uIk:()=>ii,vHH:()=>me,vpe:()=>Es,wAp:()=>ht,xp6:()=>fy,z2F:()=>au,zSh:()=>ps,zs3:()=>Ua});var g=N(7579),F=N(727),R=N(9751),oe=N(6451),we=N(3099);function ye(i){for(let s in i)if(i[s]===ye)return s;throw Error("Could not find renamed property on target object.")}function Ce(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ge(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ge).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Oe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const H=ye({__forward_ref__:ye});function j(i){return i.__forward_ref__=j,i.toString=function(){return ge(this())},i}function Z(i){return ke(i)?i():i}function ke(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===j}class me extends Error{constructor(s,a){super(function ze(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ie(i){return"string"==typeof i?i:null==i?"":String(i)}function _e(i,s){throw new me(-201,!1)}function Bt(i,s){null==i&&function Ve(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function St(i){return{providers:i.providers||[],imports:i.imports||[]}}function nr(i){return hi(i,Ar)||hi(i,ts)}function ho(i){return null!==nr(i)}function hi(i,s){return i.hasOwnProperty(s)?i[s]:null}function fi(i){return i&&(i.hasOwnProperty(rr)||i.hasOwnProperty(ns))?i[rr]:null}const Ar=ye({\u0275prov:ye}),rr=ye({\u0275inj:ye}),ts=ye({ngInjectableDef:ye}),ns=ye({ngInjectorDef:ye});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let ir;function en(i){const s=ir;return ir=i,s}function Vr(i,s,a){const l=nr(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&We.Optional?null:void 0!==s?s:void _e(ge(i))}function dn(i){return{toString:i}.toString()}var _n=(()=>((_n=_n||{})[_n.OnPush=0]="OnPush",_n[_n.Default=1]="Default",_n))(),rt=(()=>{return(i=rt||(rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",rt;var i})();const bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),or={},pt=[],ar=ye({\u0275cmp:ye}),Dt=ye({\u0275dir:ye}),Yr=ye({\u0275pipe:ye}),kt=ye({\u0275mod:ye}),G=ye({\u0275fac:ye}),L=ye({__NG_ELEMENT_ID__:ye});let O=0;function U(i){return dn(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===_n.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||rt.Emulated,id:"c"+O++,styles:i.styles||pt,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.dependencies,y=i.features;return d.inputs=Ht(i.inputs,l),d.outputs=Ht(i.outputs),y&&y.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(pe).filter(Fe):null,d.pipeDefs=h?()=>("function"==typeof h?h():h).map(ue).filter(Fe):null,d})}function pe(i){return P(i)||V(i)}function Fe(i){return null!==i}function lt(i){return dn(()=>({type:i.type,bootstrap:i.bootstrap||pt,declarations:i.declarations||pt,imports:i.imports||pt,exports:i.exports||pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ht(i,s){if(null==i)return or;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const An=U;function Y(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function P(i){return i[ar]||null}function V(i){return i[Dt]||null}function ue(i){return i[Yr]||null}function Ue(i){const s=P(i)||V(i)||ue(i);return null!==s&&s.standalone}function st(i,s){const a=i[kt]||null;if(!a&&!0===s)throw new Error(`Type ${ge(i)} does not have '\u0275mod' property.`);return a}function Hn(i){return Array.isArray(i)&&"object"==typeof i[1]}function Sr(i){return Array.isArray(i)&&!0===i[1]}function Os(i){return 0!=(8&i.flags)}function _u(i){return 2==(2&i.flags)}function go(i){return 1==(1&i.flags)}function mi(i){return null!==i.template}function vu(i){return 0!=(256&i[2])}function Zn(i,s){return i.hasOwnProperty(G)?i[G]:null}class yo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ks(){return Oh}function Oh(i){return i.type.prototype.ngOnChanges&&(i.setInput=ic),rc}function rc(){const i=_o(this),s=i?.current;if(s){const a=i.previous;if(a===or)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ic(i,s,a,l){const d=_o(i)||function om(i,s){return i[Ph]=s}(i,{previous:or,current:null}),h=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[a],E=y[w];h[w]=new yo(E&&E.currentValue,s,y===or),i[l]=s}ks.ngInherit=!0;const Ph="__ngSimpleChanges__";function _o(i){return i[Ph]||null}function vn(i){for(;Array.isArray(i);)i=i[0];return i}function ca(i,s){return vn(s[i])}function pr(i,s){return vn(s[i.index])}function da(i,s){return i.data[s]}function Wt(i,s){const a=s[i];return Hn(a)?a:a[0]}function Lh(i){return 4==(4&i[2])}function is(i){return 64==(64&i[2])}function yi(i,s){return null==s?null:i[s]}function ha(i){i[18]=0}function fa(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const wt={lFrame:mc(null),bindingsEnabled:!0};function pa(){return wt.bindingsEnabled}function ve(){return wt.lFrame.lView}function Ft(){return wt.lFrame.tView}function Pn(){let i=Eu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Eu(){return wt.lFrame.currentTNode}function jr(i,s){const a=wt.lFrame;a.currentTNode=i,a.isParent=s}function cc(){return wt.lFrame.isParent}function ma(){return wt.lFrame.bindingIndex++}function Uh(i,s){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=i,bu(s)}function bu(i){wt.lFrame.currentDirectiveIndex=i}function fc(){return wt.lFrame.currentQueryIndex}function pc(i){wt.lFrame.currentQueryIndex=i}function gc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function pm(i,s,a){if(a&We.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&We.Host||(d=gc(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=wt.lFrame=gm();return l.currentTNode=s,l.lView=i,!0}function Tu(i){const s=gm(),a=i[1];wt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function gm(){const i=wt.lFrame,s=null===i?null:i.child;return null===s?mc(i):s}function mc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function mm(){const i=wt.lFrame;return wt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bh=mm;function vo(){const i=mm();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function hn(){return wt.lFrame.selectedIndex}function Ri(i){wt.lFrame.selectedIndex=i}function fn(){const i=wt.lFrame;return da(i.tView,i.selectedIndex)}function Au(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:S}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Su(i,s,a){wc(i,s,3,a)}function Vs(i,s,a,l){(3&i[2])===a&&wc(i,s,a,l)}function vc(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function wc(i,s,a,l){const h=l??-1,y=s.length-1;let w=0;for(let E=void 0!==l?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=l&&w>=l)break}else s[E]<0&&(i[18]+=65536),(w<h||-1==h)&&($h(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function $h(i,s,a,l){const d=a[l]<0,h=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class Hr{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ni(i,s,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const h=a[l++],y=a[l++],w=a[l++];i.setAttribute(s,y,w,h)}else{const h=d,y=a[++l];Cc(h)?i.setProperty(s,h,y):i.setAttribute(s,h,y),l++}}return l}function Dc(i){return 3===i||4===i||6===i}function Cc(i){return 64===i.charCodeAt(0)}function _a(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Hh(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Hh(i,s,a,l,d){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const w=i[h++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=h-1;break}}}for(;h<i.length;){const w=i[h];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Cm(i){return-1!==i}function Us(i){return 32767&i}function as(i,s){let a=function bm(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let bc=!0;function Ru(i){const s=bc;return bc=i,s}let Gh=0;const Xr={};function Bs(i,s){const a=Nu(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Tc(l.data,i),Tc(s,null),Tc(l.blueprint,null));const d=va(i,s),h=i.injectorIndex;if(Cm(d)){const y=Us(d),w=as(d,s),E=w[1].data;for(let C=0;C<8;C++)s[h+C]=w[y+C]|E[y+C]}return s[h+8]=d,h}function Tc(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Nu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function va(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){if(l=Lu(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function wa(i,s,a){!function Am(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(L)&&(l=a[L]),null==l&&(l=a[L]=Gh++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ou(i,s,a){if(a&We.Optional)return i;_e()}function Io(i,s,a,l){if(a&We.Optional&&void 0===l&&(l=null),0==(a&(We.Self|We.Host))){const d=i[9],h=en(void 0);try{return d?d.get(s,l,a&We.Optional):Vr(s,l,a&We.Optional)}finally{en(h)}}return Ou(l,0,a)}function Pu(i,s,a,l=We.Default,d){if(null!==i){if(1024&s[2]){const y=function xm(i,s,a,l,d){let h=i,y=s;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=zh(h,y,a,l|We.Self,Xr);if(w!==Xr)return w;let E=h.parent;if(!E){const C=y[21];if(C){const S=C.get(a,Xr,l);if(S!==Xr)return S}E=Lu(y),y=y[15]}h=E}return d}(i,s,a,l,Xr);if(y!==Xr)return y}const h=zh(i,s,a,l,Xr);if(h!==Xr)return h}return Io(s,a,l,d)}function zh(i,s,a,l,d){const h=function Sm(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(L)?i[L]:void 0;return"number"==typeof s?s>=0?255&s:Kh:s}(a);if("function"==typeof h){if(!pm(s,i,l))return l&We.Host?Ou(d,0,l):Io(s,a,l,d);try{const y=h(l);if(null!=y||l&We.Optional)return y;_e()}finally{Bh()}}else if("number"==typeof h){let y=null,w=Nu(i,s),E=-1,C=l&We.Host?s[16][6]:null;for((-1===w||l&We.SkipSelf)&&(E=-1===w?va(i,s):s[w+8],-1!==E&&qh(l,!1)?(y=s[1],w=Us(E),s=as(E,s)):w=-1);-1!==w;){const S=s[1];if(ku(h,w,S.data)){const M=Wh(w,s,a,y,l,C);if(M!==Xr)return M}E=s[w+8],-1!==E&&qh(l,s[1].data[w+8]===C)&&ku(h,w,s)?(y=S,w=Us(E),s=as(E,s)):w=-1}}return d}function Wh(i,s,a,l,d,h){const y=s[1],w=y.data[i+8],S=Ea(w,y,a,null==l?_u(w)&&bc:l!=y&&0!=(3&w.type),d&We.Host&&h===w);return null!==S?us(s,y,S,w):Xr}function Ea(i,s,a,l,d){const h=i.providerIndexes,y=s.data,w=1048575&h,E=i.directiveStart,S=h>>20,B=d?w+S:i.directiveEnd;for(let J=l?w:w+S;J<B;J++){const de=y[J];if(J<E&&a===de||J>=E&&de.type===a)return J}if(d){const J=y[E];if(J&&mi(J)&&J.type===a)return E}return null}function us(i,s,a,l){let d=i[a];const h=s.data;if(function Ic(i){return i instanceof Hr}(d)){const y=d;y.resolving&&function Ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new me(-200,`Circular dependency in DI detected for ${i}${a}`)}(function le(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ie(i)}(h[a]));const w=Ru(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?en(y.injectImpl):null;pm(i,l,We.Default);try{d=i[a]=y.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function _c(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const y=Oh(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==E&&en(E),Ru(w),y.resolving=!1,Bh()}}return d}function ku(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function qh(i,s){return!(i&We.Self||i&We.Host&&s)}class Da{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Pu(this._tNode,this._lView,s,l,a)}}function Kh(){return new Da(Pn(),ve())}function ls(i){return dn(()=>{const s=i.prototype.constructor,a=s[G]||Fu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[G]||Fu(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function Fu(i){return ke(i)?()=>{const s=Fu(Z(i));return s&&s()}:Zn(i)}function Lu(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Vu(i){return function Ia(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(Dc(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Pn(),i)}const Ca="__parameters__";function ba(i,s,a){return dn(()=>{const l=function Zh(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const y=new d(...h);return w.annotation=y,w;function w(E,C,S){const M=E.hasOwnProperty(Ca)?E[Ca]:Object.defineProperty(E,Ca,{value:[]})[Ca];for(;M.length<=S;)M.push(null);return(M[S]=M[S]||[]).push(y),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class nn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function rn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),rn(l,s)):s!==i&&s.push(l)}return s}function Pi(i,s){i.forEach(a=>Array.isArray(a)?Pi(a,s):s(a))}function js(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Gn(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function tt(i,s,a){let l=cs(i,s);return l>=0?i[1|l]=a:(l=~l,function Rm(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function xc(i,s){const a=cs(i,s);if(a>=0)return i[1|a]}function cs(i,s){return function Mc(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),y=i[h<<a];if(s===y)return h<<a;y>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const Co={},Oc="__NG_DI_FLAG__",ki="ngTempTokenPath",Fi=/\n/gm,Fn="__source";let ds;function hs(i){const s=ds;return ds=i,s}function Ln(i,s=We.Default){if(void 0===ds)throw new me(-203,!1);return null===ds?Vr(i,void 0,s):ds.get(i,s&We.Optional?null:void 0,s)}function an(i,s=We.Default){return(function Tn(){return ir}()||Ln)(Z(i),s)}function Gr(i,s=We.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),an(i,s)}function Wn(i){const s=[];for(let a=0;a<i.length;a++){const l=Z(i[a]);if(Array.isArray(l)){if(0===l.length)throw new me(900,!1);let d,h=We.Default;for(let y=0;y<l.length;y++){const w=l[y],E=nf(w);"number"==typeof E?-1===E?d=w.token:h|=E:d=w}s.push(an(d,h))}else s.push(an(l))}return s}function wi(i,s){return i[Oc]=s,i.prototype[Oc]=s,i}function nf(i){return i[Oc]}const pn=wi(ba("Optional"),8),Ys=wi(ba("SkipSelf"),4);let Uc;function uf(i){Uc=i}class cf{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ii(i){return i instanceof cf?i.changingThisBreaksApplicationSecurity:i}const x=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function Zc(i){const s=function Yc(){const i=ve();return i&&i[12]}();return s?s.sanitize(Rn.URL,i)||"":function $i(i,s){const a=function Hc(i){return i instanceof cf&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ii(i):function Q(i){return(i=String(i)).match(x)?i:"unsafe:"+i}(ie(i))}const Fm=new nn("ENVIRONMENT_INITIALIZER"),jw=new nn("INJECTOR",-1),Hw=new nn("INJECTOR_DEF_TYPES");class Gw{get(s,a=Co){if(a===Co){const l=new Error(`NullInjectorError: No provider for ${ge(s)}!`);throw l.name="NullInjectorError",l}return a}}function XC(...i){return{\u0275providers:Lm(0,i)}}function Lm(i,...s){const a=[],l=new Set;let d;return Pi(s,h=>{const y=h;gf(y,a,[],l)&&(d||(d=[]),d.push(y))}),void 0!==d&&zw(d,a),a}function zw(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Pi(d,h=>{s.push(h)})}}function gf(i,s,a,l){if(!(i=Z(i)))return!1;let d=null,h=fi(i);const y=!h&&P(i);if(h||y){if(y&&!y.standalone)return!1;d=i}else{const E=i.ngModule;if(h=fi(E),!h)return!1;d=E}const w=l.has(d);if(y){if(w)return!1;if(l.add(d),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of E)gf(C,s,a,l)}}else{if(!h)return!1;{if(null!=h.imports&&!w){let C;l.add(d);try{Pi(h.imports,S=>{gf(S,s,a,l)&&(C||(C=[]),C.push(S))})}finally{}void 0!==C&&zw(C,s)}if(!w){const C=Zn(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:pt},{provide:Hw,useValue:d,multi:!0},{provide:Fm,useValue:()=>an(d),multi:!0})}const E=h.providers;null==E||w||Pi(E,S=>{s.push(S)})}}return d!==i&&void 0!==i.providers}const Vm=ye({provide:String,useValue:ye});function Gi(i){return null!==i&&"object"==typeof i&&Vm in i}function Oo(i){return"function"==typeof i}const ps=new nn("Set Injector scope."),Qc={},tb={};let zu;function Jc(){return void 0===zu&&(zu=new Gw),zu}class to{}class Bm extends to{constructor(s,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mf(s,y=>this.processProvider(y)),this.records.set(jw,qu(void 0,this)),d.has("environment")&&this.records.set(to,qu(void 0,this));const h=this.records.get(ps);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Hw.multi,pt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=hs(this),l=en(void 0);try{return s()}finally{hs(a),en(l)}}get(s,a=Co,l=We.Default){this.assertNotDestroyed();const d=hs(this),h=en(void 0);try{if(!(l&We.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function qw(i){return"function"==typeof i||"object"==typeof i&&i instanceof nn}(s)&&nr(s);w=E&&this.injectableDefInScope(E)?qu(Xc(s),Qc):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&We.Self?Jc():this.parent).get(s,a=l&We.Optional&&a===Co?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[ki]=y[ki]||[]).unshift(ge(s)),d)throw y;return function Nm(i,s,a,l){const d=i[ki];throw s[Fn]&&d.unshift(s[Fn]),i.message=function ei(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ge(s);if(Array.isArray(s))d=s.map(ge).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):ge(w)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Fi,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ki]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{en(h),hs(d)}}resolveInjectorInitializers(){const s=hs(this),a=en(void 0);try{const l=this.get(Fm.multi,pt,We.Self);for(const d of l)d()}finally{hs(s),en(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(ge(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(s){let a=Oo(s=Z(s))?s:Z(s&&s.provide);const l=function nb(i){return Gi(i)?qu(void 0,i.useValue):qu(Wu(i),Qc)}(s);if(Oo(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=qu(void 0,Qc,!0),d.factory=()=>Wn(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Qc&&(a.value=tb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function jm(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Xc(i){const s=nr(i),a=null!==s?s.factory:Zn(i);if(null!==a)return a;if(i instanceof nn)throw new me(204,!1);if(i instanceof Function)return function $m(i){const s=i.length;if(s>0)throw function Hs(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new me(204,!1);const a=function yn(i){const s=i&&(i[Ar]||i[ts]);if(s){const a=function es(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new me(204,!1)}function Wu(i,s,a){let l;if(Oo(i)){const d=Z(i);return Zn(d)||Xc(d)}if(Gi(i))l=()=>Z(i.useValue);else if(function Um(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Wn(i.deps||[]));else if(function Pa(i){return!(!i||!i.useExisting)}(i))l=()=>an(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function rb(i){return!!i.deps}(i))return Zn(d)||Xc(d);l=()=>new d(...Wn(i.deps))}return l}function qu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Kw(i){return!!i.\u0275providers}function mf(i,s){for(const a of i)Array.isArray(a)?mf(a,s):Kw(a)?mf(a.\u0275providers,s):s(a)}class Yw{}class ib{resolveComponentFactory(s){throw function ed(i){const s=Error(`No component factory found for ${ge(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let nd=(()=>{class i{}return i.NULL=new ib,i})();function Hm(){return ka(Pn(),ve())}function ka(i,s){return new yf(pr(i,s))}let yf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hm,i})();function kM(i){return i instanceof yf?i.nativeElement:i}class sb{}let Gm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ob(){const i=ve(),a=Wt(Pn().index,i);return(Hn(a)?a:i)[11]}(),i})(),ab=(()=>{class i{}return i.\u0275prov=jt({token:i,providedIn:"root",factory:()=>null}),i})();class Jw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const _f=new Jw("14.2.0"),Wr={};function qm(i){return i.ngOriginalError}class wf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&qm(s);for(;a&&qm(a);)a=qm(a);return a||null}}const Zm=new Map;let mb=0;const Yu="__ngContext__";function gr(i,s){Hn(s)?(i[Yu]=s[20],function _b(i){Zm.set(i[20],i)}(s)):i[Yu]=s}function sd(i){const s=i[Yu];return"number"==typeof s?function r0(i){return Zm.get(i)||null}(s):s||null}function Ym(i){const s=sd(i);return s?Hn(s)?s:s.lView:null}function no(i){return i instanceof Function?i():i}var gs=(()=>((gs=gs||{})[gs.Important=1]="Important",gs[gs.DashCase=2]="DashCase",gs))();function Af(i,s){return undefined(i,s)}function Ju(i){const s=i[3];return Sr(s)?s[3]:s}function ty(i){return h0(i[13])}function ny(i){return h0(i[4])}function h0(i){for(;null!==i&&!Sr(i);)i=i[4];return i}function Xu(i,s,a,l,d){if(null!=l){let h,y=!1;Sr(l)?h=l:Hn(l)&&(y=!0,l=l[0]);const w=vn(l);0===i&&null!==a?null==d?g0(s,a,w):Va(s,a,w,d||null,!0):1===i&&null!==a?Va(s,a,w,d||null,!0):2===i?function Nf(i,s,a){const l=Nn(i,s);l&&function Nb(i,s,a,l){i.removeChild(s,a,l)}(i,l,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=h&&function el(i,s,a,l,d){const h=a[7];h!==vn(a)&&Xu(s,i,l,h,d);for(let w=10;w<a.length;w++){const E=a[w];Po(E[1],E,i,s,l,h)}}(s,i,h,a,d)}}function Sf(i,s,a){return i.createElement(s,a)}function ud(i,s){const a=i[9],l=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,fa(d,-1)),a.splice(l,1)}function xf(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&ud(d,l),s>0&&(i[a-1][4]=l[4]);const h=Gn(i,10+s);!function f0(i,s){Po(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=h[19];null!==y&&y.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Mf(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Po(i,s,a,3,null,null),function Ab(i){let s=i[13];if(!s)return ld(i[1],i);for(;s;){let a=null;if(Hn(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Hn(s)&&ld(s[1],s),s=s[3];null===s&&(s=i),Hn(s)&&ld(s[1],s),a=s&&s[4]}s=a}}(s)}}function ld(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Rb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Hr)){const h=a[l+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=d[h[y]],E=h[y+1];try{E.call(w)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function Mb(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],w="function"==typeof y?y(s):vn(s[y]),E=l[d=a[h+2]],C=a[h+3];"boolean"==typeof C?w.removeEventListener(a[h],E,C):C>=0?l[d=C]():l[d=-C].unsubscribe(),h+=2}else{const y=l[d=a[h+1]];a[h].call(y)}if(null!==l){for(let h=d+1;h<l.length;h++)(0,l[h])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Sr(s[3])){a!==s[3]&&ud(a,s);const l=s[19];null!==l&&l.detachView(i)}!function s0(i){Zm.delete(i[20])}(s)}}function cd(i,s,a){return function p0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===rt.None||d===rt.Emulated)return null}return pr(l,a)}(i,s.parent,a)}function Va(i,s,a,l,d){i.insertBefore(s,a,l,d)}function g0(i,s,a){i.appendChild(s,a)}function m0(i,s,a,l,d){null!==l?Va(i,s,a,l,d):g0(i,s,a)}function Nn(i,s){return i.parentNode(s)}let Rf=function dd(i,s,a){return 40&i.type?pr(i,a):null};function hd(i,s,a,l){const d=cd(i,l,s),h=s[11],w=function oy(i,s,a){return Rf(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)m0(h,d,a[E],w,!1);else m0(h,d,a,w,!1)}function uy(i,s){if(null!==s){const a=s.type;if(3&a)return pr(s,i);if(4&a)return ly(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return uy(i,l);{const d=i[s.index];return Sr(d)?ly(-1,d):vn(d)}}if(32&a)return Af(s,i)()||vn(i[s.index]);{const l=kb(i,s);return null!==l?Array.isArray(l)?l[0]:uy(Ju(i[16]),l):uy(i,s.next)}}return null}function kb(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ly(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return uy(l,d)}return s[7]}function Of(i,s,a,l,d,h,y){for(;null!=a;){const w=l[a.index],E=a.type;if(y&&0===s&&(w&&gr(vn(w),l),a.flags|=4),64!=(64&a.flags))if(8&E)Of(i,s,a.child,l,d,h,!1),Xu(s,i,d,w,h);else if(32&E){const C=Af(a,l);let S;for(;S=C();)Xu(s,i,d,S,h);Xu(s,i,d,w,h)}else 16&E?cy(i,s,l,a,d,h):Xu(s,i,d,w,h);a=y?a.projectionNext:a.next}}function Po(i,s,a,l,d,h){Of(a,l,i.firstChild,s,d,h,!1)}function cy(i,s,a,l,d,h){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Xu(s,i,d,E[C],h);else Of(i,s,E,y[3],d,h,!0)}function Fb(i,s,a){i.setAttribute(s,"style",a)}function Pf(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function hy(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const v0="ng-template";function Lb(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==hy(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function w0(i){return 4===i.type&&i.value!==v0}function I0(i,s,a){return s===(4!==i.type||a?i.value:v0)}function Vb(i,s,a){let l=4;const d=i.attrs||[],h=function Bb(i){for(let s=0;s<i.length;s++)if(Dc(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!I0(i,E,a)||""===E&&1===s.length){if(ms(l))return!1;y=!0}}else{const C=8&l?E:s[++w];if(8&l&&null!==i.attrs){if(!Lb(i.attrs,C,a)){if(ms(l))return!1;y=!0}continue}const M=kf(8&l?"class":E,d,w0(i),a);if(-1===M){if(ms(l))return!1;y=!0;continue}if(""!==C){let B;B=M>h?"":d[M+1].toLowerCase();const J=8&l?B:null;if(J&&-1!==hy(J,C,0)||2&l&&C!==B){if(ms(l))return!1;y=!0}}}}else{if(!y&&!ms(l)&&!ms(E))return!1;if(y&&ms(E))continue;y=!1,l=E|1&l}}return ms(l)||y}function ms(i){return 0==(1&i)}function kf(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=h?1:2}return-1}return function $b(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Ub(i,s,a=!1){for(let l=0;l<s.length;l++)if(Vb(i,s[l],a))return!0;return!1}function C0(i,s){return i?":not("+s.trim()+")":s}function jb(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!ms(y)&&(s+=C0(h,d),d=""),l=y,h=h||!ms(l);a++}return""!==d&&(s+=C0(h,d)),s}const Tt={};function fy(i){b0(Ft(),ve(),hn()+i,!1)}function b0(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Su(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Vs(s,h,0,a)}Ri(a)}function x0(i,s=null,a=null,l){const d=tl(i,s,a,l);return d.resolveInjectorInitializers(),d}function tl(i,s=null,a=null,l,d=new Set){const h=[a||pt,XC(i)];return l=l||("object"==typeof i?void 0:ge(i)),new Bm(h,s||Jc(),l||null,d)}let Ua=(()=>{class i{static create(a,l){if(Array.isArray(a))return x0({name:""},l,a,"");{const d=a.name??"";return x0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Co,i.NULL=new Gw,i.\u0275prov=jt({token:i,providedIn:"any",factory:()=>an(jw)}),i.__NG_ELEMENT_ID__=-1,i})();function ja(i,s=We.Default){const a=ve();return null===a?an(i,s):Pu(Pn(),a,Z(i),s)}function _y(){throw new Error("invalid")}function zi(i,s){return i<<17|s<<2}function Ei(i){return i>>17&32767}function pd(i){return 2|i}function Wi(i){return(131068&i)>>2}function gd(i,s){return-131069&i|s<<2}function vy(i){return 1|i}function Ty(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const y=i.data[h];pc(d),y.contentQueries(2,s[h],h)}}}function Gf(i,s,a,l,d,h,y,w,E,C,S){const M=s.blueprint.slice();return M[0]=d,M[2]=76|l,(null!==S||i&&1024&i[2])&&(M[2]|=1024),ha(M),M[3]=M[15]=i,M[8]=a,M[10]=y||i&&i[10],M[11]=w||i&&i[11],M[12]=E||i&&i[12]||null,M[9]=C||i&&i[9]||null,M[6]=h,M[20]=function yb(){return mb++}(),M[21]=S,M[16]=2==s.type?i[16]:M,M}function za(i,s,a,l,d){let h=i.data[s];if(null===h)h=function Q0(i,s,a,l,d){const h=Eu(),y=cc(),E=i.data[s]=function tI(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=E),null!==h&&(y?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E)),E}(i,s,a,l,d),function Vh(){return wt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const y=function Du(){const i=wt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return jr(h,!0),h}function Uo(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function zf(i,s,a){Tu(s);try{const l=i.viewQuery;null!==l&&Dd(1,l,a);const d=i.template;null!==d&&J0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ty(i,s),i.staticViewQueries&&Dd(2,i.viewQuery,a);const h=i.components;null!==h&&function ZM(i,s){for(let a=0;a<s.length;a++)wT(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,vo()}}function sl(i,s,a,l){const d=s[2];if(128!=(128&d)){Tu(s);try{ha(s),function ga(i){return wt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&J0(i,s,a,2,l);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&Su(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Vs(s,C,0,null),vc(s,0)}if(function dI(i){for(let s=ty(i);null!==s;s=ny(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(512&d[2])&&fa(h,1),d[2]|=512}}}(s),function Ry(i){for(let s=ty(i);null!==s;s=ny(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];is(l)&&sl(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&Ty(i,s),y){const C=i.contentCheckHooks;null!==C&&Su(s,C)}else{const C=i.contentHooks;null!==C&&Vs(s,C,1),vc(s,1)}!function uT(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ri(~d);else{const h=d,y=a[++l],w=a[++l];Uh(y,h),w(2,s[h])}}}finally{Ri(-1)}}(i,s);const w=i.components;null!==w&&function lT(i,s){for(let a=0;a<s.length;a++)vT(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&Dd(2,E,l),y){const C=i.viewCheckHooks;null!==C&&Su(s,C)}else{const C=i.viewHooks;null!==C&&Vs(s,C,2),vc(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,fa(s[3],-1))}finally{vo()}}}function Ay(i,s,a,l){const d=s[10],y=Lh(s);try{!y&&d.begin&&d.begin(),y&&zf(i,s,l),sl(i,s,a,l)}finally{!y&&d.end&&d.end()}}function J0(i,s,a,l,d){const h=hn(),y=2&l;try{Ri(-1),y&&s.length>22&&b0(i,s,22,!1),a(l,d)}finally{Ri(h)}}function Sy(i,s,a){!pa()||(function sI(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Bs(a,s),gr(l,s);const y=a.initialInputs;for(let w=d;w<h;w++){const E=i.data[w],C=mi(E);C&&yT(s,a,E);const S=us(s,i,w,a);gr(S,s),null!==y&&Id(0,w-d,S,E,0,y),C&&(Wt(a.index,s)[8]=S)}}(i,s,a,pr(a,s)),128==(128&a.flags)&&function pT(i,s,a){const l=a.directiveStart,d=a.directiveEnd,h=a.index,y=function Rw(){return wt.lFrame.currentDirectiveIndex}();try{Ri(h);for(let w=l;w<d;w++){const E=i.data[w],C=s[w];bu(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&gT(E,C)}}finally{Ri(-1),bu(y)}}(i,s,a))}function Wa(i,s,a=pr){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const y=l[h+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function Wf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=qf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function qf(i,s,a,l,d,h,y,w,E,C){const S=22+l,M=S+d,B=function X0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Tt);return a}(S,M),J="function"==typeof C?C():C;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:s,data:B.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:J,incompleteFirstPass:!1}}function eI(i,s,a,l){const d=Py(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&ky(i).push(l,d.length-1))}function dT(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function hT(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,y=[];let w=null,E=null;for(let C=s.directiveStart;C<l;C++){const S=d[C],M=S.inputs,B=null===h||w0(s)?null:_T(M,h);y.push(B),w=dT(M,C,w),E=dT(S.outputs,C,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=E}function Di(i,s,a,l,d,h,y,w){const E=pr(s,a);let S,C=s.inputs;!w&&null!=C&&(S=C[l])?(Xf(i,a,S,l,d),_u(s)&&nI(a,s.index)):3&s.type&&(l=function QM(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,s.value||"",l):d,h.setProperty(E,l,d))}function nI(i,s){const a=Wt(s,i);16&a[2]||(a[2]|=32)}function Zf(i,s,a,l){let d=!1;if(pa()){const h=function oI(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const y=l[h];Ub(a,y.selectors,!1)&&(d||(d=[]),wa(Bs(a,s),i,y.type),mi(y)?(aI(i,a),d.unshift(y)):d.push(y))}return d}(i,s,a),y=null===l?null:{"":-1};if(null!==h){d=!0,xy(a,i.data.length,h.length);for(let S=0;S<h.length;S++){const M=h[S];M.providersResolver&&M.providersResolver(M)}let w=!1,E=!1,C=Uo(i,s,h.length,null);for(let S=0;S<h.length;S++){const M=h[S];a.mergedAttrs=_a(a.mergedAttrs,M.hostAttrs),Qf(i,a,s,C,M),mT(C,M,y),null!==M.contentQueries&&(a.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=128);const B=M.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),C++}hT(i,a)}y&&function uI(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new me(-301,!1);l.push(s[d],h)}}}(a,l,y)}return a.mergedAttrs=_a(a.mergedAttrs,a.attrs),d}function Yf(i,s,a,l,d,h){const y=h.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function fT(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(l,d,y)}}function gT(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function aI(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function mT(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;mi(s)&&(a[""]=i)}}function xy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Qf(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=Zn(d.type)),y=new Hr(h,mi(d),ja);i.blueprint[l]=y,a[l]=y,Yf(i,s,0,l,Uo(i,a,d.hostVars,Tt),d)}function yT(i,s,a){const l=pr(s,i),d=Wf(a),h=i[10],y=Jf(i,Gf(i,d,null,a.onPush?32:16,l,s,h,h.createRenderer(l,a),null,null,null));i[s.index]=y}function qi(i,s,a,l,d,h){const y=pr(i,s);!function My(i,s,a,l,d,h,y){if(null==h)i.removeAttribute(s,d,a);else{const w=null==y?ie(h):y(h,l||"",d);i.setAttribute(s,d,w,a)}}(s[11],y,h,i.value,a,l,d)}function Id(i,s,a,l,d,h){const y=h[s];if(null!==y){const w=l.setInput;for(let E=0;E<y.length;){const C=y[E++],S=y[E++],M=y[E++];null!==w?l.setInput(a,M,C,S):a[S]=M}}}function _T(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function cI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function vT(i,s){const a=Wt(s,i);if(is(a)){const l=a[1];48&a[2]?sl(l,a,l.template,a[8]):a[5]>0&&ol(a)}}function ol(i){for(let l=ty(i);null!==l;l=ny(l))for(let d=10;d<l.length;d++){const h=l[d];if(is(h))if(512&h[2]){const y=h[1];sl(y,h,y.template,h[8])}else h[5]>0&&ol(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Wt(a[l],i);is(d)&&d[5]>0&&ol(d)}}function wT(i,s){const a=Wt(s,i),l=a[1];(function hI(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),zf(l,a,a[8])}function Jf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ed(i){for(;i;){i[2]|=32;const s=Ju(i);if(vu(i)&&!s)return i;i=s}return null}function Dd(i,s,a){pc(0),s(i,a)}function Py(i){return i[7]||(i[7]=[])}function ky(i){return i.cleanup||(i.cleanup=[])}function fI(i,s){const a=i[9],l=a?a.get(wf,null):null;l&&l.handleError(s)}function Xf(i,s,a,l,d){for(let h=0;h<a.length;){const y=a[h++],w=a[h++],E=s[y],C=i.data[y];null!==C.setInput?C.setInput(E,d,l,w):E[w]=d}}function Cd(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?h=w:1==h?d=Oe(d,w):2==h&&(l=Oe(l,w+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function ep(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(vn(h)),Sr(h))for(let w=10;w<h.length;w++){const E=h[w],C=E[1].firstChild;null!==C&&ep(E[1],E,C,l)}const y=a.type;if(8&y)ep(i,s,a.child,l);else if(32&y){const w=Af(a,s);let E;for(;E=w();)l.push(E)}else if(16&y){const w=kb(s,a);if(Array.isArray(w))l.push(...w);else{const E=Ju(s[16]);ep(E[1],E,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class bd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ep(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Sr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(xf(s,l),Gn(a,l))}this._attachedToViewContainer=!1}Mf(this._lView[1],this._lView)}onDestroy(s){eI(this._lView[1],this._lView,null,s)}markForCheck(){Ed(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Ny(i,s,a){const l=s[10];l.begin&&l.begin();try{sl(i,s,i.template,a)}catch(d){throw fI(s,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tb(i,s){Po(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=s}}class Fy extends bd{constructor(s){super(s),this._view=s}detectChanges(){!function Oy(i){!function IT(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Ym(a);if(null!==l){const d=l[1];Ay(d,l,d.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class tp extends nd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=P(s);return new al(a,this.ngModule)}}function pI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class ET{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const d=this.injector.get(s,Wr,l);return d!==Wr||a===Wr?d:this.parentInjector.get(s,a,l)}}class al extends Yw{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Hb(i){return i.map(jb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return pI(this.componentDef.inputs)}get outputs(){return pI(this.componentDef.outputs)}create(s,a,l,d){let h=(d=d||this.ngModule)instanceof to?d:d?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new ET(s,h):s,w=y.get(sb,null);if(null===w)throw new me(407,!1);const E=y.get(ab,null),C=w.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=l?function YM(i,s,a){return i.selectRootElement(s,a===rt.ShadowDom)}(C,l,this.componentDef.encapsulation):Sf(w.createRenderer(null,this.componentDef),S,function gI(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(S)),B=this.componentDef.onPush?288:272,J={components:[]},de=qf(0,null,null,1,0,null,null,null,null,null),Te=Gf(null,de,J,B,null,null,w,C,E,y,null);let $e,Ke;Tu(Te);try{const ct=function tR(i,s,a,l,d,h){const y=a[1];a[22]=i;const E=za(y,22,2,"#host",null),C=E.mergedAttrs=s.hostAttrs;null!==C&&(Cd(E,C,!0),null!==i&&(Ni(d,i,C),null!==E.classes&&Pf(d,i,E.classes),null!==E.styles&&Fb(d,i,E.styles)));const S=l.createRenderer(i,s),M=Gf(a,Wf(s),null,s.onPush?32:16,a[22],E,l,S,h||null,null,null);return y.firstCreatePass&&(wa(Bs(E,a),y,s.type),aI(y,E),xy(E,a.length,1)),Jf(a,M),a[22]=M}(M,this.componentDef,Te,w,C);if(M)if(l)Ni(C,M,["ng-version",_f.full]);else{const{attrs:Ie,classes:at}=function Gb(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!ms(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&Ni(C,M,Ie),at&&at.length>0&&Pf(C,M,at.join(" "))}if(Ke=da(de,22),void 0!==a){const Ie=Ke.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Lt=a[at];Ie.push(null!=Lt?Array.from(Lt):null)}}$e=function nR(i,s,a,l,d){const h=a[1],y=function iI(i,s,a){const l=Pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qf(i,l,s,Uo(i,s,1,null),a),hT(i,l));const d=us(s,i,l.directiveStart,l);gr(d,s);const h=pr(l,s);return h&&gr(h,s),d}(h,a,s);if(l.components.push(y),i[8]=y,null!==d)for(const E of d)E(y,s);if(s.contentQueries){const E=Pn();s.contentQueries(1,y,E.directiveStart)}const w=Pn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ri(w.index),Yf(a[1],w,0,w.directiveStart,w.directiveEnd,s),gT(s,y)),y}(ct,this.componentDef,Te,J,[AT]),zf(de,Te,null)}finally{vo()}return new bT(this.componentType,$e,ka(Ke,Te),Te,Ke)}}class bT extends class Zw{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Fy(d),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[s])){const h=this._rootLView;Xf(h[1],h,d,s,a),nI(h,this._tNode.index)}}get injector(){return new Da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function AT(){const i=Pn();Au(ve()[1],i)}function np(i){let s=function ST(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(mi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new me(903,!1);d=s.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=yI(i.inputs),y.declaredInputs=yI(i.declaredInputs),y.outputs=yI(i.outputs);const w=d.hostBindings;w&&vI(i,w);const E=d.viewQuery,C=d.contentQueries;if(E&&iR(i,E),C&&_I(i,C),Ce(i.inputs,d.inputs),Ce(i.declaredInputs,d.declaredInputs),Ce(i.outputs,d.outputs),mi(d)&&d.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let y=0;y<h.length;y++){const w=h[y];w&&w.ngInherit&&w(i),w===np&&(a=!1)}}s=Object.getPrototypeOf(s)}!function mI(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=_a(d.hostAttrs,a=_a(a,d.hostAttrs))}}(l)}function yI(i){return i===or?{}:i===pt?[]:i}function iR(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function _I(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function vI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let rp=null;function _s(){if(!rp){const i=bt.Symbol;if(i&&i.iterator)rp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(rp=l)}}}return rp}function ul(i){return!!ip(i)&&(Array.isArray(i)||!(i instanceof Map)&&_s()in i)}function ip(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function yr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ii(i,s,a,l){const d=ve();return yr(d,ma(),s)&&(Ft(),qi(fn(),d,i,s,a,l)),ii}function Ki(i,s,a,l){return yr(i,ma(),a)?s+ie(a)+l:Tt}function up(i,s,a,l,d,h,y,w){const E=ve(),C=Ft(),S=i+22,M=C.firstCreatePass?function bI(i,s,a,l,d,h,y,w,E){const C=s.consts,S=za(s,i,4,y||null,yi(C,w));Zf(s,a,S,yi(C,E)),Au(s,S);const M=S.tViews=qf(2,S,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),M.queries=s.queries.embeddedTView(S)),S}(S,C,E,s,a,l,d,h,y):C.data[S];jr(M,!1);const B=E[11].createComment("");hd(C,E,B,M),gr(B,E),Jf(E,E[S]=cI(B,E,B,M)),go(M)&&Sy(C,E,M),null!=y&&Wa(E,M,w)}function $y(i,s,a){const l=ve();return yr(l,ma(),s)&&Di(Ft(),fn(),l,i,s,l[11],a,!1),$y}function jy(i,s,a,l,d){const y=d?"class":"style";Xf(i,a,s.inputs[y],y,l)}function Ad(i,s,a,l){const d=ve(),h=Ft(),y=22+i,w=d[11],E=d[y]=Sf(w,s,function yc(){return wt.lFrame.currentNamespace}()),C=h.firstCreatePass?function Hy(i,s,a,l,d,h,y){const w=s.consts,C=za(s,i,2,d,yi(w,h));return Zf(s,a,C,yi(w,y)),null!==C.attrs&&Cd(C,C.attrs,!1),null!==C.mergedAttrs&&Cd(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(y,h,d,0,s,a,l):h.data[y];jr(C,!0);const S=C.mergedAttrs;null!==S&&Ni(w,E,S);const M=C.classes;null!==M&&Pf(w,E,M);const B=C.styles;return null!==B&&Fb(w,E,B),64!=(64&C.flags)&&hd(h,d,E,C),0===function oc(){return wt.lFrame.elementDepthCount}()&&gr(E,d),function dm(){wt.lFrame.elementDepthCount++}(),go(C)&&(Sy(h,d,C),function cT(i,s,a){if(Os(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,C,d)),null!==l&&Wa(d,C),Ad}function lp(){let i=Pn();cc()?function Cu(){wt.lFrame.isParent=!1}():(i=i.parent,jr(i,!1));const s=i;!function ac(){wt.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Au(a,i),Os(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function xu(i){return 0!=(16&i.flags)}(s)&&jy(a,s,ve(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Mu(i){return 0!=(32&i.flags)}(s)&&jy(a,s,ve(),s.stylesWithoutHost,!1),lp}function Gy(i,s,a,l){return Ad(i,s,a,l),lp(),Gy}function cp(i){return!!i&&"function"==typeof i.then}function TI(i){return!!i&&"function"==typeof i.subscribe}const AI=TI;function dp(i,s,a,l){const d=ve(),h=Ft(),y=Pn();return function Ky(i,s,a,l,d,h,y,w){const E=go(l),S=i.firstCreatePass&&ky(i),M=s[8],B=Py(s);let J=!0;if(3&l.type||w){const $e=pr(l,s),Ke=w?w($e):$e,ct=B.length,Ie=w?Lt=>w(vn(Lt[l.index])):l.index;let at=null;if(!w&&E&&(at=function Xa(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const y=d[h];if(y===a&&d[h+1]===l){const w=s[7],E=d[h+2];return w.length>E?w[E]:null}"string"==typeof y&&(h+=2)}return null}(i,s,d,l.index)),null!==at)(at.__ngLastListenerFn__||at).__ngNextListenerFn__=h,at.__ngLastListenerFn__=h,J=!1;else{h=xI(l,s,M,h,!1);const Lt=a.listen(Ke,d,h);B.push(h,Lt),S&&S.push(d,Ie,ct,ct+1)}}else h=xI(l,s,M,h,!1);const de=l.outputs;let Te;if(J&&null!==de&&(Te=de[d])){const $e=Te.length;if($e)for(let Ke=0;Ke<$e;Ke+=2){const mn=s[Te[Ke]][Te[Ke+1]].subscribe(h),Qo=B.length;B.push(h,mn),S&&S.push(d,l.index,Qo,-(Qo+1))}}}(h,d,d[11],y,i,s,0,l),dp}function Zy(i,s,a,l){try{return!1!==a(l)}catch(d){return fI(i,d),!1}}function xI(i,s,a,l,d){return function h(y){if(y===Function)return l;Ed(2&i.flags?Wt(i.index,s):s);let E=Zy(s,0,l,y),C=h.__ngNextListenerFn__;for(;C;)E=Zy(s,0,C,y)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function hl(i,s,a,l,d){const h=ve(),y=Ki(h,s,a,l);return y!==Tt&&Di(Ft(),fn(),h,i,y,h[11],d,!1),hl}function yp(i,s,a,l,d){const h=i[a+1],y=null===s;let w=l?Ei(h):Wi(h),E=!1;for(;0!==w&&(!1===E||y);){const S=i[w+1];NI(i[w],s)&&(E=!0,i[w+1]=l?vy(S):pd(S)),w=l?Ei(S):Wi(S)}E&&(i[a+1]=l?pd(h):vy(h))}function NI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&cs(i,s)>=0}function t_(i,s){return function Zi(i,s,a,l){const d=ve(),h=Ft(),y=function os(i){const s=wt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);h.firstUpdatePass&&function wp(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[hn()],y=function BI(i,s){return s>=i.expandoStartIndex}(i,a);(function a_(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!y&&(s=!1),s=function kT(i,s,a,l){const d=function hc(i){const s=wt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=xd(a=$I(null,i,s,a,l),s.attrs,l),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=$I(d,i,s,a,l),null===h){let E=function dR(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Wi(l))return i[Ei(l)]}(i,s,l);void 0!==E&&Array.isArray(E)&&(E=$I(null,i,s,E[1],l),E=xd(E,s.attrs,l),function r_(i,s,a,l){i[Ei(a?s.classBindings:s.styleBindings)]=l}(i,s,l,E))}else h=function hR(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=xd(l,i[h].hostAttrs,a);return xd(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function Jy(i,s,a,l,d,h){let y=h?s.classBindings:s.styleBindings,w=Ei(y),E=Wi(y);i[l]=a;let S,C=!1;if(Array.isArray(a)){const M=a;S=M[1],(null===S||cs(M,S)>0)&&(C=!0)}else S=a;if(d)if(0!==E){const B=Ei(i[w+1]);i[l+1]=zi(B,w),0!==B&&(i[B+1]=gd(i[B+1],l)),i[w+1]=function KM(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=zi(w,0),0!==w&&(i[w+1]=gd(i[w+1],l)),w=l;else i[l+1]=zi(E,0),0===w?w=l:i[E+1]=gd(i[E+1],l),E=l;C&&(i[l+1]=pd(i[l+1])),yp(i,S,l,!0),yp(i,S,l,!1),function RT(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&cs(h,s)>=0&&(a[l+1]=vy(a[l+1]))}(s,S,i,l,h),y=zi(w,E),h?s.classBindings=y:s.styleBindings=y}(d,h,s,a,y,l)}}(h,i,y,l),s!==Tt&&yr(d,y,s)&&function jI(i,s,a,l,d,h,y,w){if(!(3&s.type))return;const E=i.data,C=E[w+1];Ip(function md(i){return 1==(1&i)}(C)?HI(E,s,a,d,Wi(C),y):void 0)||(Ip(h)||function eT(i){return 2==(2&i)}(C)&&(h=HI(E,null,a,d,w,y)),function dy(i,s,a,l,d){if(s)d?i.addClass(a,l):i.removeClass(a,l);else{let h=-1===l.indexOf("-")?void 0:gs.DashCase;null==d?i.removeStyle(a,l,h):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),h|=gs.Important),i.setStyle(a,l,d,h))}}(l,y,ca(hn(),a),d,h))}(h,h.data[hn()],d,d[11],i,d[y+1]=function o_(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ge(Ii(i)))),i}(s,a),l,y)}(i,s,null,!0),t_}function $I(i,s,a,l,d){let h=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(h=s[w],l=xd(l,h.hostAttrs,d),h!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function xd(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),tt(i,y,!!a||s[++h]))}return void 0===i?null:i}function HI(i,s,a,l,d,h){const y=null===s;let w;for(;d>0;){const E=i[d],C=Array.isArray(E),S=C?E[1]:E,M=null===S;let B=a[d+1];B===Tt&&(B=M?pt:void 0);let J=M?xc(B,l):S===l?B:void 0;if(C&&!Ip(J)&&(J=xc(E,l)),Ip(J)&&(w=J,y))return w;const de=i[d+1];d=y?Ei(de):Wi(de)}if(null!==s){let E=h?s.residualClasses:s.residualStyles;null!=E&&(w=xc(E,l))}return w}function Ip(i){return void 0!==i}function GI(i,s=""){const a=ve(),l=Ft(),d=i+22,h=l.firstCreatePass?za(l,d,1,s,null):l.data[d],y=a[d]=function ry(i,s){return i.createText(s)}(a[11],s);hd(l,a,y,h),jr(h,!1)}function Ep(i){return u_("",i,""),Ep}function u_(i,s,a){const l=ve(),d=Ki(l,i,s,a);return d!==Tt&&function ro(i,s,a){const l=ca(s,i);!function iy(i,s,a){i.setValue(s,a)}(i[11],l,a)}(l,hn(),d),u_}const pl=void 0;var KT=["en",[["a","p"],["AM","PM"],pl],[["AM","PM"],pl,pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pl,"{1} 'at' {0}",pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function h_(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Go={};function f_(i){const s=function YT(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=p_(s);if(a)return a;const l=s.split("-")[0];if(a=p_(l),a)return a;if("en"===l)return KT;throw new me(701,!1)}function iE(i){return f_(i)[ht.PluralCase]}function p_(i){return i in Go||(Go[i]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[i]),Go[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const qr="en-US";let Tp=qr;function F_(i,s,a,l,d){if(i=Z(i),Array.isArray(i))for(let h=0;h<i.length;h++)F_(i[h],s,a,l,d);else{const h=Ft(),y=ve();let w=Oo(i)?i:Z(i.provide),E=Wu(i);const C=Pn(),S=1048575&C.providerIndexes,M=C.directiveStart,B=C.providerIndexes>>20;if(Oo(i)||!i.multi){const J=new Hr(E,d,ja),de=Od(w,s,d?S:S+B,M);-1===de?(wa(Bs(C,y),h,w),L_(h,i,s.length),s.push(w),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(J),y.push(J)):(a[de]=J,y[de]=J)}else{const J=Od(w,s,S+B,M),de=Od(w,s,S,S+B),Te=J>=0&&a[J],$e=de>=0&&a[de];if(d&&!$e||!d&&!Te){wa(Bs(C,y),h,w);const Ke=function gA(i,s,a,l,d){const h=new Hr(i,a,ja);return h.multi=[],h.index=s,h.componentProviders=0,AE(h,d,l&&!a),h}(d?V_:pA,a.length,d,l,E);!d&&$e&&(a[de].providerFactory=Ke),L_(h,i,s.length,0),s.push(w),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(Ke),y.push(Ke)}else L_(h,i,J>-1?J:de,AE(a[d?de:J],E,!d&&l));!d&&l&&$e&&a[de].componentProviders++}}}function L_(i,s,a,l){const d=Oo(s),h=function eb(i){return!!i.useClass}(s);if(d||h){const E=(h?Z(s.useClass):s).prototype.ngOnDestroy;if(E){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const S=C.indexOf(a);-1===S?C.push(a,[l,E]):C[S+1].push(l,E)}else C.push(a,E)}}}function AE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Od(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function pA(i,s,a,l){return U_(this.multi,[])}function V_(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=us(a,a[1],this.providerFactory.index,l);h=w.slice(0,y),U_(d,h);for(let E=y;E<w.length;E++)h.push(w[E])}else h=[],U_(d,h);return h}function U_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function SE(i,s=[]){return a=>{a.providersResolver=(l,d)=>function TE(i,s,a){const l=Ft();if(l.firstCreatePass){const d=mi(i);F_(a,l.data,l.blueprint,d,!0),F_(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class wl{}class Kr{}function mA(i,s){return new xE(i,s??null)}class xE extends wl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tp(this);const l=st(s);this._bootstrapComponents=no(l.bootstrap),this._r3Injector=tl(s,a,[{provide:wl,useValue:this},{provide:nd,useValue:this.componentFactoryResolver}],ge(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class kp extends Kr{constructor(s){super(),this.moduleType=s}create(s){return new xE(this.moduleType,s)}}class yA extends wl{constructor(s,a,l){super(),this.componentFactoryResolver=new tp(this),this.instance=null;const d=new Bm([...s,{provide:wl,useValue:this},{provide:nd,useValue:this.componentFactoryResolver}],a||Jc(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function B_(i,s,a=null){return new yA(i,s,a).injector}let $_=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Lm(0,a.type),d=l.length>0?B_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=jt({token:i,providedIn:"environment",factory:()=>new i(an(to))}),i})();function ME(i){i.getStandaloneInjector=s=>s.get($_).getOrCreateStandaloneInjector(i)}function $E(i){return s=>{setTimeout(i,void 0,s)}}const Es=class RR extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let d=s,h=a||(()=>null),y=l;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),h=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(h=$E(h),d&&(d=$E(d)),y&&(y=$E(y)));const w=super.subscribe({next:d,error:h,complete:y});return s instanceof F.w0&&s.add(w),w}};function NR(){return this._results[_s()]()}class Up{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=_s(),l=Up.prototype;l[a]||(l[a]=NR)}get changes(){return this._changes||(this._changes=new Es)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=rn(s);(this._changesDetected=!function Oi(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Il=(()=>{class i{}return i.__NG_ELEMENT_ID__=RA,i})();const xA=Il,MA=class extends xA{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,d=Gf(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(l)),zf(l,d,s),new bd(d)}};function RA(){return Bp(Pn(),ve())}function Bp(i,s){return 4&i.type?new MA(s,i,ka(i,s)):null}let X_=(()=>{class i{}return i.__NG_ELEMENT_ID__=kd,i})();function kd(){return Hp(Pn(),ve())}const El=X_,$p=class extends El{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new Da(this._hostTNode,this._hostLView)}get parentInjector(){const s=va(this._hostTNode,this._hostLView);if(Cm(s)){const a=as(s,this._hostLView),l=Us(s);return new Da(a[1].data[l+8],a)}return new Da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=jp(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let d,h;"number"==typeof l?d=l:null!=l&&(d=l.index,h=l.injector);const y=s.createEmbeddedView(a||{},h);return this.insert(y,d),y}createComponent(s,a,l,d,h){const y=s&&!function vi(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const M=a||{};w=M.index,l=M.injector,d=M.projectableNodes,h=M.environmentInjector||M.ngModuleRef}const E=y?s:new al(P(s)),C=l||this.parentInjector;if(!h&&null==E.ngModule){const B=(y?C:this.parentInjector).get(to,null);B&&(h=B)}const S=E.create(C,d,void 0,h);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,d=l[1];if(function cm(i){return Sr(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const M=l[3],B=new $p(M,M[6],M[3]);B.detach(B.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function Sb(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],js(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function xb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(d,l,y,h);const w=ly(h,y),E=l[11],C=Nn(E,y[7]);return null!==C&&function GM(i,s,a,l,d,h){l[0]=d,l[6]=s,Po(i,l,a,1,d,h)}(d,y[6],E,l,C,w),s.attachToViewContainerRef(),js(Fd(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=jp(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=xf(this._lContainer,a);l&&(Gn(Fd(this._lContainer),a),Mf(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=xf(this._lContainer,a);return l&&null!=Gn(Fd(this._lContainer),a)?new bd(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function jp(i){return i[8]}function Fd(i){return i[8]||(i[8]=[])}function Hp(i,s){let a;const l=s[i.index];if(Sr(l))a=l;else{let d;if(8&i.type)d=vn(l);else{const h=s[11];d=h.createComment("");const y=pr(i,s);Va(h,Nn(h,y),d,function Pb(i,s){return i.nextSibling(s)}(h,y),!1)}s[i.index]=a=cI(l,s,d,i),Jf(s,a)}return new $p(a,i,s)}class Ld{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ld(this.queryList)}setDirty(){this.queryList.setDirty()}}class HE{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const y=a.getByIndex(h);d.push(this.queries[y.indexInDeclarationView].clone())}return new HE(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Gp(s,a).matches&&this.queries[a].setDirty()}}class NA{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class GE{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new GE(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Vd{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Vd(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,nv(a,h)),this.matchTNodeWithReadOption(s,a,Ea(a,s,h,!1,!1))}else l===Il?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ea(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===yf||d===X_||d===Il&&4&a.type)this.addMatch(a.index,-2);else{const h=Ea(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function nv(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function zE(i,s,a,l){return-1===a?function Dl(i,s){return 11&i.type?ka(i,s):4&i.type?Bp(i,s):null}(s,i):-2===a?function OA(i,s,a){return a===yf?ka(s,i):a===Il?Bp(s,i):a===X_?Hp(s,i):void 0}(i,s,l):us(i,i[1],a,s)}function Ud(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const C=y[E];w.push(C<0?null:zE(s,h[C],y[E+1],a.metadata.read))}d.matches=w}return d.matches}function oo(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const y=Ud(i,s,d,a);for(let w=0;w<h.length;w+=2){const E=h[w];if(E>0)l.push(y[w/2]);else{const C=h[w+1],S=s[-E];for(let M=10;M<S.length;M++){const B=S[M];B[17]===B[3]&&oo(B[1],B,C,l)}if(null!==S[9]){const M=S[9];for(let B=0;B<M.length;B++){const J=M[B];oo(J[1],J,C,l)}}}}}return l}function WE(i){const s=ve(),a=Ft(),l=fc();pc(l+1);const d=Gp(a,l);if(i.dirty&&Lh(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?oo(a,s,l,[]):Ud(a,s,d,l);i.reset(h,kM),i.notifyOnChanges()}return!0}return!1}function PA(i,s,a,l){const d=Ft();if(d.firstCreatePass){const h=Pn();(function KE(i,s,a){null===i.queries&&(i.queries=new GE),i.queries.track(new Vd(s,a))})(d,new NA(s,a,l),h.index),function ZE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function qE(i,s,a){const l=new Up(4==(4&a));eI(i,s,l,l.destroy),null===s[19]&&(s[19]=new HE),s[19].queries.push(new Ld(l))}(d,ve(),a)}function kA(){return function oi(i,s){return i[19].queries[s].queryList}(ve(),fc())}function Gp(i,s){return i.queries.getByIndex(s)}function eg(...i){}const uD=new nn("Application Initializer");let ng=(()=>{class i{constructor(a){this.appInits=a,this.resolve=eg,this.reject=eg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(cp(h))a.push(h);else if(AI(h)){const y=new Promise((w,E)=>{h.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(an(uD,8))},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hd=new nn("AppId",{providedIn:"root",factory:function Gd(){return`${zd()}${zd()}${zd()}`}});function zd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rg=new nn("Platform Initializer"),dv=new nn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hv=new nn("appBootstrapListener");let cD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Tl=new nn("LocaleId",{providedIn:"root",factory:()=>Gr(Tl,We.Optional|We.SkipSelf)||function dD(){return typeof $localize<"u"&&$localize.locale||qr}()}),hD=new nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class fv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Xn=(()=>{class i{compileModuleSync(a){return new kp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),h=no(st(a).declarations).reduce((y,w)=>{const E=P(w);return E&&y.push(new al(E)),y},[]);return new fv(l,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const WA=(()=>Promise.resolve(0))();function Wd(i){typeof Zone>"u"?WA.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class bi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Es(!1),this.onMicrotaskEmpty=new Es(!1),this.onStable=new Es(!1),this.onError=new Es(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function mv(){let i=bt.requestAnimationFrame,s=bt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sg(i){const s=()=>{!function qA(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(bt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,qd(i),i.isCheckStableRunning=!0,ig(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),qd(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,y,w)=>{try{return og(i),a.invokeTask(d,h,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),_v(i)}},onInvoke:(a,l,d,h,y,w,E)=>{try{return og(i),a.invoke(d,h,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),_v(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,qd(i),ig(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bi.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(bi.isInAngularZone())throw new me(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+d,s,yv,eg,eg);try{return h.runTask(y,a,l)}finally{h.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const yv={};function ig(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function qd(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function og(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function _v(i){i._nesting--,ig(i)}class KA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Es,this.onMicrotaskEmpty=new Es,this.onStable=new Es,this.onError=new Es}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}const Al=new nn(""),vv=new nn("");let Iv,yD=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Iv||(function ag(i){Iv=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bi.assertNotInAngularZone(),Wd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wd(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(an(bi),an(wv),an(vv))},i.\u0275prov=jt({token:i,factory:i.\u0275fac}),i})(),wv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Iv?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ko=null;const su=new nn("AllowMultipleToken"),Ev=new nn("PlatformDestroyListeners");class _D{constructor(s,a){this.name=s,this.token=a}}function Sl(i,s,a=[]){const l=`Platform: ${s}`,d=new nn(l);return(h=[])=>{let y=cg();if(!y||y.injector.get(su,!1)){const w=[...a,...h,{provide:d,useValue:!0}];i?i(w):function Kd(i){if(Ko&&!Ko.get(su,!1))throw new me(400,!1);Ko=i;const s=i.get(Cv);(function wr(i){const s=i.get(rg,null);s&&s.forEach(a=>a())})(i)}(function Dv(i=[],s){return Ua.create({name:s,providers:[{provide:ps,useValue:"platform"},{provide:Ev,useValue:new Set([()=>Ko=null])},...i]})}(w,l))}return function lg(i){const s=cg();if(!s)throw new me(401,!1);return s}()}}function cg(){return Ko?.get(Cv)??null}let Cv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function dg(i,s){let a;return a="noop"===i?new KA:("zone.js"===i?void 0:i)||new bi(s),a}(l?.ngZone,function xl(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),h=[{provide:bi,useValue:d}];return d.run(()=>{const y=Ua.create({providers:h,parent:this.injector,name:a.moduleType.name}),w=a.create(y),E=w.injector.get(wf,null);if(!E)throw new me(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:S=>{E.handleError(S)}});w.onDestroy(()=>{Zo(this._modules,w),C.unsubscribe()})}),function hg(i,s,a){try{const l=a();return cp(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(E,d,()=>{const C=w.injector.get(ng);return C.runInitializers(),C.donePromise.then(()=>(function sE(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(Tp=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Tl,qr)||qr),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const d=fg({},l);return function ou(i,s,a){const l=new kp(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(au);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new me(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Ev,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(an(Ua))},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function fg(i,s){return Array.isArray(s)?s.reduce(fg,i):{...i,...s}}let au=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new R.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new R.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{bi.assertNotInAngularZone(),Wd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,oe.T)(h,y.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Yw;if(!this._injector.get(ng).done)throw!d&&Ue(a),new me(405,false);let y;y=d?a:this._injector.get(nd).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function ug(i){return i.isBoundToModule}(y)?void 0:this._injector.get(wl),C=y.create(Ua.NULL,[],l||y.selector,w),S=C.location.nativeElement,M=C.injector.get(Al,null);return M?.registerApplication(S),C.onDestroy(()=>{this.detachView(C.hostView),Zo(this.components,C),M?.unregisterApplication(S)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Zo(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(hv,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Zo(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new me(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(an(bi),an(to),an(wf))},i.\u0275prov=jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Zo(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let pg=!0,Zd=!1;function Tv(){return Zd=!0,pg}function ID(){if(Zd)throw new Error("Cannot enable prod mode after platform setup.");pg=!1}let Yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=DD,i})();function DD(i){return function gg(i,s,a){if(_u(i)&&!a){const l=Wt(i.index,s);return new bd(l,l)}return 47&i.type?new bd(s[16],s):null}(Pn(),ve(),16==(16&i))}class SD{constructor(){}supports(s){return ul(s)}create(s){return new eS(s)}}const xD=(i,s)=>s;class eS{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||xD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const y=!l||a&&a.currentIndex<kl(l,d,h)?a:l,w=kl(y,d,h),E=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{h||(h=[]);const C=w-d,S=E-d;if(C!=S){for(let B=0;B<C;B++){const J=B<h.length?h[B]:h[B]=0,de=J+B;S<=de&&de<C&&(h[B]=J+1)}h[y.previousIndex]=S-C}}w!==E&&s(y,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ul(s))throw new me(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)h=s[w],y=this._trackByFn(w,h),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,h,y,w)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,w),l=!0),a=a._next}else d=0,function Td(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[_s()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new tS(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new MD),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new MD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tS{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nS{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class MD{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new nS,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kl(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class uo{constructor(){}supports(s){return s instanceof Map||ip(s)}create(){return new RD}}class RD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||ip(s)))throw new me(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,y=d._next;return h&&(h._next=y),y&&(y._prev=h),d._next=null,d._prev=null,d}const l=new ND(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class ND{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Av(){return new Yo([new SD])}let Yo=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Av()),deps:[[i,new Ys,new pn]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new me(901,!1)}}return i.\u0275prov=jt({token:i,providedIn:"root",factory:Av}),i})();function OD(){return new Ig([new uo])}let Ig=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||OD()),deps:[[i,new Ys,new pn]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new me(901,!1)}}return i.\u0275prov=jt({token:i,providedIn:"root",factory:OD}),i})();const Sv=Sl(null,"core",[]);let FD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(an(au))},i.\u0275mod=lt({type:i}),i.\u0275inj=St({}),i})();function LD(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ut,Ae,N)=>{N.d(Ae,{Z:()=>me});var g=N(2090),F=N(4859),R=N(9681),oe=N(1877);class we{constructor(ie,le){this._delegate=ie,this.firebase=le,(0,R._addComponent)(ie,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=ie.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this._delegate.automaticDataCollectionEnabled=ie}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ie=>{this._delegate.checkDestroyed(),ie()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(ie,le=R._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(ie);return!Qe.isInitialized()&&"EXPLICIT"===(null===(Ze=Qe.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:le})}_removeServiceInstance(ie,le=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ie).clearInstance(le)}_addComponent(ie){(0,R._addComponent)(this._delegate,ie)}_addOrOverwriteComponent(ie){(0,R._addOrOverwriteComponent)(this._delegate,ie)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function Oe(){const ze=function ge(ze){const ie={},le={__esModule:!0,initializeApp:function Re(ee,ne={}){const ce=R.initializeApp(ee,ne);if((0,g.r3)(ie,ce.name))return ie[ce.name];const W=new ze(ce,le);return ie[ce.name]=W,W},app:Qe,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function he(ee){const ne=ee.name,ce=ne.replace("-compat","");if(R._registerComponent(ee)&&"PUBLIC"===ee.type){const W=(K=Qe())=>{if("function"!=typeof K[ce])throw Ce.create("invalid-app-argument",{appName:ne});return K[ce]()};void 0!==ee.serviceProps&&(0,g.ZB)(W,ee.serviceProps),le[ce]=W,ze.prototype[ce]=function(...K){return this._getService.bind(this,ne).apply(this,ee.multipleInstances?K:[])}}return"PUBLIC"===ee.type?le[ce]:null},removeApp:function Ze(ee){delete ie[ee]},useAsService:function Le(ee,ne){return"serverAuth"===ne?null:ne},modularAPIs:R}};function Qe(ee){if(!(0,g.r3)(ie,ee=ee||R._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:ee});return ie[ee]}return le.default=le,Object.defineProperty(le,"apps",{get:function _e(){return Object.keys(ie).map(ee=>ie[ee])}}),Qe.App=ze,le}(we);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function ie(le){(0,g.ZB)(ze,le)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ze}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const me=H;!function Pe(ze){(0,R.registerVersion)("@firebase/app-compat","0.1.33",ze)}()},9681:(ut,Ae,N)=>{N.r(Ae),N.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>fi,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>jt,_apps:()=>Jt,_clearComponents:()=>ho,_components:()=>Kn,_getProvider:()=>St,_registerComponent:()=>Rt,_removeServiceInstance:()=>nr,deleteApp:()=>ns,getApp:()=>rr,getApps:()=>ts,initializeApp:()=>Ar,onLog:()=>Tn,registerVersion:()=>ir,setLogLevel:()=>en});var g=N(5861),F=N(4859),R=N(1877),oe=N(2090),we=N(8766);class ye{constructor(U){this.container=U}getPlatformInfoString(){return this.container.getProviders().map($=>{if(function Ce(O){return"VERSION"===O.getComponent()?.type}($)){const pe=$.getImmediate();return`${pe.library}/${pe.version}`}return null}).filter($=>$).join(" ")}}const ge="@firebase/app",H=new R.Yd("@firebase/app"),Bt="[DEFAULT]",Ve={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,Kn=new Map;function Xt(O,U){try{O.container.addComponent(U)}catch($){H.debug(`Component ${U.name} failed to register with FirebaseApp ${O.name}`,$)}}function jt(O,U){O.container.addOrOverwriteComponent(U)}function Rt(O){const U=O.name;if(Kn.has(U))return H.debug(`There were multiple attempts to register component ${U}.`),!1;Kn.set(U,O);for(const $ of Jt.values())Xt($,O);return!0}function St(O,U){const $=O.container.getProvider("heartbeat").getImmediate({optional:!0});return $&&$.triggerHeartbeat(),O.container.getProvider(U)}function nr(O,U,$=Bt){St(O,U).clearInstance($)}function ho(){Kn.clear()}const yn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class es{constructor(U,$,pe){this._isDeleted=!1,this._options=Object.assign({},U),this._config=Object.assign({},$),this._name=$.name,this._automaticDataCollectionEnabled=$.automaticDataCollectionEnabled,this._container=pe,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(U){this.checkDestroyed(),this._automaticDataCollectionEnabled=U}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(U){this._isDeleted=U}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const fi="9.9.4";function Ar(O,U={}){"object"!=typeof U&&(U={name:U});const $=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},U),pe=$.name;if("string"!=typeof pe||!pe)throw yn.create("bad-app-name",{appName:String(pe)});const Fe=Jt.get(pe);if(Fe){if((0,oe.vZ)(O,Fe.options)&&(0,oe.vZ)($,Fe.config))return Fe;throw yn.create("duplicate-app",{appName:pe})}const lt=new F.H0(pe);for(const Ht of Kn.values())lt.addComponent(Ht);const zt=new es(O,$,lt);return Jt.set(pe,zt),zt}function rr(O=Bt){const U=Jt.get(O);if(!U)throw yn.create("no-app",{appName:O});return U}function ts(){return Array.from(Jt.values())}function ns(O){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(O){const U=O.name;Jt.has(U)&&(Jt.delete(U),yield Promise.all(O.container.getProviders().map($=>$.delete())),O.isDeleted=!0)})).apply(this,arguments)}function ir(O,U,$){var pe;let Fe=null!==(pe=Ve[O])&&void 0!==pe?pe:O;$&&(Fe+=`-${$}`);const lt=Fe.match(/\s|\//),zt=U.match(/\s|\//);if(lt||zt){const Ht=[`Unable to register library "${Fe}" with version "${U}":`];return lt&&Ht.push(`library name "${Fe}" contains illegal characters (whitespace or "/")`),lt&&zt&&Ht.push("and"),zt&&Ht.push(`version name "${U}" contains illegal characters (whitespace or "/")`),void H.warn(Ht.join(" "))}Rt(new F.wA(`${Fe}-version`,()=>({library:Fe,version:U}),"VERSION"))}function Tn(O,U){if(null!==O&&"function"!=typeof O)throw yn.create("invalid-log-argument");(0,R.Am)(O,U)}function en(O){(0,R.Ub)(O)}const dn="firebase-heartbeat-store";let _n=null;function tn(){return _n||(_n=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(dn)}}).catch(O=>{throw yn.create("idb-open",{originalErrorMessage:O.message})})),_n}function rt(){return(rt=(0,g.Z)(function*(O){var U;try{return(yield tn()).transaction(dn).objectStore(dn).get(sr(O))}catch($){if($ instanceof oe.ZR)H.warn($.message);else{const pe=yn.create("idb-get",{originalErrorMessage:null===(U=$)||void 0===U?void 0:U.message});H.warn(pe.message)}}})).apply(this,arguments)}function bt(O,U){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(O,U){var $;try{const Fe=(yield tn()).transaction(dn,"readwrite");return yield Fe.objectStore(dn).put(U,sr(O)),Fe.done}catch(pe){if(pe instanceof oe.ZR)H.warn(pe.message);else{const Fe=yn.create("idb-set",{originalErrorMessage:null===($=pe)||void 0===$?void 0:$.message});H.warn(Fe.message)}}})).apply(this,arguments)}function sr(O){return`${O.name}!${O.options.appId}`}class ar{constructor(U){this.container=U,this._heartbeatsCache=null;const $=this.container.getProvider("app").getImmediate();this._storage=new kt($),this._heartbeatsCachePromise=this._storage.read().then(pe=>(this._heartbeatsCache=pe,pe))}triggerHeartbeat(){var U=this;return(0,g.Z)(function*(){const pe=U.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Fe=Dt();if(null===U._heartbeatsCache&&(U._heartbeatsCache=yield U._heartbeatsCachePromise),U._heartbeatsCache.lastSentHeartbeatDate!==Fe&&!U._heartbeatsCache.heartbeats.some(lt=>lt.date===Fe))return U._heartbeatsCache.heartbeats.push({date:Fe,agent:pe}),U._heartbeatsCache.heartbeats=U._heartbeatsCache.heartbeats.filter(lt=>{const zt=new Date(lt.date).valueOf();return Date.now()-zt<=2592e6}),U._storage.overwrite(U._heartbeatsCache)})()}getHeartbeatsHeader(){var U=this;return(0,g.Z)(function*(){if(null===U._heartbeatsCache&&(yield U._heartbeatsCachePromise),null===U._heartbeatsCache||0===U._heartbeatsCache.heartbeats.length)return"";const $=Dt(),{heartbeatsToSend:pe,unsentEntries:Fe}=function Yr(O,U=1024){const $=[];let pe=O.slice();for(const Fe of O){const lt=$.find(zt=>zt.agent===Fe.agent);if(lt){if(lt.dates.push(Fe.date),G($)>U){lt.dates.pop();break}}else if($.push({agent:Fe.agent,dates:[Fe.date]}),G($)>U){$.pop();break}pe=pe.slice(1)}return{heartbeatsToSend:$,unsentEntries:pe}}(U._heartbeatsCache.heartbeats),lt=(0,oe.L)(JSON.stringify({version:2,heartbeats:pe}));return U._heartbeatsCache.lastSentHeartbeatDate=$,Fe.length>0?(U._heartbeatsCache.heartbeats=Fe,yield U._storage.overwrite(U._heartbeatsCache)):(U._heartbeatsCache.heartbeats=[],U._storage.overwrite(U._heartbeatsCache)),lt})()}}function Dt(){return(new Date).toISOString().substring(0,10)}class kt{constructor(U){this.app=U,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var U=this;return(0,g.Z)(function*(){return(yield U._canUseIndexedDBPromise)&&(yield function nt(O){return rt.apply(this,arguments)}(U.app))||{heartbeats:[]}})()}overwrite(U){var $=this;return(0,g.Z)(function*(){var pe;if(yield $._canUseIndexedDBPromise){const lt=yield $.read();return bt($.app,{lastSentHeartbeatDate:null!==(pe=U.lastSentHeartbeatDate)&&void 0!==pe?pe:lt.lastSentHeartbeatDate,heartbeats:U.heartbeats})}})()}add(U){var $=this;return(0,g.Z)(function*(){var pe;if(yield $._canUseIndexedDBPromise){const lt=yield $.read();return bt($.app,{lastSentHeartbeatDate:null!==(pe=U.lastSentHeartbeatDate)&&void 0!==pe?pe:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...U.heartbeats]})}})()}}function G(O){return(0,oe.L)(JSON.stringify({version:2,heartbeats:O})).length}!function L(O){Rt(new F.wA("platform-logger",U=>new ye(U),"PRIVATE")),Rt(new F.wA("heartbeat",U=>new ar(U),"PRIVATE")),ir(ge,"0.7.32",O),ir(ge,"0.7.32","esm2017"),ir("fire-js","")}("")},4859:(ut,Ae,N)=>{N.d(Ae,{H0:()=>ge,wA:()=>R});var g=N(5861),F=N(2090);class R{constructor(H,j,Z){this.name=H,this.instanceFactory=j,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const oe="[DEFAULT]";class we{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const Z=new F.BH;if(this.instancesDeferred.set(j,Z),this.isInitialized(j)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:j});ke&&Z.resolve(ke)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const Z=this.normalizeInstanceIdentifier(H?.identifier),ke=null!==(j=H?.optional)&&void 0!==j&&j;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Pe){if(ke)return null;throw Pe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function Ce(Oe){return"EAGER"===Oe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,Z]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(j);try{const Pe=this.getOrInitializeService({instanceIdentifier:ke});Z.resolve(Pe)}catch{}}}}clearInstance(H=oe){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,g.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...j.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=oe){return this.instances.has(H)}getOptions(H=oe){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,Z=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:Z,options:j});for(const[Pe,me]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Pe)&&me.resolve(ke);return ke}onInit(H,j){var Z;const ke=this.normalizeInstanceIdentifier(j),Pe=null!==(Z=this.onInitCallbacks.get(ke))&&void 0!==Z?Z:new Set;Pe.add(H),this.onInitCallbacks.set(ke,Pe);const me=this.instances.get(ke);return me&&H(me,ke),()=>{Pe.delete(H)}}invokeOnInitCallbacks(H,j){const Z=this.onInitCallbacks.get(j);if(Z)for(const ke of Z)try{ke(H,j)}catch{}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let Z=this.instances.get(H);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=H,Oe===oe?void 0:Oe),options:j}),this.instances.set(H,Z),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(Z,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Z)}catch{}var Oe;return Z||null}normalizeInstanceIdentifier(H=oe){return this.component?this.component.multipleInstances?H:oe:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new we(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,N)=>{N.d(Ae,{Am:()=>Oe,Ub:()=>ge,Yd:()=>Ce,in:()=>F});const g=[];var F=(()=>{return(H=F||(F={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",F;var H})();const R={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},oe=F.INFO,we={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},ye=(H,j,...Z)=>{if(j<H.logLevel)return;const ke=(new Date).toISOString(),Pe=we[j];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Pe](`[${ke}]  ${H.name}:`,...Z)};class Ce{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=ye,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in F))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?R[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...j),this._logHandler(this,F.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...j),this._logHandler(this,F.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,F.INFO,...j),this._logHandler(this,F.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,F.WARN,...j),this._logHandler(this,F.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...j),this._logHandler(this,F.ERROR,...j)}}function ge(H){g.forEach(j=>{j.setLogLevel(H)})}function Oe(H,j){for(const Z of g){let ke=null;j&&j.level&&(ke=R[j.level]),Z.userLogHandler=null===H?null:(Pe,me,...ze)=>{const ie=ze.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch{return null}}).filter(le=>le).join(" ");me>=(ke??Pe.logLevel)&&H({level:F[me].toLowerCase(),message:ie,args:ze,type:Pe.name})}}}},8766:(ut,Ae,N)=>{N.d(Ae,{Lj:()=>Re,X3:()=>Qe});var g=N(5861);let R,oe;const Ce=new WeakMap,ge=new WeakMap,Oe=new WeakMap,H=new WeakMap,j=new WeakMap;let Pe={get(ne,ce,W){if(ne instanceof IDBTransaction){if("done"===ce)return ge.get(ne);if("objectStoreNames"===ce)return ne.objectStoreNames||Oe.get(ne);if("store"===ce)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return le(ne[ce])},set:(ne,ce,W)=>(ne[ce]=W,!0),has:(ne,ce)=>ne instanceof IDBTransaction&&("done"===ce||"store"===ce)||ce in ne};function ie(ne){return"function"==typeof ne?function ze(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...ce){return ne.apply(Ze(this),ce),le(Ce.get(this))}:function(...ce){return le(ne.apply(Ze(this),ce))}:function(ce,...W){const K=ne.call(Ze(this),ce,...W);return Oe.set(K,ce.sort?ce.sort():[ce]),le(K)}}(ne):(ne instanceof IDBTransaction&&function ke(ne){if(ge.has(ne))return;const ce=new Promise((W,K)=>{const se=()=>{ne.removeEventListener("complete",X),ne.removeEventListener("error",Se),ne.removeEventListener("abort",Se)},X=()=>{W(),se()},Se=()=>{K(ne.error||new DOMException("AbortError","AbortError")),se()};ne.addEventListener("complete",X),ne.addEventListener("error",Se),ne.addEventListener("abort",Se)});ge.set(ne,ce)}(ne),((ne,ce)=>ce.some(W=>ne instanceof W))(ne,function we(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,Pe):ne)}function le(ne){if(ne instanceof IDBRequest)return function Z(ne){const ce=new Promise((W,K)=>{const se=()=>{ne.removeEventListener("success",X),ne.removeEventListener("error",Se)},X=()=>{W(le(ne.result)),se()},Se=()=>{K(ne.error),se()};ne.addEventListener("success",X),ne.addEventListener("error",Se)});return ce.then(W=>{W instanceof IDBCursor&&Ce.set(W,ne)}).catch(()=>{}),j.set(ce,ne),ce}(ne);if(H.has(ne))return H.get(ne);const ce=ie(ne);return ce!==ne&&(H.set(ne,ce),j.set(ce,ne)),ce}const Ze=ne=>j.get(ne);function Qe(ne,ce,{blocked:W,upgrade:K,blocking:se,terminated:X}={}){const Se=indexedDB.open(ne,ce),xe=le(Se);return K&&Se.addEventListener("upgradeneeded",it=>{K(le(Se.result),it.oldVersion,it.newVersion,le(Se.transaction))}),W&&Se.addEventListener("blocked",()=>W()),xe.then(it=>{X&&it.addEventListener("close",()=>X()),se&&it.addEventListener("versionchange",()=>se())}).catch(()=>{}),xe}function Re(ne,{blocked:ce}={}){const W=indexedDB.deleteDatabase(ne);return ce&&W.addEventListener("blocked",()=>ce()),le(W).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],Le=new Map;function ee(ne,ce){if(!(ne instanceof IDBDatabase)||ce in ne||"string"!=typeof ce)return;if(Le.get(ce))return Le.get(ce);const W=ce.replace(/FromIndex$/,""),K=ce!==W,se=he.includes(W);if(!(W in(K?IDBIndex:IDBObjectStore).prototype)||!se&&!_e.includes(W))return;const X=function(){var Se=(0,g.Z)(function*(xe,...it){const $t=this.transaction(xe,se?"readwrite":"readonly");let Bt=$t.store;return K&&(Bt=Bt.index(it.shift())),(yield Promise.all([Bt[W](...it),se&&$t.done]))[0]});return function(it){return Se.apply(this,arguments)}}();return Le.set(ce,X),X}!function me(ne){Pe=ne(Pe)}(ne=>({...ne,get:(ce,W,K)=>ee(ce,W)||ne.get(ce,W,K),has:(ce,W)=>!!ee(ce,W)||ne.has(ce,W)}))},5861:(ut,Ae,N)=>{function g(R,oe,we,ye,Ce,ge,Oe){try{var H=R[ge](Oe),j=H.value}catch(Z){return void we(Z)}H.done?oe(j):Promise.resolve(j).then(ye,Ce)}function F(R){return function(){var oe=this,we=arguments;return new Promise(function(ye,Ce){var ge=R.apply(oe,we);function Oe(j){g(ge,ye,Ce,Oe,H,"next",j)}function H(j){g(ge,ye,Ce,Oe,H,"throw",j)}Oe(void 0)})}}N.d(Ae,{Z:()=>F})}},ut=>{ut(ut.s=323)}]);